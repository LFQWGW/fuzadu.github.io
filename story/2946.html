<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何使Windows Home Server成为域控制器</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何使Windows Home Server成为域控制器</h2></div><div class="content"><img class="content_img" src="/image/af/afc1c1783dac5a7212ab43dd2209b892.png" /><p>Active Directory使公司能够从集中位置管理用户、计算机、打印机等。您是否想在家里使用此功能，但没有钱购买Windows Server？下面介绍如何将Windows Home Server升级为域控制器。</p><p>也许你的衣柜里没有100多台电脑，但有时可能会有这种感觉。Active Directory允许您集中管理可以登录到计算机的用户，并帮助快速设置计算机首选项，甚至可以帮助管理您的虚拟机。如果您一直想要一种更好的方式来管理这一切，或者甚至只是想深入研究Active Directory，这里介绍了如何以较低的成本做到这一点。</p><p>请注意，Microsoft明确表示，根据安装或设置Windows Home Server时您必须同意的最终用户许可协议(EULA)，您不允许这样做。因此，本文将严格用于教育目的。</p><img class="content_img" src="/image/ae/ae8377784a3f676d2b768dc8d29fa41d.png" /><p>如果您对破坏EULA不敏感，我建议您从微软购买Windows Server。另一方面，精选的学生可以从Microsoft DreamSpark免费下载Windows Server。</p><p>设置Windows Home Server</p><p>初始设置Windows Home Server后，您需要从Windows Home Server控制台启用远程桌面功能。如果您正在阅读这篇文章，我将假定您自己知道如何做到这一点。</p><p>您还需要两个专用磁盘或分区来存储Active Directory信息。active directory使用文件夹NTDS和SYSVOL来存储其数据库和公共文件，如果它们不在专用磁盘上，您很可能会看到服务器和网络速度变慢。</p><p>Active Directory要求您的服务器上有DNS和静态IP地址。您现在不需要执行这两个步骤，但您需要在此过程中做好准备。</p><p>将WHS提升为域控制器会做一些您可能不想做的事情。在继续之前，请阅读以下注意事项。</p><p>
您将无法再使用WHS连接器将计算机添加到WHS。从现在开始，您必须将计算机加入您要设置的新域。为了能够将计算机添加到域中，您不能使用Windows的任何“主”变体，而需要使用业务层、专业层或企业层。
WHS中的所有用户都将被擦除，仅删除默认用户帐户(例如管理员、访客等)。将留在WHS。
您的WHS网页将被破坏。您可以通过安装另一个Web服务器(例如Apache)来“修复”此问题，但这将需要更多的设置和工作。</p><p>总而言之，准备好在您的WHS上进行全新安装，不要在您正在积极保存信息的计算机上执行此操作。如果再有一台计算机来设置AD并迁移您想要的任何信息，可能会是一个更好的主意。</p><p>始终有备份，如果这是您使用的计算机，则您有责任在开始此过程之前进行备份。</p><p>推广您的服务器</p><p>域控制器升级是通过dcproc.exe命令完成的。使用您的服务器进行远程访问，然后打开Run对话框并运行该命令。</p><img class="content_img" src="/image/77/777d0f1f83d24c43496b9d014909fde9.png" /><p>单击几次“下一步”，然后选择为新域创建新控制器的选项。</p><img class="content_img" src="/image/97/9742e0a220cb35407448835918110b06.png" /><p>然后选择新的域林。</p><img class="content_img" src="/image/b5/b5f7660945138ae080121f9181eee3bf.png" /><p>接下来，最好选择在本地计算机上设置DNS。这是配置控制器的最简单方法。您只需确保关闭路由器上的DNS即可。</p><p>如果您要保留从路由器发出的DHCP，您还需要将DNS责任指定给您的服务器。请查看您的路由器手册了解如何做到这一点。</p><img class="content_img" src="/image/c0/c02aa7095b4b4bab94664cb4b0e610b7.png" /><p>最后，我们可以命名新域。如果您拥有Web域名，请不要将其命名为与您的域名相同的名称，因为在这种情况下，除非您还在此计算机上运行Web服务和动态DNS更新程序，否则可能会导致问题。</p><p>相反，更好的做法是为您的域指定一个.local名称。</p><img class="content_img" src="/image/87/8747a8f4259df31b66b5a8fa8fd72f0e.png" /><p>接下来，您需要输入NETBIOS名称。您应该能够选择默认值，然后只需单击Next(下一步)即可。</p><img class="content_img" src="/image/8d/8d903c5b46614b7fd8490dbc963c9ae6.png" /><p>我们需要告知域控制器存储数据库、日志文件和公共文件的位置。建议将所有这些存储在单独的硬盘上。在我的安装中，我插入了一个单独的20 GB硬盘驱动器(E：)，在那里我放置了所需的文件。</p><img class="content_img" src="/image/88/889ebab40d107a6e54fe21da98cc5c37.png" /><img class="content_img" src="/image/b1/b1dfbb7fa42b369160472f826028f308.png" /><p>如果你有任何Windows2000之前的电脑，我为你感到难过。在大多数情况下，您可以在下一步中省略对任何较旧的内容的支持。</p><img class="content_img" src="/image/e6/e646bbd9dfdc7ee6504383308f442a70.png" /><p>选择新的管理员密码。</p><img class="content_img" src="/image/f6/f6e7afbfcb110fed5a7a4e20a7605eda.png" /><p>然后查看您的更改并单击“下一步”。</p><img class="content_img" src="/image/5c/5c7f829b2718a91b72d3ffffabcdb75a.png" /><p>您的晋升将为您启动这一流程。</p><img class="content_img" src="/image/a7/a70365e0b837d348fd797031ce93a0bd.png" /><p>在某个时刻，可能会要求您提供安装CD，因此请确保您有可用的CD(或CD中的文件)。</p><img class="content_img" src="/image/d5/d5e1d7c95cde061399dd1161608c55a2.png" /><p>在此过程中，系统可能还会提示您将IP地址从动态更改为静态。</p><img class="content_img" src="/image/da/daa71ba81ba4446f14ec9fddd289c793.png" /><p>单击“确定”，然后继续将您的IP地址更改为合适的静态地址。</p><img class="content_img" src="/image/4b/4b22daa11900c368f56fec5e17f43205.png" /><p>您的设置应该会在此屏幕上完成。单击“完成”后，继续并重新启动新域控制器。</p><p>如果重新启动需要一段时间，请不要担心。它需要启动许多新服务，并且第一次重新启动可能需要一段时间。</p><img class="content_img" src="/image/fa/faf2ae67778ae60b87c36405b7199cb3.png" /><p>机器重新启动后，您可能会收到服务无法启动的错误。您还应该在登录屏幕上有一个新选项来登录到您刚刚创建的新域。</p><img class="content_img" src="/image/f3/f3fa911347579a3a7e40d8b05bb72243.png" /><p>安装后设置</p><p>现在您已经有了域和域控制器，我们只需要做几件事来确保事情顺利运行。</p><p>首先，我们可以通过转到开始-&gt;运行-&gt;“services.msc”来修复之前遇到的服务错误</p><img class="content_img" src="/image/20/20871e4bc2fc2e60b782e03f33059efd.png" /><p>找到“SSDP发现服务”和“通用即插即用设备主机”服务，并将它们设置为自动启动。然后手动启动服务。</p><img class="content_img" src="/image/67/6744b10b7bbc06fca1669d920539bc62.png" /><p>现在浏览到C：\WINDOWS\TEMP。右键单击文件夹，然后选择属性。</p><img class="content_img" src="/image/89/89aac1a99bcad79eae29eeb46d63b92e.png" /><p>在“安全”选项卡上，单击“添加”，然后键入“网络服务”并单击“检查名称”。一旦验证了名称(它将带有下划线)，请单击OK。</p><img class="content_img" src="/image/aa/aa9af3ce1da951f96e54d9920df6368e.png" /><p>对c：\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NETFiles目录也重复上述两个步骤。</p><p>现在，我们需要配置Windows防火墙以允许正确的程序通过。您可以直接禁用防火墙，但是禁用它会影响性能。以下是允许通过防火墙进行访问所需的端口和程序。</p><img class="content_img" src="/image/40/40cae714ee766f9329b2823eab356d8f.png" /><p>要添加程序例外，请单击Exceptions(例外)选项卡，然后单击Add Program(添加程序)。浏览到位于c：\windows\system32文件夹中的dns.exe，然后单击更改范围。</p><img class="content_img" src="/image/6f/6f4d93e45bd69be08cc0604a9981b637.png" /><p>将作用域更改为仅在您的本地子网上，因为您不希望网络之外的任何人使用您的DNS进行查找。</p><img class="content_img" src="/image/5f/5fa3debf9845e1b7cdc668aad71bac90.png" /><p>接下来，对位于以下位置的DHCP服务器执行相同的操作：C：\WINDOWS\system32\tcpsvcs.exe，但不要限制范围。取而代之的是，允许任何计算机连接到DHCP，否则在我们打开它之后，这些计算机将永远不会获得IP地址。</p><p>我们不会在本文中设置DHCP，但是将来可能会重新讨论这一点。如果您想知道如何设置DHCP，请查看本文末尾的We get served链接。</p><p>返回到主例外选项卡，然后单击添加端口。键入LDAP作为名称，键入389作为端口号。将作用域更改为“仅我的网络(子网)”，然后单击“确定”。</p><img class="content_img" src="/image/8e/8e0268334a2778d58b09cd7e66c0785a.png" /><p>对以下其他端口重复这些步骤。</p><p>LDAP-389-UDP</p><p>LDAP-636-TCP</p><p>LDAP-3268-TCP</p><p>Kerboros-88-TCP和UDP</p><p>现在，您已经设置好了Active Directory，并具备了将计算机加入新域并开始从中心位置管理用户、计算机、打印机等所需的必要端口。</p><p>我们收到了维基服务</p><div class="item_info"><span class="item_key"><a href="/tag/需要/">需要</a></span><span class="item_key"><a href="/tag/windows/">windows</a></span><span class="item_key"><a href="/tag/设置/">设置</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/13376.html">如何打造属于自己的未来主义智能镜</a><li><a href="/story/12629.html">如何将Raspberg PI转变为Plex服务器</a><li><a href="/story/12161.html">如何在iPhone XS、MAX和XR上设置双SIM卡</a><li><a href="/story/11993.html">天才歌词现在出现在Apple Music中(反之亦然！)</a><li><a href="/story/11989.html">堡垒之夜安卓版已经过了测试版，所有兼容的手机都可以使用</a><li><a href="/story/11545.html">如何在Windows10的VirtualBox中安装MacOS High Sierra</a><li><a href="/story/10987.html">如何安装和设置库纳家庭安全摄像头</a><li><a href="/story/10761.html">如何在iOS Mail中撰写新邮件时查看其他邮件</a><li><a href="/story/10640.html">每个DIYER都应该拥有的基本工具</a><li><a href="/story/10536.html">如何在Chrome OS上使用键盘快捷键切换触摸屏和触摸板</a><li><a href="/story/10433.html">如何在较旧的2007-2009 iMac中安装固态硬盘</a><li><a href="/story/8789.html">如何在VirtualBox中安装SteamOS</a><li><a href="/story/7941.html">如何在Surface Pro平板电脑上重新加载Windows 8.1</a><li><a href="/story/7008.html">先进的采矿与魔术</a><li><a href="/story/5481.html">如何在Outlook 2013中禁用桌面通知</a><li><a href="/story/5452.html">如何通过两步验证保护您的Apple ID</a><li><a href="/story/5441.html">如何将Linux服务器时间与网络时间服务器(NTP)同步</a><li><a href="/story/4801.html">如何在一张安装盘上获取所有Windows 8版本</a><li><a href="/story/4698.html">如何启用Firefox的内置PDF阅读器</a><li><a href="/story/4666.html">如何将端口转发到虚拟机并将其用作服务器</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>