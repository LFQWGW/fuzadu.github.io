<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何将静态TCP/IP路由添加到Windows路由表</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何将静态TCP/IP路由添加到Windows路由表</h2></div><div class="content"><img class="content_img" src="/image/72/720a27410e2173ae849d9165ea647528.png" /><p>在某些特定类型的环境中，您可能会发现在Windows中将静态路由添加到路由表非常有用。下面是如何做这件事的方法。</p><p>相关：如何使用traceroute识别网络问题</p><p>路由表指示所有数据包离开系统时的去向-该系统是物理路由器还是PC。大多数路由器(包括Windows PC中内置的路由器)都使用某种形式的动态路由，路由器可以根据从其他路由器获得的信息选择转发数据包的最佳位置。如果您使用traceroute命令监视数据包到达其最终目的地时建立的连接，则可以看到它正在工作。</p><p>如果您希望始终将某些流量转发到特定路由器或网关，大多数路由器还允许您添加静态路由(不会动态更新的路由)。为什么？嗯，大多数人在家里或小型企业中使用Windows可能不会-但在某些情况下这可能会很有用，例如：</p><p>
您有两个Internet连接-可能一个用于常规使用，另一个用于连接到工作网络-并且您希望到达特定IP地址范围的所有流量都通过其中一个连接传出。
您在网络上设置了多个子网，需要将流量定向到特定子网。静态路由在测试这些类型的环境时特别有用。
您实际上正在使用Windows PC作为网络的路由器，并且希望对其进行更精细的控制。</p><p>如果其中任何一条适用于您，请继续阅读。您需要进入命令提示符将静态路由添加到Windows路由表，但这很简单，我们将引导您完成这些步骤。</p><p>查看Windows路由表</p><p>在开始添加路由之前，先查看路由表可能会有所帮助。通过点击Windows+X，然后在高级用户菜单上选择“命令提示符(管理员)”来启动命令提示符。</p><img class="content_img" src="/image/65/65e09e345bbcdb865cd36b9e09edf943.png" /><p>注意：如果您在高级用户菜单上看到的是PowerShell而不是命令提示符，这是在Windows 10的创建者更新中产生的一个开关。如果您愿意，可以很容易地切换回在高级用户菜单上显示命令提示符，或者您也可以尝试一下PowerShell。您可以在PowerShell中执行命令提示符中可以执行的几乎所有操作，另外还有许多其他有用的功能。</p><p>相关：如何将命令提示符放回Windows+X Power Users菜单</p><p>在命令提示符下，键入以下命令并按Enter键：</p><code>route print</code><img class="content_img" src="/image/f2/f24ba8699e08371dc1305b9fc54142f0.png" /><p>您将看到一个很长的网络目的地列表，以及数据包在前往该目的地时转发到的网关。除非您已经将静态路由添加到表中，否则您在此处看到的所有内容都将动态生成。</p><p>将静态路由添加到Windows路由表</p><p>要将静态路由添加到表中，您需要使用以下语法键入命令：</p><code>route ADD destination_network MASK subnet_mask  gateway_ip metric_cost</code><p>SUBNET_MASK和METRIBE_COST组件对于该命令是可选的。如果不指定子网掩码，将自动使用255.255.255.0。如果不指定度量成本，则将使用大于0.0.0.0目标条目的成本。度量成本值只是相对于表中其他成本的成本，在Windows决定可以到达同一目的地的多个路由时使用。</p><p>因此，例如，如果您想要添加一条路由，指定发往192.168.35.0子网的所有流量都到达位于192.168.0.2的网关，并且您只想使用自动度量开销，则可以使用以下命令：</p><code>route ADD 192.168.35.0 MASK 255.255.255.0 192.168.0.2</code><img class="content_img" src="/image/60/60024ee6104144a692804b57f2fa85a4.png" /><p>如果您现在使用route print命令查看该表，您将看到新的静态路由。</p><img class="content_img" src="/image/66/6662b9645b5e235b9111233c9b5dd8a3.png" /><p>这一切都很容易，但还有一个额外的小问题。添加静态路由时，默认情况下它只持续到您下次启动Windows。这样做的原因是许多公司使用一个经过协调的静态路由列表，该列表相当频繁地更新。他们不是在每台机器上添加和更新所有这些路由，而是分发一个批处理脚本文件，该文件在Windows启动期间添加最新的路由。这样可以保持路由表相对整洁。</p><p>相关：如何在Windows上编写批处理脚本</p><p>您当然可以自己使用批处理脚本方法。编写批处理脚本并不难。但是，如果您只是添加一两个不会经常更改的静态路由，则只需在命令中添加-p选项即可使路由持久化。即使在Windows启动时，持久路由也会保持不变。使用我们之前使用的相同命令，您可以通过以下修改使该路由持久：</p><code>route -p ADD 192.168.35.0 MASK 255.255.255.0 192.168.0.2</code><img class="content_img" src="/image/e6/e69ced98e23011ba9157501adb0416d2.png" /><p>从Windows路由表中删除静态路由</p><p>当然，总有一天您可能想要从表中删除静态路由。您只需使用以下语法键入命令：</p><code>route delete destination_network</code><p>因此，要删除我们先前使用目的网络192.168.35.0创建的路由，我们只需键入以下命令并按Enter键：</p><code>route delete 192.168.35.0</code><img class="content_img" src="/image/0b/0b08416a1eb565f6881bc82b63d2146f.png" /><p>是的，在管理大多数家庭和小型企业网络时，使用静态路由有点晦涩难懂。但是如果你真的需要这样做，这是一个相当容易的过程。如果你现在不需要这样做，至少你知道这是未来的一个选择。</p><div class="item_info"><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/windows/">windows</a></span><span class="item_key"><a href="/tag/路由/">路由</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14706.html">如何在Linux上使用uniq命令</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14585.html">如何在Microsoft Excel中兑换货币</a><li><a href="/story/14577.html">如何检查Linux上安装了哪个GPU</a><li><a href="/story/14572.html">如何使用Jouralctl读取Linux系统日志</a><li><a href="/story/14570.html">如何在Linux上使用grep命令</a><li><a href="/story/14555.html">2020年CES最佳：我们今年看到的所有最好的东西</a><li><a href="/story/14550.html">如何在Linux上使用Tail命令</a><li><a href="/story/14542.html">如何从MacOS Catalina向iPhone添加自定义铃声</a><li><a href="/story/14508.html">如何使用键盘快捷键简化流媒体Netflix</a><li><a href="/story/14507.html">如何在Linux上使用HISTORY命令</a><li><a href="/story/14499.html">如何在Linux上使用免费命令</a><li><a href="/story/14467.html">如何在Windows 10上切换到本地用户帐户</a><li><a href="/story/14466.html">如何在Linux上使用at和Batch来调度命令</a><li><a href="/story/14461.html">如何设置您的新Mac</a><li><a href="/story/14450.html">如何在Excel中将一长列变为多列</a><li><a href="/story/14438.html">如何在iPhone上创建和使用Memoji和Animoji</a><li><a href="/story/14434.html">Chrome 79的新特性，现已推出</a><li><a href="/story/14426.html">如何使用Google Sheets中的查询功能</a><li><a href="/story/14424.html">如何向Outlook会议请求添加默认签名</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>