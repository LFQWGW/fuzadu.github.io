<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在Visual Studio中自动创建生成备份</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在Visual Studio中自动创建生成备份</h2></div><div class="content"><img class="content_img" src="/image/ac/ac0f7ff912b059ca9e214c0a5934230b.png" /><p>如果您是一个人的开发团队，您可能并不真正需要一个成熟的版本控制系统，但是为每个发布的版本创建源代码备份无疑是很重要的。</p><p>通过利用生成后事件和简单的批处理脚本的强大功能，您可以轻松地添加让Visual Studio自动为每个发布代码生成创建源代码备份的功能。</p><p>它是如何工作的</p><p>我们的解决方案很简单：每当成功的构建事件发生时，我们都会有一个批处理脚本运行，它会创建相应Visual Studio项目文件夹中所有文件的压缩存档(可选地添加标签和时间戳)。</p><p>就是这样。你所要做的就是遵循下面的步骤。</p><p>设置自动生成备份</p><p>首先，您需要从本文底部的链接下载并解压缩批处理脚本文件。此外，您还需要7-Zip命令行工具(此工具包含在“完整”版本的Project Build备份脚本中，也可以单独下载)。在我们的示例中，我们将这些文件解压缩到目录“C：\tools”，但是任何位置都可以。</p><p>双击相应项目下的“我的项目”，打开Visual Studio项目属性。</p><img class="content_img" src="/image/76/762f8e7ff950c4e291245e7736c44b03.png" /><p>在项目属性中，转到编译部分。</p><img class="content_img" src="/image/20/20b1fa9c3843a3c767a9e303d00733b4.png" /><p>在右下角，单击Build Events按钮。</p><img class="content_img" src="/image/ce/ce27486d95775d5810b1036e7ec9a590.png" /><p>在我们的示例中，我们希望在成功编译操作之后进行备份。确保您可以选择“在成功生成时”运行生成后事件，然后单击Edit Post-Build按钮。</p><img class="content_img" src="/image/48/48192b8048924ade028b2d94fcbfd469.png" /><p>下面的命令只为发布配置的编译创建构建备份(这是条件检查的结果)，因为实际上，我们可能不想备份每个调试/测试构建。此外，将附加当前时间戳(/D开关)，备份文件的格式为7z文件格式(/7z)，而不是zip。通过添加/T“$(ConfigurationName)”作为参数，我们将构建类型(在本例中为Release)附加到备份文件的名称中。</p><p>使用“宏”按钮，您可以让Visual Studio预填入特定于项目的信息，因此不需要硬编码。您可以根据需要调整此命令(特别是批处理文件的位置)，但前三个参数可能不需要更改。</p><p>重要的是要记住，无论选择什么项目配置，事后操作都会运行。这就是我们需要添加if“$(ConfigurationName)”==“Release”语句的原因-否则备份操作将在每个成功的构建事件中发生。</p><img class="content_img" src="/image/98/9817b4216de930360b9f4044edcab315.png" /><p>完成命令并应用后，命令字符串应出现在“生成后事件”部分中。</p><p>请注意，虽然“call”命令在技术上不是必需的，但强烈建议您使用此命令，因为如果省略了此命令，则在此之后添加的任何事件都可能不会执行。</p><img class="content_img" src="/image/0a/0a52758d1f9244671ada949421411ca4.png" /><p>现在，每当您在Release配置中对项目运行编译/构建时，您都会看到构建备份操作的输出。</p><img class="content_img" src="/image/b5/b5661802d778646a311c5b41e7775974.png" /><p>[…]</p><img class="content_img" src="/image/65/6534ac4c2415532077e389885e43d12d.png" /><p>每个成功的发布构建都会在子目录“builds”(如果需要，可以使用/O开关进行自定义)中的解决方案文件夹中创建一个新的带有时间戳的存档。</p><img class="content_img" src="/image/70/70306e42ef78768928f75705e4aa43a6.png" /><p>每个备份的内容都是完整的Visual Studio项目-源文件、配置设置、编译的二进制文件和全部-这使其成为真正的时间点备份。</p><img class="content_img" src="/image/bf/bf78803dcb80bd2fa550e50387758ca9.png" /><p>不是完整版本控制系统的替代品</p><p>最后，我们只想重申，此工具并不打算取代成熟的版本控制系统。对于开发人员来说，它只是一个有用的工具，可以在每次编译后创建其项目源代码的快照。</p><p>如果您必须返回并检查以前的版本，拥有一个可随时使用(只需解压缩到新目录)的项目文件进行时间点编译可能真的会派上用场。</p><p>高尔夫球场 / 链接 / 沙地 / 沙丘</p><p>下载项目生成备份脚本</p><p>下载7-Zip命令行工具(注意-7za实用程序还捆绑了从项目构建备份脚本下载)</p><div class="item_info"><span class="item_key"><a href="/tag/项目/">项目</a></span><span class="item_key"><a href="/tag/备份/">备份</a></span><span class="item_key"><a href="/tag/命令/">命令</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14553.html">如何在Google Docs中创建多级列表</a><li><a href="/story/13721.html">如何使用调酒师控制Mac的菜单栏</a><li><a href="/story/12434.html">如何将iMovie项目从iPhone或iPad移动到Mac</a><li><a href="/story/11458.html">开放源码软件的不利之处</a><li><a href="/story/10298.html">如何使用Safari的“阅读列表”保存文章以备日后阅读</a><li><a href="/story/9412.html">如何在Windows 10中关闭最近使用的项目和常去的地方</a><li><a href="/story/9212.html">如何在Word中将图片用作项目符号列表中的项目符号</a><li><a href="/story/9191.html">如何在Word中自定义项目符号列表中的项目符号</a><li><a href="/story/9123.html">如何更改OS X中的最新项目数</a><li><a href="/story/9012.html">如何更好地管理和改进亚马逊推荐</a><li><a href="/story/8303.html">如何使用照片创建快速幻灯片和项目</a><li><a href="/story/6512.html">GitHub是什么，它是用来做什么的？</a><li><a href="/story/4295.html">DIY无线感应充电器</a><li><a href="/story/3998.html">在Linux Mint 12中添加和编辑主菜单项</a><li><a href="/story/3851.html">使用内置光学从属设备构建您自己的相机闪光灯</a><li><a href="/story/3671.html">造一个“真理计”；一个简单的DIY测谎仪[电子学]</a><li><a href="/story/3129.html">初学者使用Subversion(SVN)进行版本跟踪</a><li><a href="/story/2450.html">Microsoft Project 2010入门</a><li><a href="/story/2053.html">在Windows中将多个项目存储到剪贴板</a><li><a href="/story/1292.html">修复固定的跳转列表项目在Windows 7中停滞的问题</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>