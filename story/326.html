<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在Ubuntu上使用mysqlsniffer跟踪MySQL查询</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>在Ubuntu上使用mysqlsniffer跟踪MySQL查询</h2></div><div class="content"><p>您有一个生产数据库服务器，并且不能启用查询日志记录…。那么，您如何看待针对数据库执行的查询呢？</p><p>答案是：使用修改后的网络嗅探器解析出MySQL数据包并对其进行解码。您还需要做一些编译工作，但这是值得的。请注意，这通常不适用于本地连接，尽管欢迎您尝试。</p><p>首先，您需要安装libpcap-dev，这是允许应用程序嗅探网络数据包的开发库。</p><p>现在让我们创建一个目录，下载源代码并编译它</p><p>此时，我们的源目录中有一个名为mysqlsniffer的闪亮的新可执行文件。您可以将其复制到您喜欢的任何位置(路径中的某个位置会很有用)</p><p>要运行mysqlsniffer，您需要指定MySQL正在侦听的网络接口。对我来说，这就是民族0。</p><p>满载的东西开始从…飞过。让我们更多地过滤掉它，这样我们就可以只获得查询，而不是所有多余的数据。</p><p>啊，现在我们到…了。各种查询信息，无需重启MySQL。</p><p>以下是该命令的完整选项：</p><p>用法：mysqlsniffer[选项]接口</p><p>选项：-port N在端口号N上侦听MySQL(默认值为3306)-详细显示额外的数据包信息-tcp-ctrl显示TCP控制数据包(SYN、FIN、RST、ACK)-net-hdr显示主要的IP和TCP标头值-no-mysql-hdr不显示MySQL标头(包ID和长度)-state显示状态-V40 MySQL服务器版本4.0-转储十六进制的所有包-帮助打印此信息</p><p>原始源代码和更多信息请访问：http://hackmysql.com/mysqlsniffer</p><p>如果您在开发服务器上运行，则只打开查询日志记录会更容易。</p><div class="item_info"><span class="item_key"><a href="/tag/mysql/">mysql</a></span><span class="item_key"><a href="/tag/数据包/">数据包</a></span><span class="item_key"><a href="/tag/查询/">查询</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/388.html">通过SSH远程访问您的MySQL服务器</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>