<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>像取证专家一样使用Ubuntu Live CD恢复数据</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>像取证专家一样使用Ubuntu Live CD恢复数据</h2></div><div class="content"><p>有很多实用程序可以恢复删除的文件，但如果您无法启动计算机，或者整个驱动器已格式化，该怎么办？我们将向您展示一些工具，它们将深入挖掘并恢复最难以捉摸的已删除文件，甚至整个硬盘分区。</p><p>我们已经向您展示了恢复意外删除的文件的简单方法，甚至是可以从Ubuntu Live CD恢复的简单方法，但对于已严重损坏的硬盘，这些方法并不能解决问题。在本文中，我们将研究四种工具，它们可以从最混乱的硬盘驱动器中恢复数据，无论它们是针对Windows、Linux还是Mac计算机进行格式化的，或者即使分区表已被完全清除。</p><p>注意：这些工具无法恢复硬盘上已被覆盖的数据。已删除的文件是否已被覆盖取决于许多因素-您越快意识到要恢复文件，就越有可能做到这一点。</p><p>我们的设置</p><p>为了展示这些工具，我们设置了一个1 GB的小硬盘，其中一半空间分区为ext2(Linux中使用的文件系统)，另一半空间分区为FAT32(旧Windows系统中使用的文件系统)。我们在每个硬盘上随机存储了10张照片。</p><img class="content_img" src="/image/ae/ae3e7957f20a314a4652f126f4ebc301.png" /><p>然后，我们通过删除GParted中的分区从硬盘中擦除分区表。</p><img class="content_img" src="/image/53/53fc511e34f470d36c48321ed88cff63.png" /><p>我们的数据会永远丢失吗？</p><p>安装工具</p><p>我们将要使用的所有工具都在Ubuntu的语义库中。</p><p>要启用存储库，请单击左上角的System，然后单击Administration&gt;Synaptic package Manager打开Synaptic package Manager。</p><p>点击Settings&gt;Repositories并在标记为“Community-mained Open Source Software(WORMISH)”的框中添加复选标记。</p><img class="content_img" src="/image/49/4983aa2f1ce3f8093355fff8e754e17a.png" /><p>单击关闭，然后在Synaptic Package Manager主窗口中，单击重新加载按钮。重新加载软件包列表并重新构建搜索索引后，搜索以下一个或所有软件包并将其标记为要安装：testdisk、first和scalpel。</p><p>TestDisk包括TestDisk和Photorec，TestDisk可以恢复丢失的分区和修复引导扇区，Photorec可以从大量不同的文件系统中恢复许多不同类型的文件。</p><img class="content_img" src="/image/b2/b2e2a7fb5019b6f2a61b72b8758935ee.jpg" /><p>最重要的是，最初由美国空军特别调查办公室(US Air Force Office Of Special Investigations)开发，根据文件头和其他内部结构恢复文件。最重要的是对各种工具生成的硬盘驱动器或驱动器映像文件进行操作。</p><img class="content_img" src="/image/ea/ea90003fd57311611530186002a58c48.png" /><p>最后，calpel执行与first相同的功能，但侧重于增强性能和降低内存使用量。如果您有一台内存较少的旧机器，SCALPEL可能运行得更好。</p><img class="content_img" src="/image/ac/acebf71b963a86da5212a385f88154ac.png" /><p>恢复硬盘分区</p><p>如果您无法挂载硬盘，则其分区表可能已损坏。在开始尝试恢复重要文件之前，可以恢复驱动器上的一个或多个分区，只需一步即可恢复所有文件。</p><p>Testdisk是这项工作的工具。打开终端(应用程序&gt;附件&gt;终端)并键入：</p><img class="content_img" src="/image/3a/3a61866a5d9be1bdfa1c879f389d455f.png" /><p>如果您愿意，您可以创建一个日志文件，但它不会影响您恢复的数据量。做出选择后，您将看到计算机上的存储介质列表。您应该能够根据硬盘的大小和标签来识别要从中恢复分区的硬盘。</p><img class="content_img" src="/image/e4/e43176ca98a515374d5e5a62351fdd4a.png" /><p>TestDisk要求您选择要搜索的分区表类型。大多数情况下(ext2/3、NTFS、FAT32等)。您应该选择英特尔，然后按Enter键。</p><img class="content_img" src="/image/86/86fb5293092c431489c7e8f1d5945048.png" /><p>突出显示分析，然后按Enter键。</p><img class="content_img" src="/image/98/987bca5d34a94e308bdd4e58887a69ce.png" /><p>在我们的示例中，我们的小型硬盘驱动器之前已格式化为NTFS。令人惊讶的是，TestDisk找到了这个分区，尽管它无法恢复它。</p><img class="content_img" src="/image/c8/c805faa06b627ee6e4d6138917175d39.png" /><p>它还会找到我们刚刚删除的两个分区。我们可以更改它们的属性，或添加更多分区，但我们只需按Enter键即可恢复它们。</p><img class="content_img" src="/image/3d/3d4668a8d486c5cf27038a4bc95bf9ef.png" /><p>如果TestDisk没有找到您的所有分区，您可以尝试通过使用向左和向右箭头键选择该选项来进行更深层次的搜索。我们只有这两个分区，所以我们将通过选择Write并按Enter键来恢复它们。</p><img class="content_img" src="/image/40/408deffe9388952546ea3b7012790677.png" /><p>Testdisk通知我们必须重新启动。</p><img class="content_img" src="/image/07/0746bfe6430a56da254a5d8b2ff491a6.png" /><p>注意：如果您的Ubuntu Live CD没有持久化，那么当您重新启动时，您将不得不重新安装您先前安装的所有工具。</p><p>重新启动后，我们的两个分区都恢复到原来的状态，包括图片和所有内容。</p><img class="content_img" src="/image/61/6175392abc30a1ebf3eb1adbf91d0417.png" /><p>恢复某些类型的文件</p><p>对于下面的示例，我们从两个分区中删除了10张图片，然后对它们进行了重新格式化。</p><p>照片记录</p><p>在我们将要展示的三个工具中，Photorec是用户最友好的，尽管它是一个基于控制台的实用程序。要开始恢复文件，请打开终端(应用程序&gt;附件&gt;终端)，然后键入：</p><p>首先，系统会要求您选择要搜索的存储设备。您应该能够根据设备的大小和标签来识别正确的设备。选择正确的设备，然后按Enter键。</p><img class="content_img" src="/image/1b/1b8c1d0525735e776b5f9f5255e7865d.png" /><p>Photorec要求您选择要搜索的分区类型。大多数情况下(ext2/3、NTFS、FAT等)。您应该选择英特尔，然后按Enter键。</p><img class="content_img" src="/image/05/05e5cf72b9cb90075a70603ff7d71f63.png" /><p>您将看到所选硬盘上的分区列表。如果要恢复某个分区上的所有文件，请选择搜索并按Enter键。</p><p>但是，此过程可能非常慢，在我们的示例中，我们只想搜索图片文件，因此我们使用向右箭头键选择File opt并按Enter键。</p><img class="content_img" src="/image/64/6474a899350dfc77b13c0864cbe2ec69.png" /><p>Photorec可以恢复许多不同类型的文件，取消选择每个文件都需要很长时间。相反，我们按“s”清除所有选择，然后找到合适的文件类型-jpg、gif和png-并通过按向右箭头键选择它们。</p><img class="content_img" src="/image/1f/1f03be2e4fd95703d4e66a3ce04d2360.png" /><p>一旦我们选择了这三个选项，我们就按“b”保存这些选择。</p><img class="content_img" src="/image/9e/9e82c1fec023352162de2a260065b073.png" /><p>按Enter键返回硬盘分区列表。我们希望搜索两个分区，因此突出显示“No Partition”和“Search”，然后按Enter键。</p><img class="content_img" src="/image/b6/b601c450c96dcb985bc535fdf3bc5a98.png" /><p>Photorec会提示指定存储恢复的文件的位置。如果您有不同的健康硬盘，我们建议您将恢复的文件存储在那里。由于我们恢复得不是很好，我们将把它存储在Ubuntu Live CD的桌面上。</p><p>注：请勿将文件恢复到要从中恢复的硬盘。</p><img class="content_img" src="/image/0f/0f19a2e88c71aaee02c266d39a740d83.png" /><p>Photorec能够从我们硬盘上的分区中恢复20张照片！</p><img class="content_img" src="/image/d5/d53d7181bc0ad3a50c8ed0ab8ff09c87.png" /><p>快速查看它创建的recup_dir.1目录可以确认Photorec已经恢复了除文件名以外的所有图片。</p><img class="content_img" src="/image/16/16ee0fa2c4c22da2c1d7889593edb931.png" /><p>最杰出的 / 首要的 / 最重要的 / 最先的</p><p>最重要的是一个命令行程序，没有像Photorec这样的交互界面，但提供了许多命令行选项来从HAD驱动器中获取尽可能多的数据。</p><p>要查看可通过命令行调整的完整选项列表，请打开一个终端(应用程序&gt;附件&gt;终端)，然后键入：</p><p>在我们的示例中，我们将使用的命令行选项为：</p><p>
-t，要搜索的文件类型的逗号分隔列表。在我们的例子中，这是“jpeg，png，gif”。
-v，启用详细模式，为我们提供有关最重要的操作的更多信息。
-o，用于存储恢复的文件的输出文件夹。在我们的示例中，我们在桌面上创建了一个名为“最重要”的目录。
-i，将搜索文件的输入。这可以是几种不同格式的磁盘映像；但是，我们将使用硬盘/dev/sda。</p><p>我们最重要的调用是：</p><p>根据您要搜索的内容和搜索位置的不同，您的调用会有所不同。</p><img class="content_img" src="/image/cf/cf582716ab79e124f4620c17e4f5fecf.png" /><p>最重要的是能够恢复硬盘上存储的20个文件中的17个。</p><img class="content_img" src="/image/ed/ed4d068aaa517f16357e9d9f3f9ce1de.png" /><p>查看这些文件，我们可以确认这些文件恢复得相对较好，不过我们可以在00622449.jpg的缩略图中看到一些错误。</p><img class="content_img" src="/image/8b/8b9ba6fe6373be0661139b0ee9d9bf17.png" /><p>这在一定程度上可能是由于ext2文件系统造成的。最重要的建议对ext2这样的Linux文件系统使用-d命令行选项。</p><p>我们将再次在最前面运行，将-d命令行选项添加到最前面的调用中：</p><img class="content_img" src="/image/1f/1f1bafc25412bfa765c4f9dea4ca59b2.png" /><p>这一次，最重要的是能够恢复所有20幅图像！</p><img class="content_img" src="/image/a1/a1b9044fc1acb2b469737e4b3e2bf8a0.png" /><p>最后看一看照片，会发现照片已经恢复，没有任何问题。</p><img class="content_img" src="/image/42/427af475bb2ae79368d545bd428188b1.png" /><p>手术刀 / 解剖刀</p><p>SCALPEL是另一个功能强大的程序，就像最重要的程序一样，它是高度可配置的。与最重要的不同，calpel要求您在尝试任何数据恢复之前编辑配置文件。</p><p>任何文本编辑器都可以，但我们将使用Gedit来更改配置文件。在终端窗口(应用程序&gt;附件&gt;终端)中，键入：</p><img class="content_img" src="/image/7e/7e7aa0925e04fbe5622356413e0bb2cc.png" /><p>scalpel.conf包含有关许多不同文件类型的信息。滚动浏览此文件并取消以要恢复的文件类型开头的行的注释(即删除这些行开头的“#”字符)。</p><img class="content_img" src="/image/95/9522718701de22ec5a53cd654c3d93a2.png" /><p>保存文件并将其关闭。返回终端窗口。</p><p>SCALPEL还有大量的命令行选项，可以帮助您快速有效地进行搜索；不过，我们只定义输入设备(/dev/sda)和输出文件夹(我们在桌面上创建的名为“scalpel”的文件夹)。</p><p>我们的请求是：</p><img class="content_img" src="/image/11/11c964eeda5573581596f2f561bdb189.png" /><p>手术刀可以恢复我们20个文件中的18个。</p><img class="content_img" src="/image/64/64c145c02eba4a3541fe014b4b905908.png" /><p>快速查看SCALPEL恢复的文件会发现，我们的大多数文件都恢复成功，但也有一些问题(例如00000012.jpg)。</p><img class="content_img" src="/image/d7/d785d18e9054046fadc04e78ebf62d24.jpg" /><p>结束 / 结尾 / 结论 / 推论</p><p>在我们的快速玩具示例中，TestDisk能够恢复两个已删除的分区，Photorec和最重要的是能够恢复所有20个已删除的图像。SCALPEL恢复了大部分文件，但是使用SCALPEL的命令行选项很有可能使我们能够恢复所有20个图像。</p><p>当您的硬盘出现问题时，这些工具是救命稻草。如果您的数据在硬盘上的某个位置，那么这些工具中的一个会追踪到它！</p><div class="item_info"><span class="item_key"><a href="/tag/恢复/">恢复</a></span><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/分区/">分区</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14221.html">Windows10的“重置这台电脑”是如何变得更加强大的</a><li><a href="/story/14129.html">微软解释“云下载”如何重装Windows 10</a><li><a href="/story/12920.html">如何恢复删除的Windows 10便签</a><li><a href="/story/12340.html">如何从Outlook恢复已删除的邮件</a><li><a href="/story/11946.html">微软取消了Windows 10 2018年10月10日的文件删除更新</a><li><a href="/story/11725.html">如何从iPhone或iPad恢复已删除的iMessage</a><li><a href="/story/9910.html">如何进入Android的Bootloader和恢复环境</a><li><a href="/story/9512.html">如何在Windows 7、8和10上恢复系统映像备份</a><li><a href="/story/9204.html">如何从损坏的SD卡中恢复图像</a><li><a href="/story/9044.html">如何在iPhone或iPad上降级到较旧版本的iOS</a><li><a href="/story/8924.html">如何从iCloud恢复已删除的文件、联系人、日历和照片</a><li><a href="/story/8728.html">如何使用自动恢复功能自动保存Word文档并恢复丢失的更改</a><li><a href="/story/7217.html">做好准备：为Windows、Linux、Mac或Chrome OS创建恢复驱动器</a><li><a href="/story/7141.html">什么是Android上的自定义恢复，我为什么要一个？</a><li><a href="/story/7017.html">如何出厂重置Chromebook(即使它无法引导)</a><li><a href="/story/6126.html">为什么还在使用冬眠？</a><li><a href="/story/5952.html">如何恢复已删除的文件：旗舰指南</a><li><a href="/story/5876.html">您需要了解的有关为Windows 8创建自定义恢复映像的所有信息</a><li><a href="/story/5582.html">如何使用Xen-Phoenix免费恢复Citrix-Xen虚拟机(Bash)</a><li><a href="/story/5341.html">删除PC的恢复分区并控制硬盘</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>