<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在Sendmail中设置Milter-Greylist垃圾邮件拦截</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在Sendmail中设置Milter-Greylist垃圾邮件拦截</h2></div><div class="content"><p>实际上，所有Linux发行版都将Sendmail作为默认MTA。这是可以的-它已经存在很长时间了，很稳定，而且工作得很好(尽管后缀爱好者可能不同意！)。但它没有内置垃圾邮件控制功能，这很好；它不是为此而设计的。因此，您已经安装了垃圾邮件刺客，并且运行良好，但是您仍然可以通过它收到未标记的垃圾邮件。也许你需要尝试一下灰名单。</p><p>灰名单是指所有电子邮件(除非特别列入白名单)最初都会被拒绝，但仍在各种RFC的参数范围内工作，以确保最终收到电子邮件的过程。这个想法是，垃圾邮件发送者不会尝试重新连接到拒绝了他们的服务的电子邮件服务器，但合法的邮件服务器会这样做。这并不是万无一失的-垃圾邮件发送者很快就会调整，灰色名单已经存在很长时间了。但这确实有帮助。</p><p>本文是关于如何安装Milter-Greylist的，它最初是由Emmanuel Dreyfus编写的。我将在这里集中讨论Sendmail，但是Postfix也支持Milter-Greylist。</p><p>首先，检查您的依赖项。自述文件中的内容如下：</p><p>但是配置过程会发现您没有安装的任何东西，并在解决依赖关系之前发出警告。</p><p>接下来，从http://hcpnet.free.fr/milter-greylist下载Greylist-Milter并解压缩tarball。然后阅读自述文件！它包含本文没有介绍的大量信息，特别是对于希望/需要包含特殊功能(如SPF支持)的安装。</p><p>然后像往常一样做</p><p>标准安装将把二进制文件放在/usr/local/bin中，数据库和PID文件放在/var/milter-greylist中，配置文件将是/etc/mail/greylist.conf。某些启动脚本包含在tarball中，但它们不会自动安装。如果想要使用它，您必须自己在/etc/init.d中设置它。</p><p>然后，您需要将Sendmail配置为实际使用Milter。在sendmail.mc文件中添加以下内容(但如果您已在安装中使用其他Milter，请密切注意自述文件中的警告！)</p><p>并重新配置sendmail.cf文件：</p><p>但是，现在不要重新启动您的Sendmail守护进程-我们还需要修改配置才能正常工作。</p><p>在您喜欢的编辑器(当然是vi，对吗？)中打开/etc/mail/greylist.conf。
取消注释或添加以下内容：</p><p>在上述配置中，“Quiet”将不包括重试提交的时间范围。这很好，所以垃圾邮件发送者没有办法知道他们将被阻止多长时间。灰色列表将持续7分钟，之后将接受来自源的电子邮件，数据库内容将每天一次转储到/var/milter-greylist/greylist.db，一旦接受来自源的电子邮件，该源将被列入白名单10天，然后再次列入灰名单。</p><p>还要创建列表，将您自己的网络列入配置文件的白名单：</p><p>这将把本地网络、DMZ网络和内部网络列入白名单(例如，您的网络可能不同)。请注意网络地址之间的空格，而不是逗号。
以及始终受信任的其他外部网络：</p><p>在配置文件中有一个相当全面的“损坏”邮件服务器列表，这些服务器也总是要被列入白名单，因为将它们灰名单很可能导致永远不会收到它们的电子邮件。如果需要，您也可以根据需要添加到该列表中。</p><p>您很可能会将灰色列表设置为默认设置，因此您可能还希望将从不希望电子邮件延迟的某些用户列入白名单(各种浮夸的副总裁、系统警报地址等)：</p><p>请注意列表名称“My network”、“Trusted”和“White Users”-您需要将这些名称添加到实际的白名单配置行中：</p><p>注意：您也可以将此设置为白名单作为默认设置，在这种情况下，您还可以创建一个“灰色用户”列表，其中包含您希望始终处于灰色名单中的人员。当然，这包括在社交网站、销售网站和时事通讯订阅中到处张贴工作电子邮件地址的误入歧途的用户。</p><p>然后配置Milter-Greylist的默认操作：</p><p>(如果希望将白名单设置为默认操作，请使用racl白名单默认值)。</p><p>然后使用/etc/init.d/milter-greylist启动脚本或通过以下方式启动Milter-Greylist二进制文件</p><p>在命令行。还有许多其他命令行选项(其中许多重复在conf文件中设置的参数)。看见</p><p>了解更多细节。</p><p>然后重新启动Sendmail守护程序，减少进入邮件服务器的垃圾邮件。</p><div class="item_info"><span class="item_key"><a href="/tag/白名单/">白名单</a></span><span class="item_key"><a href="/tag/列表/">列表</a></span><span class="item_key"><a href="/tag/垃圾邮件/">垃圾邮件</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/5246.html">如何在Windows RT上轻松将网站添加到Flash白名单</a><li><a href="/story/4877.html">在现代Internet Explorer10中如何在任意网站上使用Flash</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>