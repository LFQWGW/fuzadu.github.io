<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何配置GRUB2引导加载程序的设置</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何配置GRUB2引导加载程序的设置</h2></div><div class="content"><img class="content_img" src="/image/e9/e99bfb6329071190b233fa7246f8db4f.jpg" /><p>Ubuntu和大多数其他Linux发行版现在使用GRUB2引导加载程序。您可以更改其设置以选择默认操作系统、设置背景映像，以及选择在自动启动默认操作系统之前GRUB倒计时的时间长度。</p><p>我们在这里配置了Ubuntu14.04上的GRUB2，但是该过程应该与其他Linux发行版类似。过去，您可能通过编辑原始GRUB的menu.lst文件来定制其设置，但现在的过程有所不同。</p><p>GRUB2配置基础知识</p><p>相关：GRUB2 101：如何访问和使用您的Linux发行版的引导加载程序</p><p>GRUB2不使用menu.lst文件。相反，它的主配置文件是/boot/GRUB/grub.cfg文件。但是，您不应该手动编辑此文件！此文件仅供GRUB2自己使用。它是通过以root身份运行update-GRUB命令自动创建的-换句话说，是通过在Ubuntu上运行sudo update-GRUB来自动创建的。</p><p>您自己的GRUB设置存储在/etc/default/GRUB文件中。编辑此文件以更改GRUB2的设置。脚本也位于/etc/grub.d/目录中。例如，在Ubuntu上，这里有配置默认主题的脚本。还有一个os-prober脚本可以检查系统的内部硬盘驱动器中是否有其他已安装的操作系统-Windows、其他Linux发行版、MacOSX等等-并自动将它们添加到GRUB2的菜单中。</p><p>当您运行update-GRUB命令时，GRUB会自动组合/etc/default/GRUB文件中的设置、/etc/grub.d/目录中的脚本以及其他所有内容，从而创建一个在引导时读取的/boot/grub.cfg文件。</p><p>换句话说，要自定义GRUB2设置，您必须编辑/etc/default/GRUB文件，然后运行sudo update-GRUB命令。</p><img class="content_img" src="/image/ba/ba50563f8ad1cdcf4e4302cb69f583d2.png" /><p>编辑GRUB配置文件</p><p>相关：使用Vi编辑文本文件的初学者指南</p><p>在标准文本编辑器中打开/etc/default/GRUB文件进行编辑。如果要使用图形文本编辑器，请打开终端(或按Alt+F2)并运行以下命令：</p><p>对于易于使用的基于终端的编辑器Nano，请使用以下命令。当然，您可以使用任何您喜欢的文本编辑器-包括标准的vi文本编辑器。</p><img class="content_img" src="/image/91/9160c9724758a58b4282fcb86dae416e.png" /><p>etc/default/GRUB文件很短，应该很容易编辑。与任何其他配置文件一样，您需要将选项编辑为所需状态，然后更改文件。如果以下任一选项尚未出现在文件中，请将其添加到新行。如果是，请编辑现有行，而不是添加重复行。</p><p>选择默认操作系统：更改GRUB_DEFAULT=行。默认情况下，GRUB_DEFAULT=0使用第一个条目作为默认值-将数字更改为1以使用第二个条目，将数字更改为2以使用第三个条目，依此类推。您还可以使用GRUB_DEFAULT=SAVED，GRUB将在每次引导时自动引导您选择的最后一个操作系统。您还可以用引号指定标签。例如，如果操作系统列表中有一个名为Windows 7(加载器)的操作系统，则可以使用GRUB_DEFAULT=“Windows 7(加载器)”</p><p>保存默认操作系统：如果选择GRUB_DEFAULT=SAVED，还需要添加GRUB_SAVEDEFAULT=TRUE行-否则将无法工作。</p><img class="content_img" src="/image/a2/a2c035f8973de43b49c7b03f99608367.png" /><p>选择是否隐藏GRUB：在只安装了一个操作系统的情况下，Ubuntu默认GRUB使用GRUB_HIDDEN_TIMEOUT=0选项自动引导到默认操作系统。此选项指定GRUB将被隐藏，并且它将在0秒后自动引导到默认操作系统-换句话说，立即引导到默认操作系统。您仍然可以在计算机引导时按住Shift键访问菜单。要设置更高的超时，请使用GRUB_HIDDEN_TIMEOUT=5-GRUB将显示空屏幕或闪屏5秒，在此期间您可以按任意键查看菜单。要防止自动隐藏GRUB，请注释掉该行-只需在该行之前添加#，使其显示为#GRUB_HIDDEN_TIMEOUT=0。</p><p>控制GRUB的菜单超时：如果GRUB没有自动隐藏，您将在每次计算机引导时看到该菜单。GRUB将在一段时间(通常为10秒)后自动启动默认操作系统。在此期间，您可以选择其他操作系统或将其保留为自动引导。要更改超时时间段，请编辑GRUB_TIMEOUT=10行并输入任意秒数。(请记住，这仅在GRUB未隐藏时使用。)。要防止GRUB自动引导并始终等待您选择操作系统，请将该行更改为GRUB_TIMEOUT=-1</p><img class="content_img" src="/image/35/3587194287d53546ecc1fe95a83a9b29.png" /><p>选择背景图像：GRUB_BACKGROUND行控制是否使用背景图像-默认情况下，GRUB使用黑白单色外观。您可以添加像GRUB_BACKGROUND=”/home/user/Pictures/background.png”这样的行来指定GRUB将使用的图像文件。</p><p>图像文件必须符合各种规格。GRUB支持JPG/JPEG图像，但是这些图像被限制为256色-所以您可能不想使用JPG图像。相反，您可能希望使用可以具有任意数量颜色的PNG图像。您也可以使用TGA图像文件。</p><img class="content_img" src="/image/63/63cb35f6895b67d4893ad8a8a4b7bd5b.png" /><p>使您的更改生效</p><p>要使更改生效，只需保存文本文件-File&gt;Save in Gedit或Ctrl+O，然后按Enter将文件保存在Nano中-然后运行sudo update-GRUB命令。您所做的更改将成为grub.cfg文件的一部分，并将在您每次引导计算机时使用。</p><img class="content_img" src="/image/6b/6b20f9a2dcc7ef593deb4c9a3df3feed.png" /><p>这些并不是GRUB的所有设置，但它们是一些最常更改的设置。可以在/etc/default/GRUB文件中定制其他设置，也可以通过编辑/etc/grub.d目录中的脚本来自定义其他设置。</p><p>如果您不想手动编辑这些文件，您可以在Linux发行版的软件存储库中找到用于自定义GRUB2的图形工具。上面的方法即使在Linux发行版上也可以使用，因为在Linux发行版中，这样的工具不容易获得，或者如果您只有命令行访问权限并且想要手动完成这项工作。</p><div class="item_info"><span class="item_key"><a href="/tag/grub/">grub</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/文件/">文件</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/3854.html">如何对Ubuntu的Boot Loader进行密码保护</a><li><a href="/story/1976.html">清理新的Ubuntu Grub2引导菜单</a><li><a href="/story/433.html">让GRUB引导加载程序无限期等待操作系统选择</a><li><a href="/story/247.html">Windows清除Ubuntu GRUB引导加载程序后重新安装它</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>