<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在Linux上使用uniq命令</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在Linux上使用uniq命令</h2></div><div class="content"><p>Linux uniq命令在您的文本文件中快速查找唯一或重复的行。在本指南中，我们将介绍它的多功能性和特性，以及如何最大限度地利用这个漂亮的实用程序。</p><p>在Linux上查找匹配的文本行</p><p>uniq命令快速、灵活，并且非常擅长它所做的事情。然而，与许多Linux命令一样，它也有一些怪癖-只要您了解它们，这就很好。如果你在没有一点内幕知识的情况下冒险，你很可能会对结果感到挠头。我们会边走边指出这些怪癖。</p><p>uniq命令非常适合那些一心一意、只想做一件事、做好一件事的人。这就是为什么它也特别适合与管道一起工作，并在指挥管道中发挥其作用。它最频繁的合作者之一是Sort，因为Uniq必须对要处理的输入进行排序。</p><p>让我们点燃它吧！</p><p>相关：如何在Linux上使用管道</p><p>在不带选项的情况下运行uniq</p><p>我们有一个文本文件，其中包含罗伯特·约翰逊的歌曲“我相信我会把扫帚上的灰尘”的歌词。让我们看看Uniq是如何看待它的。</p><p>我们将键入以下内容以通过管道将输出转换为LESS：</p><p>uniq ust-my-broom.txt|更少</p><img class="content_img" src="/image/9b/9b3d251a0ce22b5c4c665d2f3e3c4984.png" /><p>我们用更少的篇幅得到整首歌，包括重复的台词：</p><img class="content_img" src="/image/e6/e6ab4f2fa0f67438ee55b158ca5af448.png" /><p>这似乎既不是独一无二的线，也不是重复的线。</p><p>对-因为这是第一个怪癖。如果不带选项运行uniq，它的行为就像使用了-u(唯一行)选项一样。这告诉Uniq只打印文件中的唯一行。您看到重复行的原因是，对于Uniq而言，要将某行视为重复行，它必须与其重复行相邻，而这正是SORT的用武之地。</p><p>当我们对文件进行排序时，它会对重复行进行分组，而uniq会将它们视为重复行。我们将对文件使用SORT，将排序后的输出通过管道传输到uniq，然后通过管道将最终输出传输到LESS。</p><p>为此，我们键入以下内容：</p><p>排序灰尘-my-broom.txt|uniq|更少</p><img class="content_img" src="/image/a6/a610ec5e43347c5c31c8dff62db9e908.png" /><p>排序后的行列表将显示在LESS中。</p><img class="content_img" src="/image/dc/dcb6d25fb0686750c45ec3f68780a9ef.png" /><p>“我相信我会除掉扫帚上的灰尘”这句话肯定不止一次出现在这首歌中。事实上，在这首歌的前四行里重复了两次。</p><p>那么，为什么它会出现在一系列独特的行中呢？因为一行第一次出现在文件中时，它是唯一的；只有后续条目是重复的。您可以将其视为列出每个唯一行的第一个匹配项。</p><p>让我们再次使用排序，并将输出重定向到一个新文件。这样，我们就不必在每个命令中都使用排序。</p><p>我们键入以下命令：</p><p>sorted.txt&gt;sorted.txt</p><img class="content_img" src="/image/f9/f90a3c413838c24cc05e87514d6e1777.png" /><p>现在，我们有一个预先分类的文件可以使用。</p><p>计数重复项</p><p>您可以使用-c(计数)选项打印每行在文件中出现的次数。</p><p>键入以下命令：</p><p>uniq-c sorted.txt|更少</p><img class="content_img" src="/image/e6/e6f4e7a00056899ff7f316c95b81b8ca.png" /><p>每行以该行在文件中出现的次数开始。但是，您会注意到第一行是空的。这会告诉您文件中有五个空行。</p><img class="content_img" src="/image/14/1439dc16a080e82f638a6bf8ca6c8784.png" /><p>如果想要按数字顺序对输出进行排序，可以将来自uniq的输出输入到排序中。在我们的示例中，我们将使用-r(反转)和t-n(数字排序)选项，并通过管道将结果传递给LESS。</p><p>我们键入以下内容：</p><p>uniq-c排序.txt|排序-rn|更少</p><img class="content_img" src="/image/dc/dc2d7c2f41b33b1de80c208563318bdf.png" /><p>该列表根据每行出现的频率按降序排序。</p><img class="content_img" src="/image/b6/b6e42448bebe4f3812286e69d006f08f.png" /><p>仅列出重复行</p><p>如果只想查看文件中重复的行，可以使用-d(重复)选项。无论一行在文件中重复多少次，它都只列出一次。</p><p>要使用此选项，我们键入以下内容：</p><p>uniq-d排序.txt</p><img class="content_img" src="/image/55/553da40d093c5cd993e2f47d7e6bd3fc.png" /><p>为我们列出了重复的行。您将注意到顶部的空行，这意味着文件包含重复的空行-这不是uniq留下的用于美化清单的空格。</p><img class="content_img" src="/image/50/50aa5f9b75c1a23d984896f53039f485.png" /><p>我们还可以组合-d(重复)和-c(计数)选项，并通过SORT传输输出。这为我们提供了至少出现两次的行的排序列表。</p><p>键入以下内容以使用此选项：</p><p>uniq-d-c sorted.txt|排序-rn</p><img class="content_img" src="/image/8d/8d22bdb54c44d6ad0bcbfca798754250.png" /><p>列出所有重复行</p><p>如果要查看每个重复行的列表，以及文件中每次出现一行时的条目，可以使用-D(所有重复行)选项。</p><p>要使用此选项，请键入以下内容：</p><p>Uniq-D排序.txt|更少</p><img class="content_img" src="/image/d5/d5d1d913d8a4937da90e6dd14ec9a973.png" /><p>该列表包含每个重复行的条目。</p><img class="content_img" src="/image/6c/6cabf246441cc57c8669bde0628081a5.png" /><p>如果使用--group选项，它将打印每个重复的行，并在每个组之前(前置)或之后(追加)，或在每个组前后(两者)都打印一个空行。</p><p>我们使用Append作为修饰符，因此我们键入以下内容：</p><p>uniq--group=追加排序.txt|更少</p><img class="content_img" src="/image/77/778a90240105f785af445a740e4a60a9.png" /><p>这些组之间用空行分隔，以便于阅读。</p><img class="content_img" src="/image/cf/cfe11ed4aa3e040449653e460adc5a6d.png" /><p>检查一定数量的字符</p><p>默认情况下，uniq检查每行的整个长度。但是，如果要将检查限制在一定数量的字符内，则可以使用-w(检查字符)选项。</p><p>在本例中，我们将重复最后一个命令，但将比较限制在前三个字符。为此，我们键入以下命令：</p><p>uniq-w 3--group=append sorted.txt|less</p><img class="content_img" src="/image/83/83eacf1cb7d769c7d8aa7834fae6a3da.png" /><p>我们收到的结果和分组非常不同。</p><img class="content_img" src="/image/a2/a264d2bf9f2cf24d2b653eed2cfbf8a6.png" /><p>所有以“i b”开头的行都被分组在一起，因为这些行的那些部分是相同的，因此它们被认为是重复的。</p><p>同样，所有以“I‘m”开头的行都被视为重复行，即使文本的其余部分不同。</p><p>忽略一定数量的字符</p><p>在某些情况下，跳过每行开头的特定数量的字符可能是有益的，例如，当文件中的行标有编号时。或者，假设您需要uniq跳过时间戳，并从第六个字符开始检查行，而不是从第一个字符开始。</p><p>下面是我们的排序文件的一个版本，带有编号的行。</p><img class="content_img" src="/image/59/597f169ca5455e367ecfe43ed69cd79f.png" /><p>如果我们希望Uniq从第三个字符开始比较检查，我们可以通过键入以下内容使用-s(跳过字符)选项：</p><p>uniq-s 3-d-c编号.txt</p><img class="content_img" src="/image/e6/e60cf7816f8c023b4b30085296aeb9d9.png" /><p>这些行被检测为重复行，并被正确计数。请注意，显示的行号是每个副本第一次出现的行号。</p><p>您也可以跳过字段(一串字符和一些空格)而不是字符。我们将使用-f(字段)选项来告诉Uniq忽略哪些字段。</p><p>我们键入以下命令来告诉uniq忽略第一个字段：</p><p>uniq-f 1-d-c编号为.txt</p><img class="content_img" src="/image/32/32a44593aea5d2c29dd90fb6d3e2432b.png" /><p>我们得到的结果与我们告诉Uniq在每行开头跳过三个字符时得到的结果相同。</p><p>忽略案例</p><p>默认情况下，Uniq区分大小写。如果相同的字母显示为大写和小写，Uniq会认为这些行是不同的。</p><p>例如，检查以下命令的输出：</p><p>uniq-d-c sorted.txt|排序-rn</p><img class="content_img" src="/image/b2/b2124e9cbf96b0f9fe7c616fc6f2df70.png" /><p>“我相信我会除掉扫帚上的灰尘”和“我相信我会除掉扫帚上的灰尘”这两句话不会被视为重复的，因为“Believe”中“B”的大小写不同。</p><p>但是，如果我们包括-i(忽略大小写)选项，这些行将被视为重复行。我们键入以下内容：</p><p>uniq-d-c-i sorted.txt|排序-rn</p><img class="content_img" src="/image/85/8537dc1508f33139795b90c00d269c0e.png" /><p>现在，这些行被视为重复行并分组在一起。</p><p>Linux提供了大量特殊的实用程序供您使用。和他们中的许多人一样，uniq不是您每天都会使用的工具。</p><p>这就是为什么精通Linux的很大一部分原因是记住哪个工具可以解决您当前的问题，以及在哪里可以再次找到它。不过，如果你练习一下，你就会顺利上路。</p><p>或者，你可以随时搜索How-to Geek-我们可能有一篇关于它的文章。</p><div class="item_info"><span class="item_key"><a href="/tag/uniq/">uniq</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/排序/">排序</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14710.html">如何在Linux上使用uniq命令</a><li><a href="/story/14709.html">如何在Linux上使用uniq命令</a><li><a href="/story/14708.html">如何在Linux上使用uniq命令</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>