<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在Debian Linux上设置VPN(PPTP)服务器</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在Debian Linux上设置VPN(PPTP)服务器</h2></div><div class="content"><img class="content_img" src="/image/70/70798e7d00cc23096c08c6b6d27004e8.jpg" /><p>通过VPN连接到您的服务器，您可以连接到在其上运行的每项可能的服务，就像您坐在同一网络中它的旁边一样，而无需单独转发您想要远程访问的每项服务的每个端口组合。</p><p>如果需要，使用VPN连接还可以授予对网络上其他计算机的访问权限，就像您从Internet上的任何地方本地访问网络中的其他计算机一样。</p><p>虽然不是最安全的VPN解决方案，但PPTP是迄今为止从任何现代系统和Windows安装、配置和连接到的最简单的解决方案，因为客户端自XP时代以来就是操作系统的一部分，您不需要在连接的两端弄乱证书(比如L2TP+IPsec或SSL VPN)。</p><p>我让你感兴趣了吗？那我们走吧：)</p><p>前言 / 开场白 / 序幕 / 引语</p><p>
您需要将端口1723从Internet转发到服务器才能启用连接(此处未介绍)。
你会看到我使用VIM作为编辑程序，这只是因为我习惯了…。您可以使用您喜欢的任何其他编辑器。</p><p>服务器设置</p><p>安装PPTP服务器软件包：</p><p>编辑“/etc/pptpd.conf”配置文件：</p><p>添加：</p><p>其中“localip”是服务器的地址，而remoteip是将分发给客户端的地址，您可以根据您的网络要求调整这些地址。</p><p>编辑“/etc/ppp/pptpd-options”配置文件：</p><p>在文件末尾附加以下指令：</p><p>其中，用于ms-dns指令的IP是您的客户端将连接到的本地网络的DNS服务器，同样，您有责任根据您的网络配置调整此IP。</p><p>编辑CHAP密码文件：</p><p>使用以下语法向其添加用户连接的身份验证凭据：</p><p>重新启动连接的守护程序以使设置生效：</p><p>如果您不想授予自己访问服务器以外的任何内容的权限，那么您在服务器端就完蛋了。</p><p>启用转发(可选)</p><p>虽然这一步是可选的，可能会被视为极端偏执狂的安全风险，但我认为，不这样做甚至违背了将VPN连接到您的网络的目的。</p><p>通过启用转发，我们可以在连接时使用整个网络，而不仅仅是VPN服务器本身。这样做允许连接的客户端通过VPN服务器“跳转”到网络上的所有其他设备。</p><p>为了实现这一点，我们将在系统的“转发”参数上翻转开关。</p><p>编辑“sysctl”文件：</p><p>找到“net.ipv4.ip_ward”行，并将参数从0(禁用)更改为1(启用)：</p><p>您可以重新启动系统或发出此命令以使设置生效：</p><p>启用转发后，所有服务器端设置均已准备就绪。</p><p>我们建议VPN客户端使用“拆分通道”连接模式。</p><p>关于推荐的“拆分隧道”模式的更深入的解释，以及针对Ubuntu Linux用户的说明，可以在“在Ubuntu 10.04上设置”拆分隧道“VPN(PPTP)客户端”指南中找到。</p><p>对于Windows用户，请按照以下指南在您的系统上创建VPN客户端。</p><p>XP上的PPTP VPN拨号程序设置(拆分隧道)</p><p>我们将创建一个常规VPN拨号程序，但有一个值得注意的例外，即我们将设置系统在连接时不将其用作“默认网关”。</p><p>跳过此步骤会将连接计算机的冲浪速度限制为VPN服务器的上载速度(通常较慢)，因为它的所有流量都将通过VPN连接路由，而这不是我们想要的。</p><p>我们需要启动连接向导，所以我们将转到控制面板。</p><p>进入“开始”，然后进入“控制面板”。</p><img class="content_img" src="/image/15/1598816a60c89b468e1a59ba311371fd.png" /><p>*如果您的系统是用“经典开始菜单”设置的，您只需指向“控制面板”图标，然后选择“网络连接”即可。</p><p>在“控制面板”中双击“网络连接”。</p><img class="content_img" src="/image/5f/5f81ff721d59d5617c9901ae34b7ca59.png" /><p>双击“新建连接向导”。</p><img class="content_img" src="/image/35/3556b0bb6b389cf5cdc86c2f04b7ac79.png" /><p>在“新建连接向导”欢迎屏幕中，单击“下一步”。</p><img class="content_img" src="/image/ab/abf058d30ee66e0c2b2a9b22115c59c0.png" /><p>选择“在我的工作区连接到网络”选项，然后选择“下一步”。</p><img class="content_img" src="/image/7b/7ba562a8cad937efb517eb0ef58c465a.png" /><p>选择“虚拟专用网络连接”选项，然后选择“下一步”。</p><img class="content_img" src="/image/06/064951589bdea425aa87ceb570b362a6.png" /><p>为VPN连接指定名称。</p><img class="content_img" src="/image/89/8925f82391bf540fcaeec96babfdbd64.png" /><p>键入您的VPN服务器的名称-从Internet上看到的DNS名称或IP地址。</p><img class="content_img" src="/image/28/28c346639cffe0004834c2f19eb42513.png" /><p>您也可以选择“向桌面添加快捷方式”和“完成”。</p><img class="content_img" src="/image/fe/fe7870db7645fcdab68a1394aa35bebc.png" /><p>现在到了棘手的部分，非常重要的一点是，您不要现在就尝试连接并进入拨号器的“属性”。</p><img class="content_img" src="/image/c6/c6ccf758cbc0593a1bd6b6727aa47880.jpg" /><p>转到网络选项卡，将“类型的VPN”更改为“PPTP VPN”，如下图所示(这是可选的，但会缩短连接时间)，然后进入“属性”。</p><img class="content_img" src="/image/71/71c9a461c5f101656a6cf5bcc1f57317.png" /><p>在下一个窗口中，进入“前进”模式，不更改其他任何内容。</p><img class="content_img" src="/image/88/88193440aebfd58aa6c85a92e7d30a39.png" /><p>在下一个窗口中，取消选中“使用远程网络上的默认网关”选项。</p><img class="content_img" src="/image/13/1364f11c0526b484de25119da692f82f.png" /><p>现在，在服务器上设置连接凭据并进行连接时，输入连接凭据。</p><img class="content_img" src="/image/3f/3f28487833e109ee6846cf2a48638421.png" /><p>就是这样，您现在应该能够从XP Client…访问网络上的所有计算机。好好享受吧。</p><p>Win7上的PPTP VPN拨号程序设置(拆分隧道)</p><p>我们将创建一个常规VPN拨号程序，但有一个值得注意的例外，即我们将设置系统在连接时不将其用作“默认网关”。</p><p>跳过此步骤会将连接计算机的冲浪速度限制为VPN服务器的上载速度(通常较慢)，因为它的所有流量都将通过VPN连接路由，而这不是我们想要的。</p><p>我们需要启动连接向导，所以我们将转到“网络和共享中心”。</p><p>单击系统托盘中的网络图标，然后单击“打开网络和共享中心”</p><img class="content_img" src="/image/15/15baa61a0014c05b3c7ccab1f9b4dc11.png" /><p>在网络中心，单击“建立新连接或网络”。</p><img class="content_img" src="/image/dc/dca87453fa1db7fbcdbf83a6622bc088.png" /><img class="content_img" src="/image/82/823ea5a7bfcac2d89cb58e2bad504dd2.png" /><img class="content_img" src="/image/a8/a8e10d93bc2d1b22d87755f66005680c.png" /><img class="content_img" src="/image/f8/f8cd5748fc729dd2e2e0f96f1fbd1998.png" /><img class="content_img" src="/image/1b/1bd8bcaa6cd98705612b87498c99fbf4.png" /><img class="content_img" src="/image/2d/2d3ec132b5c4fc6e1ae72eae5f8353fb.png" /><img class="content_img" src="/image/a1/a109d406c795729cf06a05c3dd19b0c1.png" /><img class="content_img" src="/image/93/93c595770e1c23264c9a9a2e58ae4f51.png" /><p>转到“网络”选项卡，选择IPv4协议并进入其属性。</p><img class="content_img" src="/image/89/89e6ef81a9134ed5dece9486f1a6d769.png" /><p>在下一个窗口中，在不更改任何其他内容的情况下单击“高级”。</p><img class="content_img" src="/image/97/97d320f701777d42c6dbb583378e1e13.png" /><p>在下一个窗口中，取消选中“使用远程网络上的默认网关”选项。</p><img class="content_img" src="/image/59/5923673a7cb8d4abb607c2c071202aba.png" /><p>现在，在服务器上设置连接凭据并进行连接时，输入连接凭据。</p><img class="content_img" src="/image/58/588f8146b4e3c702a322aa6ecc923c05.png" /><p>就是这样，您现在应该可以从Win7客户端访问网络上的所有计算机了。</p><p>注意：一定要阅读我们关于为Ubuntu Linux设置VPN客户端的指南。</p><p>享受：)</p><div class="item_info"><span class="item_key"><a href="/tag/连接/">连接</a></span><span class="item_key"><a href="/tag/vpn/">vpn</a></span><span class="item_key"><a href="/tag/网络/">网络</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14603.html">如何在Linux上使用netstat</a><li><a href="/story/14602.html">如何在Linux上使用netstat</a><li><a href="/story/14601.html">如何在Linux上使用netstat</a><li><a href="/story/14600.html">如何在Linux上使用netstat</a><li><a href="/story/14599.html">如何在Linux上使用netstat</a><li><a href="/story/14598.html">如何在Linux上使用netstat</a><li><a href="/story/14597.html">如何在Linux上使用netstat</a><li><a href="/story/14596.html">如何在Linux上使用netstat</a><li><a href="/story/14595.html">如何在Linux上使用netstat</a><li><a href="/story/13763.html">如何在Ubuntu上设置远程桌面</a><li><a href="/story/13728.html">什么是反向SSH隧道？(以及如何使用它)</a><li><a href="/story/12722.html">如何在iPhone、iPad或Mac上使用即时热点</a><li><a href="/story/12378.html">如何在iPhone、iPad或Mac上使用即时热点</a><li><a href="/story/12060.html">你真的需要一个“游戏”路由器吗？</a><li><a href="/story/11207.html">如何让任何人将他们的手机连接到您的Google Home</a><li><a href="/story/11189.html">如何让您的流媒体视频不再缓冲太多</a><li><a href="/story/11128.html">如何将Android设备用作PC或Mac的第二个显示器</a><li><a href="/story/10742.html">如何在没有任何额外软件的情况下对朋友的Windows PC进行远程故障排除</a><li><a href="/story/8865.html">在Windows 10上将连接设置为计量的方式、时间和原因</a><li><a href="/story/8395.html">Wi-Fi与以太网：有线连接好多少？</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>