<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何使用Wireshark捕获、过滤和检查数据包</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何使用Wireshark捕获、过滤和检查数据包</h2></div><div class="content"><img class="content_img" src="/image/a8/a8e3b2160bad65c8b9f8c57bf5b68156.png" /><p>Wireshark是一种网络分析工具，前身为Etheral，它实时捕获数据包并以人类可读的格式显示它们。Wireshark包括过滤器、颜色编码和其他功能，让您可以深入挖掘网络流量并检查各个数据包。</p><p>本教程将帮助您快速掌握捕获、过滤和检查数据包的基础知识。您可以使用Wireshark检查可疑程序的网络通信量、分析网络上的通信量或解决网络问题。</p><p>获取Wireshark</p><p>你可以从Wireshark的官网下载Wireshark for Windows或MacOS版。如果您使用的是Linux或其他类似UNIX的系统，您可能会在其软件包存储库中找到Wireshark。例如，如果您使用的是Ubuntu，您可以在Ubuntu软件中心找到Wireshark。</p><p>只需快速警告一下：许多组织不允许在其网络上使用Wireshark和类似工具。除非您有许可，否则请勿在工作中使用此工具。</p><p>捕获数据包</p><p>下载并安装Wireshark后，您可以启动它，然后双击Capture(捕获)下的网络接口名称，开始在该接口上捕获数据包。例如，如果要捕获无线网络上的流量，请单击您的无线接口。您可以通过单击Capture&gt;Options来配置高级功能，但目前不需要这样做。</p><img class="content_img" src="/image/00/00dd3b136caee2c2c201f52df527b71f.png" /><p>只要单击接口的名称，您就会看到数据包开始实时显示。Wireshark捕获发送到您的系统或从您的系统接收的每个数据包。</p><p>如果您启用了混杂模式(默认情况下是启用的)，您还将看到网络上的所有其他数据包，而不仅仅是发往您的网络适配器的数据包。要检查是否启用了混杂模式，请单击Capture(捕获)&gt;Options(选项)，并验证此窗口底部的“Enable Miscuous Mode on All Interface(在所有接口上启用混杂模式)”复选框是否已激活。</p><img class="content_img" src="/image/45/450dbbf3ce5aef65d6b872656c04e1d2.png" /><p>当您想要停止捕获流量时，请单击窗口左上角附近的红色“停止”按钮。</p><img class="content_img" src="/image/23/23bae42b30818e1bae2582450f939f2b.png" /><p>颜色编码</p><p>您可能会看到包以各种不同的颜色突出显示。Wireshark使用颜色帮助您一目了然地识别流量类型。默认情况下，浅紫色是TCP流量，浅蓝色是UDP流量，黑色标识有错误的数据包-例如，它们可能被无序传送。</p><p>若要查看颜色代码的确切含义，请单击“查看”&gt;“颜色规则”。如果愿意，您还可以从此处自定义和修改颜色规则。</p><img class="content_img" src="/image/06/06dd4c85ef451a41a601a6ec69b01094.png" /><p>示例捕获</p><p>如果你自己的网络上没有什么有趣的东西可以检查，Wireshark的维基就会覆盖你。维基包含一个完整的样本捕获文件页面，您可以加载和检查这些文件。单击File(文件)&gt;Open in Wireshark(在Wireshark中打开)，然后浏览下载的文件以打开一个文件。</p><p>您还可以将自己的捕获保存在Wireshark中，稍后再打开它们。单击File(文件)&gt;Save(保存)保存捕获的数据包。</p><img class="content_img" src="/image/a3/a3df7a83d7ed6008f6f1ad9acace52ed.png" /><p>过滤数据包</p><p>如果您正在尝试检查某些特定的内容，例如某个程序在给家里打电话时发送的流量，那么关闭使用网络的所有其他应用程序将有助于您缩小流量范围。不过，您可能要筛选大量数据包。这就是Wireshark的过滤器发挥作用的地方。</p><p>应用筛选器的最基本方法是在窗口顶部的筛选器框中键入筛选器，然后单击Apply(应用)(或按Enter键)。例如，键入“dns”，您将只看到dns数据包。当您开始键入时，Wireshark将帮助您自动完成筛选器。</p><img class="content_img" src="/image/fa/fa2772608b4cd9c0e7b357018c828bf9.png" /><p>您也可以单击分析&gt;显示筛选器，从Wireshark中包含的默认筛选器中选择一个筛选器。从这里，您可以添加您自己的自定义筛选器并保存它们，以便将来轻松访问。</p><p>有关Wireshark显示过滤语言的更多信息，请阅读Wireshark官方文档中的构建显示过滤表达式页面。</p><img class="content_img" src="/image/37/37ea97f6046a4d87deff519d9ec93b33.png" /><p>您可以做的另一件有趣的事情是右键单击数据包，然后选择Follow(跟随)&gt;TCP Stream(TCP流)。</p><p>您将看到客户端和服务器之间的完整TCP会话。如果适用，您还可以单击以下菜单中的其他协议来查看其他协议的完整对话。</p><img class="content_img" src="/image/d4/d461b7aedb754145ae0f3661e3fa958e.png" /><p>关闭窗口，您会发现已自动应用过滤器。Wireshark将向您显示组成对话的数据包。</p><img class="content_img" src="/image/87/87980cd9e0629e67deb61160983f9c32.png" /><p>检查数据包</p><p>单击某个数据包将其选中，您可以向下挖掘以查看其详细信息。</p><img class="content_img" src="/image/e3/e3374128f2814696386656fa7d000081.png" /><p>您也可以从这里创建筛选器-只需右键单击其中一个详细信息，然后使用Apply as Filter(应用为筛选器)子菜单来创建基于它的筛选器。</p><img class="content_img" src="/image/1e/1e6afdf2be89117e5ebed5642caae208.png" /><p>Wireshark是一个非常强大的工具，本教程只是触及了您可以用它做些什么的皮毛。专业人员使用它来调试网络协议的实现、检查安全问题和检查网络协议内部。</p><p>你可以在Wireshark官方用户指南和Wireshark网站上的其他文档页面中找到更多详细信息。</p><div class="item_info"><span class="item_key"><a href="/tag/wireshark/">wireshark</a></span><span class="item_key"><a href="/tag/捕获/">捕获</a></span><span class="item_key"><a href="/tag/数据包/">数据包</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/4011.html">充分利用Wireshark的5个杀手级技巧</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>