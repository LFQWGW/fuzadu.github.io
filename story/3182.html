<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何配置您的路由器以进行网络范围的URL记录</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何配置您的路由器以进行网络范围的URL记录</h2></div><div class="content"><img class="content_img" src="/image/b7/b747e764f6f96100f2fc16a7d23b4107.jpg" /><p>不要对谁在访问你局域网上的哪些网站一无所知。使用我们的双管齐下的方法锁定在您的家庭网络上浏览内容的用户。</p><p>无论您是想监视您的孩子在做什么，监视连接到您的Wi-Fi热点的人的活动，还是只是想比普通人更好奇一点，下面的指南都将帮助您监视源自您的网络的全局URL请求和来自网络上的单个用户的请求。这是一种双管齐下的方法，因此您可以轻松地做到一个而不做另一个(单独监控而不使用全局监控，反之亦然)。</p><p>启用URL日志记录需要什么</p><p>因为这种技术是双管齐下的，所以我们将把“您需要什么”部分分成两部分。首先，如果您只对全局日志记录感兴趣-保留从您的Internet连接访问的每个URL的记录，但没有查看正在执行请求的特定计算机的粒度-您将需要以下内容：</p><p>
允许您设置自定义DNS服务器的路由器(绝大多数路由器都是这样做的)。
免费的OpenDNS帐户</p><p>如果您想更详细地了解网络上的URL请求，并且不介意多做一点工作，您将需要</p><p>
允许日志记录的路由器(同样，大多数路由器都允许)。
免费赠送一份WallWatcher</p><p>第一种方法最简单，只需要几分钟的设置。缺点是，路由器+OpenDNS方法只允许您看到请求是从您的网络发出的，而不是由谁发出的。因此，您将知道有多次访问ABC和XYZ站点，但您只知道他们来自您的网络。一个较小的缺点是它不是实时的，所以您必须等待大约一天的时间才能更新日志以进行审查。</p><p>第二种方法包括在路由器上启用系统日志，然后提取该日志，将其放入程序进行分析(特别是将所有这些IP地址解析为人类可读的URL)，然后阅读列表。使用此技术，您将具体看到网络上的哪台计算机或设备在什么时间访问哪些站点。</p><p>我们建议您通读本教程并设置这两种方法。使用第一种方法(OpenDNS)大致监视情况，第二种更深入的方法(分析日志)，当您发现有问题并想要更深入地研究以了解发生了什么情况时，使用第二种更深入的方法(分析日志)。</p><p>为OpenDNS配置您的路由器</p><img class="content_img" src="/image/d7/d70e69fef07d3f224e5fafc97473077f.jpg" /><p>首先，访问OpenDNS并注册他们的免费家庭用户帐户。插入您的电子邮件，选择一个强密码，然后确保检查您的电子邮件以确认您的身份并激活帐户。一旦您确认了您的帐户，您将需要将您的家庭IP添加到网络中。OpenDNS支持多个网络，但我们所关心的是确保OpenDNS可以识别您的家庭网络。</p><img class="content_img" src="/image/4b/4bf5ebe8bb3fed9c7725d84bd3562d30.jpg" /><p>单击OpenDNS仪表板中的添加网络，确认它建议您使用的IP是家庭互联网连接的IP地址。将连接命名为Home(或您计划记录URL的任何网络的名称)。</p><p>完成后，如果没有自动跳到仪表板的Settings子菜单，请单击选项卡，自己导航到那里。在那里，您将找到您创建的新网络，该网络按您给它的标签和您的IP地址列出。在OpenDNS开始为我们记录日志之前，我们需要允许它这样做。单击IP地址以访问该网络的设置。</p><img class="content_img" src="/image/bc/bce9816688e40f1faa2abf9243f94862.jpg" /><p>进入设置菜单后，单击左栏中的Stats and Logs(统计和日志)。在Stats and Logs菜单中，选中enable stats and logs复选框，然后单击Apply。现在您已经告诉OpenDNS监控您的连接，是时候将路由器中的DNS服务器切换为指向OpenDNS，这样它就会有一些流量需要监控。</p><p>我们使用的是安装了自定义Tomato固件的Linksys路由器。为了进入我们登录到路由器的DNS设置，导航到Basic-&gt;Network-&gt;Static DNS，如下所示：</p><img class="content_img" src="/image/93/939cb022da2fb65965badf4d96d4655a.jpg" /><p>您的路由器应该有类似的菜单。有关特定路由器的提示，请查看此处的OpenDNS路由器指南。根据您的路由器和固件，您将有2-4个DNS服务器地址的插槽。按以下顺序使用以下IP地址填充您可用的尽可能多的插槽：</p><p>
208.67.222.222。
208.67.220.220。
208.67.220.222。
208.67.222.220</p><p>将新DNS服务器添加到路由器后，请确保保存您的设置。从现在开始，OpenDNS将记录来自您家庭网络的所有URL请求。要查看它们，只需登录到您的OpenDNS帐户，单击Stats选项卡并查看域数据即可。值得注意的是，统计数据并不是实时更新的，在访问站点和域名出现在统计页面之间至少会有12-24个延迟。需要更直接、更精细的控制吗？请继续阅读以启用路由器级别日志记录。</p><p>请务必浏览OpenDNS的支持页面，以便更深入地了解使用OpenDNS可以做的其他事情(如免费内容过滤)。它不仅仅是一个具有日志记录功能的更快的DNS服务器！</p><p>启用路由器日志记录和日志分析</p><img class="content_img" src="/image/60/608dece4bbec5eb45701bfaf90f3e372.jpg" /><p>OpenDNS绝对是简单的路由。如果您不需要实时的逐秒记录，并且您想让其他人来做将所有IP地址转换成对人类友好的报告这一繁重任务，那么这是一条可行的道路。然而，如果你想看得更详细，你就需要亲手弄脏你的手。在本指南的这一部分，我们将帮助您在路由器上启用日志记录，然后使用免费应用程序Wall Watcher实时分析这些日志。</p><p>首先，我们需要在路由器上启用日志记录。我们从来没有遇到过没有日志记录功能的路由器，所以您很有可能可以记录与您的路由器的连接。我们正在运行安装了Tomato的Linksys路由器，因此我们将导航到Status-&gt;Logs-&gt;Logging Configuration，然后选中Log to Remote System，然后插入我们要在其上安装Wall Watcher的计算机的IP地址。此IP地址是LAN上的内部IP地址，在本例中为192.168.1.117。然后，在连接日志部分中，我们将入站和出站流量切换到两者。向下滚动并单击保存。</p><p>路由器现在正在记录日志，并通过网络将日志广播到我们的主机。是时候安装“墙面守望者”了。Wall Watcher不是一个简单的一键安装的应用程序，所以一定要注意以下说明，以避免任何不必要的挫折。</p><p>首先，下载Wall Watcher应用程序和Wall Watcher Library。将它们解压缩到同一文件夹。运行Setup.exe(如果您收到有关缺少Visual Basic文件的错误，请在此处从Microsoft下载并安装缺少的组件)。首次运行安装程序时，您将看到以下对话框：</p><img class="content_img" src="/image/e4/e4bd5b7dd85705199372ff9b7424cd0e.jpg" /><p>我们检查了所有四个文件，但至少您必须检查第一个文件，即安装和注册库文件。跳过这一步不可避免地会导致错误，除非您碰巧安装了应用程序所需的库和文件。</p><img class="content_img" src="/image/ba/ba9cf07c4cb5ea249232c1fc6c4618d1.jpg" /><p>第一次运行时，系统将提示您选择路由器。如果您选择自动选择，WallWatcher将检查其125+路由器数据库中的每台路由器，并根据您的路由器配置对其进行测试。如果您知道您拥有的路由器，请从列表中选择它以节省一些时间(注意：如果您运行的是Tomato、DD-WRT或其他流行的替代固件，请从列表中选择，而不是路由器的型号)。单击OK。</p><p>在这一点上，您将看到一个非常繁忙的窗格，所有的流量都在流过。所有这些都是IP格式，除非您想手动解析IP(顺便说一句，您可以使用WallWatcher文件夹中包含的IP-URL.exe)，否则它对您不是特别有用。</p><img class="content_img" src="/image/01/01933d3e74cc6bb3273f0979e4c52ddc.jpg" /><img class="content_img" src="/image/c2/c24d969a694fcce17b79bc3f684edbe4.jpg" /><p>更重要的是，对于我们整个监控项目的第二个方面，显示了本地IP地址。上面屏幕截图中的所有流量都来自*.117计算机。看一眼日志，我可以很容易地看到我在设置的测试阶段访问Reddit。虽然如果你愿意的话，WallWatcher可以实时查看情况，但WallWatcher会记录所有连接，如果需要，可以根据具体情况从路由器中提取新的日志，所以可以让它在后台运行(或者在你觉得有必要启动它并进行一些分析之前，根本不要让它运行)。</p><p>WallWatcher绝对有丰富的设置和过滤器，所以你可以很容易地调整它来锁定你网络上的特定设备，忽略你列入白名单的良性来源的流量，为你列入黑名单的网站设置警报，等等。通过一个小小的实验，您将以您想要的方式和外科手术的精确度检查您的日志。</p><p>使用我们在这里介绍的双管齐下的方法，您可以轻松地从OpenDNS仪表板舒适地监视您的网络，并俯冲下来对您的日志文件进行逐个请求的分析，以查看谁具体在做什么。斯佳丽小姐在iPad上访问hellokitty.com？你很快就会解开这个谜团的。</p><div class="item_info"><span class="item_key"><a href="/tag/路由器/">路由器</a></span><span class="item_key"><a href="/tag/日志/">日志</a></span><span class="item_key"><a href="/tag/网络/">网络</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14214.html">您的旧路由器是否仍在进行安全更新？</a><li><a href="/story/13847.html">如何保护您的Smarthome免受攻击</a><li><a href="/story/13787.html">如何出厂重置路由器</a><li><a href="/story/13755.html">如何重新启动路由器和调制解调器</a><li><a href="/story/13716.html">将路由器放置在何处以获得最佳Wi-Fi速度</a><li><a href="/story/13493.html">为什么Windows10说您的Wi-Fi网络“不安全”</a><li><a href="/story/11786.html">解决Wi-Fi问题的最简单方法：(认真)移动路由器</a><li><a href="/story/11142.html">如何转发路由器上的端口</a><li><a href="/story/10153.html">如何同时使用您的路由器和ISP的调制解调器/路由器组合</a><li><a href="/story/10152.html">如何启用(和故障排除)对Plex Media Server的远程访问</a><li><a href="/story/9670.html">为什么您应该升级您的路由器(即使您有较旧的小工具)</a><li><a href="/story/9301.html">什么是802.11ac，我需要它吗？</a><li><a href="/story/9230.html">如何更改Wi-Fi网络的名称和密码</a><li><a href="/story/8972.html">HTG评论Google OnHub：Wi-Fi和Smarthome技术的融合(如果你愿意等待)</a><li><a href="/story/8901.html">如何检查您的路由器是否有恶意软件</a><li><a href="/story/8805.html">HTG回顾D-Link AC3200超Wi-Fi路由器：满足您Wi-Fi需求的快速太空船</a><li><a href="/story/8655.html">2.4 GHz和5 GHz Wi-Fi有什么不同(我应该使用哪种)？</a><li><a href="/story/8640.html">将您的家庭路由器连接到VPN以绕过审查、过滤等</a><li><a href="/story/8565.html">什么是双频和三频路由器？</a><li><a href="/story/8099.html">如何修复冲突的国家代码并改善Mac的Wi-Fi</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>