<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在Linux上使用yes命令</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在Linux上使用yes命令</h2></div><div class="content"><p>yes命令似乎太简单，没有任何实际用途，但在本教程中，我们将向您展示它的应用程序，以及如何从它在Linux和MacOS中被压抑的积极作用中获益。</p><p>yes命令</p><p>yes命令是Linux和其他类似Unix的操作系统(如MacOS)中最简单的命令之一。所谓简单，我们指的是它的使用和最初实现的简单。最初版本的源代码-在System 7 Unix中发布，由Ken Thompson创作-只有6行代码。</p><p>但是不要因为它是一个简单的小命令就把它否定了。它可以以一些有趣和有用的方式使用。</p><p>YES是做什么的？</p><p>在没有任何命令行参数的情况下使用时，yes命令的行为就像您在一次又一次地键入“y”并按Enter键一样。非常快。它会一直这样做，直到您按下Ctrl+C来中断它。</p><code>yes</code><img class="content_img" src="/image/f5/f5ffe2507e783894089bb6c5f520fdf6.png" /><p>事实上，YES可用于重复生成您选择的任何消息。只需键入yes、空格、要使用的字符串，然后按Enter键即可。这通常用于使yes生成“yes”或“no”字符串的输出流。</p><code>yes yes</code><img class="content_img" src="/image/12/1266e1a38f68c250b8065200d26181ad.png" /><code>yes anything you like</code><img class="content_img" src="/image/44/44a20ed829df3a745343ddcf1fb83a2c.png" /><p>但那有什么用呢？</p><p>YES的输出可以通过管道传输到其他程序或脚本。</p><p>这听起来耳熟吗？您启动了一个长时间运行的进程，然后离开，让它继续运行。当您返回到计算机时，该过程根本没有完成。在你不在的时候，它会问你一个问题，然后坐在那里等待一个“是”或“否”的回答。</p><p>如果您事先知道您的所有答案都将是肯定的(“是”或“y”)或否定的(“否”或“n”)，您可以使用yes为您提供这些回答。然后，您的漫长流程将在无人值守的情况下一直运行到完成，并提供流程提出的任何问题的答案。</p><p>对脚本使用yes</p><p>请看下面的Bash shell脚本。(我们需要想象这是一个大得多的脚本的一部分，需要相当长的时间才能运行。)</p><code>#!/bin/bash

# ...
# in the middle of some long script
# obtain a response from the user
# ...

echo "Are you happy to proceed? [y,n]"
read input

# did we get an input value?
if [ "$input" == "" ]; then

   echo "Nothing was entered by the user"

# was it a y or a yes?
elif [[ "$input" == "y" ]] || [[ "$input" == "yes" ]]; then

   echo "Positive response: $input"

# treat anything else as a negative response
else

   echo "negative response: $input"

fi</code><p>此脚本询问问题并等待响应。脚本中的逻辑流由用户的输入决定。</p><p>
“是”或“是”表示正面回应。
任何其他输入都被视为负面响应。
在没有输入文本的情况下按Enter键不执行任何操作。</p><p>要测试这一点，请将脚本复制到一个文件，并将其另存为long_script.sh。使用chmod使其可执行。</p><code>chmod +x long_script.sh</code><p>使用以下命令运行该脚本。尝试输入“yes”、“y”和任何其他内容，包括在不输入文本的情况下按Enter键。</p><code>./long_script.sh</code><img class="content_img" src="/image/40/408d49ba4e7a926097a32dcacb4f366b.png" /><p>要获得yes以提供我们对脚本问题的响应，请通过管道将输出从yes传输到脚本。</p><code>yes | ./long_script.sh</code><img class="content_img" src="/image/f6/f6d2f2a53c743828a2766ecd66c6355f.png" /><p>一些脚本在他们的要求上比较僵硬，只接受完整的“是”这个词作为积极的回应。您可以将“yes”作为参数提供给yes，如下所示：</p><code>yes yes | ./long_script.sh</code><img class="content_img" src="/image/ec/ec25fb22866869ecb54b11a0018a424b.png" /><p>不经过深思熟虑就不要答应</p><p>您需要确保您要输入到脚本或程序中的输入肯定会给您带来预期的结果。为了能够做出这个决定，你必须不知道问题和你的回答应该是什么。</p><p>脚本、命令或程序中的逻辑可能与您的预期不符。在我们的示例脚本中，问题可能是“您想要停止吗？[y，n].“。如果是这样的话，否定的响应将允许脚本继续执行。</p><p>您必须熟悉脚本、命令或程序，然后才能轻松地将yes输入其中。</p><p>对命令使用yes</p><p>在其萌芽阶段，yes将与其他Linux命令一起使用。从那时起，大多数其他Linux命令都有自己的运行方式，无需人工交互。要做到这一点，不再需要“是”。</p><p>让我们以Ubuntu包管理器apt-get为例。要在安装过程中不按“y”键即可安装应用程序，请按如下方式使用yes：</p><code>yes | sudo apt-get install fortune-mod</code><img class="content_img" src="/image/53/5385aecf45e9746ccb05a20c4efa4846.png" /><p>使用apt-get中的-y(假设是)选项可以获得相同的结果：</p><code>sudo apt-get -y install fortune-mod</code><img class="content_img" src="/image/0a/0a7c58779f8663b597a2cface5d6fa40.png" /><p>您将看到apt-get甚至没有像往常一样询问“您想继续吗？”[是/否]“问题。它只是假设答案是“是的”。</p><p>在其他Linux发行版上，情况也是如此。在Fedora上，您可能会一次使用这种类型的软件包管理器命令：</p><code>yes | yum install fortune-mod</code><p>DNF包管理器已经取代了yum，并且DNF有自己的-y选项(假设是)。</p><code>dnf -y install fortune-mod</code><p>这同样适用于cp、fsck和rm。这些命令都有自己的-f(强制)或-y(假设是)选项。</p><p>那么，YES似乎已经沦落到只使用脚本的地步了吗？不完全是。这条老狗还有更多的把戏。</p><p>一些更多的是的把戏</p><p>您可以将yes与seq生成的数字序列一起使用，以控制重复操作的循环。</p><p>此一行程序将生成的数字回显到终端窗口，然后调用睡眠一秒钟。</p><p>您可以调用另一个命令或脚本，而不是简单地将数字回显到终端窗口。该命令或脚本甚至不需要使用数字，它们只用于启动循环的每个周期。</p><code>yes "$(seq 1 20)" | while read digit; do echo digit; sleep 1; done</code><img class="content_img" src="/image/61/611b9a2b493eb506d27b47f2eb56049e.png" /><p>有时，使用一个大文件进行测试很有用。您可能想要练习使用zip命令，或者您想要有一个相当大的文件来测试FTP上载。</p><p>使用yes可以快速生成大文件。您所需要做的就是给它一个长的文本字符串来处理，并将输出重定向到一个文件中。毫无疑问，这些文件会迅速增长。准备好在几秒钟内按下Ctrl+C。</p><code>yes long line of meaningless text for file padding > test.txt</code><code>ls -lh test.txt</code><code>wc test.txt</code><img class="content_img" src="/image/7c/7ca33d128027b4d62afcdc72c30207e8.png" /><p>在用于研究本文的测试机器上，这里生成的文件花了大约5秒的时间。Ols报告它的大小是557Mb，WC告诉我们它有1240万行。</p><p>我们可以通过在命令字符串中包含HEAD来限制文件的大小。我们告诉它要在文件中包含多少行。-50表示HEAD只允许50行进入test.txt文件。</p><code>yes long line of meaningless text for file padding | head -50 > test.txt</code><img class="content_img" src="/image/00/00156fa3d21d480bed94d6009cb24332.png" /><p>一旦test.txt文件中有50行，该过程就会停止。您不需要使用Ctrl+C，它会自动优雅地停止。</p><p>WC报告文件中正好有50行，400个字，大小为2350字节。</p><p>尽管它对于将响应反馈到长时间运行的脚本(以及其他一些技巧)仍然很有用，但是yes命令不会成为您日常命令工具箱的一部分。但是当你真的需要它的时候，你会发现它本身就很简单--而且全部都是六行金色代码。</p><div class="item_info"><span class="item_key"><a href="/tag/脚本/">脚本</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/命令/">命令</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14323.html">如何在Windows上将Caps Lock用作修改键</a><li><a href="/story/14159.html">如何在Bash中使用变量</a><li><a href="/story/13819.html">如何将GUI添加到Linux Shell脚本</a><li><a href="/story/13180.html">如何使用脚本编辑器为Google应用程序增压</a><li><a href="/story/13172.html">如何使用Linux睡眠命令暂停Bash脚本</a><li><a href="/story/13147.html">如何在进程退出时自动关闭MacOS终端</a><li><a href="/story/13134.html">如何编写自动热键脚本</a><li><a href="/story/12894.html">如何从Bash脚本获取系统的地理位置</a><li><a href="/story/11595.html">如何使用自动热键创建自定义键盘快捷键</a><li><a href="/story/11555.html">如何在Windows中自动键入带双空格的句点</a><li><a href="/story/11135.html">如何恢复Chromebook的原始BIOS和软件(如果已擦除)</a><li><a href="/story/10454.html">如何在Windows 10上创建和运行Bash Shell脚本</a><li><a href="/story/9334.html">如何使用Geektool自定义您的Mac桌面</a><li><a href="/story/7708.html">如何配置Windows以更轻松地使用PowerShell脚本</a><li><a href="/story/7704.html">如何使用批处理文件使PowerShell脚本更易于运行</a><li><a href="/story/7689.html">作用域如何影响PowerShell脚本</a><li><a href="/story/7581.html">使用Google Sheet和Google Apps脚本可以做的8件非常有用的事情</a><li><a href="/story/7410.html">愚蠢的极客小把戏：如何让你的电脑与你对话</a><li><a href="/story/7370.html">在Windows上使窗口始终在最上面的3种最佳方法</a><li><a href="/story/6987.html">如何用PowerShell生成随机姓名和电话号码</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>