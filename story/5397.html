<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何为远程外壳、桌面和文件传输配置Raspberry PI</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何为远程外壳、桌面和文件传输配置Raspberry PI</h2></div><div class="content"><img class="content_img" src="/image/41/417da2c55bbd866813882647aa9b115e.jpg" /><p>所以你有一个树莓PI，你想通过变成一个完全独立的盒子来最大化它的微小空间-没有显示器、键盘或其他输入外围设备。继续阅读，我们将向您展示如何在PI上设置远程shell、桌面和文件传输访问。</p><p>我为什么要这么做？</p><p>即使包裹在坚固的外壳里，PI也只是一台微型计算机。它非常适合藏在看不见的地方，而不会有乱七八糟的电线从上面伸出来-对于许多项目来说，你根本不需要永久的监视器和外围设备陪同。</p><p>但是，这并不意味着您不需要连接到计算机即可进行更改、更新内容、传输文件等。这方面的一个很好的例子是我们用树莓PI(用于电子邮件、天气或任何东西)文章构建了一个很酷的小雨量指示器，作为构建LED指示器的一部分。它不需要所有东西都直接连接到它上，但我们仍然希望能够跳到设备上，轻松地进行更改或尝试使用LED模块进行新的实验，而不必将其拖回车间，并将其连接到显示器、键盘、鼠标等。通过将其配置为远程外壳、远程桌面和远程文件传输，我们使其超级简单，始终可以从我们的台式计算机舒适地与PI单元交互，就像我们已将该单元连接到完整的工作站一样。</p><p>我需要什么？</p><img class="content_img" src="/image/58/588cc75369ef7d1a47372617fe0a67f3.jpg" /><p>如果您刚开始使用Raspberry Pi，我们强烈建议您查看HTG Raspberry Pi入门指南，以掌握该设备的基本知识并快速上手。</p><p>对于本教程，您需要以下内容：</p><p>
一辆运行Raspbian的树莓派。
台式或膝上型计算机。
连接PI和您的计算机的本地Wi-Fi或有线网络。</p><p>首先，本教程中的大多数步骤应该适用于其他基于Linux的PI发行版，但我们将使用Raspbian。将本教程改编到其他发行版应该不会有什么问题。</p><p>其次，我们使用一台Windows机器作为我们的联网计算机，作为远程机头/接口与Raspberry PI单元进行交互。在适当的时候，我们会尽量链接到关于在OSX和Linux上执行并行任务和工具的教程和建议阅读。</p><p>设置并连接到SSH服务器</p><p>远程命令行访问您的Raspbian安装大约是您可以对您的系统进行的最方便的小调整，而且它的启用非常简单。</p><p>在Rasbian中打开终端，桌面上的快捷方式是LXTerminal，然后输入以下命令：</p><p>向下导航到ssh并按Enter键。当系统提示有关SSH服务器的信息时，选择Enable并再次按Enter键。您将返回到Raspi-config面板；向下导航至Finish，然后按Enter关闭配置工具。这就是打开对PI的SSH访问所需做的全部工作。默认的SSH登录名和密码分别是pi和raspberry。</p><p>当您仍然坐在命令行上时，现在是检查本地网络上Raspberry PI单元的IP的好时机。在提示符下键入ifconfig，然后查看该命令的输出。如果您使用的是以太网端口，则需要在eth0部分中查找初始化地址；如果您使用的是Wi-Fi，则需要在wlan0部分中查找初始化地址。除了检查和记录IP地址之外，这也是在您的路由器中设置静态IP条目的好时机，这样您以后就不必再寻找IP了。</p><p>现在我们已经启用了SSH服务器，我们知道了登录，也知道了机器的IP地址，现在是通过SSH连接并测试它的时候了。要在Linux和OSX中执行此操作，只需在终端使用ssh命令即可。然而，Windows用户将需要像PuTTY这样的SSH客户端。</p><p>因为我们使用Windows盒来远程管理PI，所以就是PuTTY。安装PuTTY副本或解压便携版本并将其启动。PuTTY中有很多设置可以打乱，但我们只需要担心一件事就可以连接到我们的PI。在主会话界面上，只需键入您的PI的IP地址并在其下方选择SSH即可：</p><img class="content_img" src="/image/4b/4b2d3472885a2d6cb641b07831e783c8.jpg" /><p>点击底部的Open，PuTTY将为您启动一个终端窗口，连接到您的PI，并提示您登录。继续使用pi/raspberry登录：</p><img class="content_img" src="/image/bc/bc66373473d30e7472e12afda9c3f4f4.jpg" /><p>一旦SSH连接正常，从技术上讲，您可以在舒适的办公桌上远程完成本教程的其余部分-尽管我们建议您将头和键盘留在系统上，直到您完成整个项目并使一切顺利运行。</p><p>在我们继续之前，我们可以从SSH中挤出一些额外的功能。除了远程管理命令行外，您还可以使用安全复制远程传输文件。它占用大量命令行，对于传输来自多个目录的大量文件不是特别方便，但是对于一次性配置文件传输或其他小转储来说，它相当方便。在这里查看我们关于使用scp命令通过SSH复制文件的指南。</p><p>在本教程的后面，我们将更详细地介绍更加用户友好的/基于GUI的文件传输技术。</p><p>设置和配置远程桌面</p><img class="content_img" src="/image/8a/8a5102d6e92f34b8a2f7735db792a204.jpg" /><p>远程命令行访问非常棒，但是可以访问桌面进行以GUI为中心的活动也很棒。让我们将命令行的功能和桌面的功能结合起来。</p><p>尽管到目前为止我们一直将其称为“远程桌面”，但我们实际安装的工具被称为虚拟网络计算(VNC)-许多人都熟悉它的迭代，比如RealVNC和TightVNC。对于本教程，我们将在PI上安装TightVNC。为了访问基于PI的TightVNC会话，您需要一个远程客户端，例如：</p><p>
用于Windows的TightVNC桌面客户端。
用于Linux/Unix类系统的TightVNC桌面客户端。
适用于OSX的RealVNC桌面客户端</p><p>现在拿一本，我们将在这一节晚些时候把它拿出来。现在，让我们开始在您的Raspberry PI上安装TightVNC服务器。打开航站楼。输入以下命令即可开始：</p><p>这将下载并解压缩安装文件；当系统提示您继续时，请按Y。安装完成后，您将返回到提示。您可以通过以下两种方式之一启动VNC。只需对服务器运行该命令，如下所示：</p><img class="content_img" src="/image/ae/aeb9d0c1bb5d5f9524a85f13311d6fc3.jpg" /><p>将提示您输入密码以访问VNC桌面-如上面的屏幕截图所示。密码长度需要为4-8个字符。确认密码后，系统将提示您设置仅供查看的密码(您可以选择退出该步骤，就像我们所做的那样)。</p><p>或者，您也可以使用更精确(尽管键入时间更长)的命令，让您更好地控制远程计算机将如何查看桌面-最重要的是，桌面将显示什么分辨率，以便您可以在远程计算机上享受全屏视图。要指定VNC桌面的分辨率，请使用以下命令，将分辨率值(命令中的第四项)替换为远程桌面的分辨率：</p><p>如果您在设置VNC服务器实例时出错和/或想要关闭VNC服务器，只需输入以下内容(将冒号后面的数字更改为要终止的VNC实例的编号)：</p><p>现在我们已经启动并运行了VNC服务器，让我们从远程桌面连接到它。在您的计算机上启动TightVNC查看器，然后插入Raspberry PI单元的IP地址，然后输入：1如下所示：</p><img class="content_img" src="/image/63/635d4ce2c18e86ef5c8ac762b0781ef2.jpg" /><p>以下是我们成功配置VNC服务器的奖励-远程Raspberry PI设备的漂亮全屏视图：</p><img class="content_img" src="/image/4d/4d54abe90d367d61a50d01605223c81d.jpg" /><p>TightVNC和Rasbian存在一个已知问题，由于权限更改不稳定，将导致实际的显示器连接桌面出现问题(同时保持VNC服务器提供的远程桌面界面不变)。如果要在此问题成为问题之前解决此问题，请直接转到命令行并输入以下命令：</p><p>此命令将.XAuthority文件的所有权更改回用户pi-出于好奇，.XAuthority文件由Rasbian中的X-windows系统使用，TightVNC服务器安装和配置过程中的某些情况会导致权限出现小问题。</p><p>绕了这个小弯路之后，让我们继续完成远程桌面配置。</p><p>现在我们已经拥有了对Raspberry PI的完整命令行和桌面访问权限，我们需要做一个非常重要的调整。raspi-config工具将SSH服务器设置为在引导时自动启动，但VNC服务器尚未以这种方式配置。您可以跳过这一步，在需要时通过SSH在命令行手动启动服务器，但我们正在努力使其尽可能轻松，以备将来使用。现在让我们花一分钟时间为VNC服务器创建一个启动文件。</p><p>为了自动启动VNC服务器，我们需要设置一个初始化文件，Raspbian将使用该文件在引导和关闭过程中干净地启动和关闭服务器。现在让我们创建init文件。在命令行中键入以下命令：</p><p>这将在初始化目录中创建一个名为“trutvnc”的文件，并打开Nano编辑器，以便我们可以粘贴脚本。在Nano编辑器中，粘贴以下代码(确保更改1600×900分辨率值以匹配远程计算机的屏幕：</p><p>除了修改脚本的屏幕分辨率部分之外，您还可以修改另一项内容。在第14行中，如果您希望VNC到该帐户的特定桌面，则可以将命令“su pi-c”更改为除“pi”之外的任何其他用户帐户。</p><p>一旦您粘贴并修改了代码，就可以保存它了。按CTRL+X退出并在Nano中保存您的工作。一旦您返回到命令行，我们需要对该文件的权限进行一些快速更改：</p><p>现在可以执行初始化文件了。我们可以从提示符中对其进行测试：</p><p>我们要做的最后一个更改是更新rc.d文件(该文件跟踪/init.d/文件夹中有哪些初始化脚本)：</p><p>输入该命令后，您将得到文件已更新的确认信息。现在是进行真正测试的时候了：重新引导后文件是否正确加载？在命令行中输入以下命令以重新启动，并准备好使用VNC客户端稍后测试连接：</p><p>系统完成重启后，使用VNC客户端登录。如果您的VNC会话失败，请访问命令提示符，然后(从上面的测试部分)再次运行收紧tvnc start命令，以再次检查文件是否可执行以及密码是否已正确保存。</p><p>在这一点上，我们甚至更进一步的使命，完全遥控我们的树莓PI单位。通过SSH进行远程命令行访问，通过VNC进行远程桌面访问，让我们继续简化PI和台式计算机之间的文件传输过程。</p><p>设置和配置文件传输工具</p><img class="content_img" src="/image/64/64f8c26c7ac1c17d22ad87487405058c.jpg" /><p>因为我们已经设置了SSH，所以在PI和远程计算机之间设置非常简单的文件传输的最简单方法是在SSH连接上附带一个GUI界面。还记得我们在本教程前面讨论过如何在SSH上使用SCP吗？从命令行运行它会变得非常乏味、非常快速。有了GUI包装器，我们将能够花更多的时间移动文件和玩PI，而花更少的时间敲击键盘。</p><p>虽然scp命令的GUI包装器多种多样，但我们将使用一个许多人已经知道、拥有和喜爱(甚至可能没有意识到它可以进行SCP传输)的跨平台工具：FileZilla。它可用于Windows、OS X和Linux-您可以在此处获取副本。</p><p>一旦您安装了FileZilla，启动它并进入File-&gt;Site Manager。创建一个新的站点条目，命名它，并为您的PI插入用户名和密码。</p><img class="content_img" src="/image/28/28d6d89ff43be416b66234a60b7908d8.jpg" /><p>最后，确保将端口设置为22，并将Servertype设置为SFTP-SSH文件传输协议。单击底部的连接，您将看到与下面类似的视图：</p><img class="content_img" src="/image/77/77863a5889a4f955b2909a25223d00f0.jpg" /><p>您的本地目录位于左侧窗格中，PI上的远程目录位于右侧窗格中。在两者之间移动文件就像拖放文件一样简单。</p><p>利用现有的SSH文件传输是获取PI上的文件的最简单的方法，无需额外的配置，但是如果您想要配置您的PI来接收和共享文件，而不需要远程用户需要任何奇特的工具(如支持SCP的FTP客户端，如FileZilla)，我们强烈建议您查看我们指南的Samba配置部分：如何将Raspberry PI转换为低功耗网络存储设备(How to Turn a Raspberry PI to a Low-Power Network Storage Device)。阅读这些内容将使您熟悉如何在PI上设置一个基本的Samba共享，以便创建一个共享文件夹，网络上的任何人都可以轻松地访问它，而不需要任何额外的工具。</p><p>您已经配置了SSH，已经配置了VNC，并且已经设置了对PI的简单SFTP和/或Samba访问-此时，您可以启动Raspberry PI，剥离显示器、键盘和鼠标，并将其作为一台安静的无头机器放在一边。</p><p>你有一个关于树莓派项目的想法，你渴望我们为它写一个教程吗？在评论中发声，或者给我们发一封电子邮件，地址是TIPS@howtogek.com，我们会尽最大努力提供帮助。</p><div class="item_info"><span class="item_key"><a href="/tag/pi/">pi</a></span><span class="item_key"><a href="/tag/ssh/">ssh</a></span><span class="item_key"><a href="/tag/文件/">文件</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/11039.html">如何将树莓PI用作Mac的网络时光机驱动器</a><li><a href="/story/10764.html">如何超频您的覆盆子PI(不会使您的保修无效)</a><li><a href="/story/8601.html">把树莓派变成月光下的蒸汽机</a><li><a href="/story/6142.html">如何使用NOOBS享受死简单的覆盆子PI设置</a><li><a href="/story/6138.html">如何在覆盆子PI上廉价地运行低成本的MIWART积木</a><li><a href="/story/5977.html">如何将打印机添加到Raspberry PI(或其他Linux计算机)</a><li><a href="/story/5974.html">如何将树莓PI变成Google云打印服务器</a><li><a href="/story/5854.html">如何(以及为什么)将.local域分配给您的树莓PI</a><li><a href="/story/5435.html">如何将树莓PI变成永远在线的BitTorrent Box</a><li><a href="/story/5304.html">如何将树莓PI改造成低功耗的网络存储设备</a><li><a href="/story/5263.html">关于开始使用树莓派你需要知道的一切</a><li><a href="/story/5242.html">如何将MPEG-2和VC-1视频编解码器支持添加到Raspberry Pi</a><li><a href="/story/5011.html">你说的：你的书呆子圣诞清单上有什么</a><li><a href="/story/4722.html">来自Tips Box：Kindle as Raspberry Pi屏幕、iPod控制盒和轻松六度的凯文·培根(Kevin Bacon)</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>