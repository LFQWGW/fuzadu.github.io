<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>了解使用磁盘管理进行硬盘分区</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>了解使用磁盘管理进行硬盘分区</h2></div><div class="content"><img class="content_img" src="/image/2b/2bc328d58caa7ef84713c513fb460a63.jpg" /><p>在今天的“极客学校”中，我们将讨论如何使用磁盘管理…。但我们将更进一步，解释主引导记录、分区表和动态磁盘。</p><p>乍一看，磁盘管理实用程序似乎相当简单。这里有一个硬盘列表，每个硬盘上都有分区的图形表示。您可以创建和编辑分区…。但还有很多事情要做。您可以跨多个磁盘创建跨区卷、条带化卷或镜像卷，也可以创建并连接虚拟硬盘驱动器。</p><p>如果您深入研究一下，您会发现您可以在MBR(主引导记录)和GPT(GUID分区表)之间切换硬盘作为分区方案，然后您可以指定是使用基本(默认)分区，还是使用“动态”分区，这是一种允许Windows处理分区的特殊方法。</p><p>困惑？继续读下去，我们会试着用每个人都能理解的方式来解释它。</p><p>了解界面</p><p>当您第一次启动磁盘管理(可以通过右键单击Windows 8.1中的开始按钮或Windows 7中的计算机图标并选择“管理”)时，您将看到一个包含两个窗格的界面(这可以通过右键单击Windows 8.1中的“开始”按钮或Windows 7中的“计算机”图标并选择“管理”来完成)。卷列表位于顶部，物理驱动器列表位于底部。</p><p>底部的面板不仅显示了物理驱动器的列表，还显示了每个驱动器上的分区或卷的图形表示，包括一系列有用的信息。</p><img class="content_img" src="/image/82/8287628af974970888b643c753bc8a87.png" /><p>在上面的屏幕截图中，您会注意到驱动器显示了额外的信息-您可以看到C：驱动器是引导驱动器，而系统保留分区是活动分区。两个分区都是主分区。该系统保留分区实际上包含引导文件，因此计算机的BIOS最初从该分区引导，然后Windows通过C：分区加载。</p><p>如果选择驱动器或分区并使用操作菜单，您将看到大多数选项的列表，包括如何创建跨区卷、条带卷或镜像卷，以及如何在MBR/GPT磁盘类型或基本/动态磁盘类型之间切换。我们稍后会解释这件事。</p><img class="content_img" src="/image/a4/a4a22739836af5073a4cfdfba746c85c.png" /><p>如果右键单击某个分区，您将看到不同的操作列表-您可以更改驱动器的驱动器号或路径(稍后将详细介绍)，也可以收缩/扩展卷、格式化它、添加镜像或删除它。</p><img class="content_img" src="/image/f4/f422ed50dff9fae9cbfdb56120607515.png" /><p>我们稍后会再次提到这一点，但值得立即注意的是：软件RAID(如镜像、条带化或跨区)不是您想要做的事情，如果您有选择的话。使用硬件RAID总是更好的选择。不过，了解分区很重要。</p><p>初始化磁盘并选择分区样式</p><img class="content_img" src="/image/fe/fed1fc4b8da33242d102d3c58b643df0.png" /><p>您是否曾将驱动器插入PC，结果却出现一个对话框，要求您初始化磁盘？</p><p>实际上，Windows没有检测到任何分区表格式，所以它会要求您“初始化”，这实际上只是写出一个新的空白分区表。在Windows的现代版本中，这意味着您可以在MBR和GPT之间进行选择。</p><p>注意：Windows没有识别任何分区信息并不意味着您的驱动器是空的。如果您知道驱动器工作正常，则可能是驱动程序有问题，或者在某些情况下，如果您插入了外部驱动器，则可以将其卸下，然后重新插入。当然，如果您选择GPT作为分区表，PC的BIOS也可能无法处理它。</p><p>使用MBR(主引导记录)</p><p>如果要格式化要插入不同计算机的驱动器，通常需要使用MBR分区“样式”，因为这是一种非常旧的格式，可以在任何地方使用，因为任何具有常规BIOS的计算机都支持使用MBR分区的硬盘驱动器。</p><p>使用UEFI的现代计算机正在放弃MBR支持，转而使用称为GPT(Guid Partition Table)的更新、更好的替代方案，因为MBR存在许多问题和限制。</p><p>这些限制之一是MBR最多只能支持4个主分区。如果您想使用4个以上的分区，您需要将第四个分区设置为“扩展”主分区，这样就可以在其中容纳“逻辑”分区。值得庆幸的是，如今所有这些都发生在磁盘管理的幕后，但从技术的角度来看，这不是处理问题的最佳方式，而且存在一些奇怪的兼容性问题。</p><p>下一个限制是，使用MBR格式的分区的最大大小为2 TiB，这明显低于您从现代硬盘驱动器中可以获得的大小，尤其是从使用两个2 TB或3 TB硬盘驱动器的硬件RAID中可以获得的大小。</p><p>此限制源于这样一个事实，即存在32位扇区列表，并且硬盘驱动器通常每个扇区有512个字节。因此，512*2^32=2TiB，因此您将始终看到MBR分区有该限制。</p><p>好消息是，如果您需要一个解决方案，可以找到一个解决方案。如果您有一个使用4k扇区的较新硬盘，则实际理论限制为16 TiB，因为4096*2^32=16 TiB。然而，实际上，只迁移到GPT分区会更好，因为GPT分区没有这样的限制。</p><p>使用GPT(GUID分区表)</p><p>使用UEFI而不是BIOS的较新计算机需要在引导驱动器上使用较新的GPT分区表“样式”-虽然其中一些支持“传统BIOS”模式来处理较旧样式的引导，但您通常只需使用GPT即可。</p><p>从Windows Vista开始，您通常可以在使用较新版本BIOS的计算机上使用数据驱动器上的GPT分区，但不能将它们用作可引导驱动器。从我们读过的所有文档来看，32位Windows XP并不支持它。</p><p>GPT在同一硬盘上最多支持128个分区，每个分区可以是9.4 ZB，也就是10亿TB，这在今天的术语中是一个有点荒谬的数字。不是像MBR那样只存储分区表的单个副本，而是同时存在主副本和备份副本，并且它们具有循环冗余校验来验证数据是否损坏。</p><p>所有的gpt磁盘在驱动器的开头都包含一个“Protective MBR”，它基本上是驱动器开头的一个假的MBR，老式的MBR驱动器会把它放在…上。并且伪分区表示出整个驱动器具有单个分区。这可以保护您免受旧工具损坏驱动器的影响，因为它们没有GPT支持。但是，它不会使文件系统在较旧的计算机上可读。</p><p>可引导的GPT驱动器需要一些东西。首先，您需要一个EFI系统分区，其大小至少为100-260MB，具体取决于您的驱动器，该分区将包含引导加载程序和其他信息。</p><p>为了更好地理解MBR和GPT之间的区别，我们发现此图形深埋在Microsoft文档中，并决定在这里也为您显示它。请注意LDM数据分区的内容，我们稍后将介绍它。</p><img class="content_img" src="/image/8e/8ece439517e5aa868ba99284f9826270.png" /><p>通过右键单击磁盘管理中的驱动器，您实际上可以在MBR和GPT分区类型之间来回切换。问题是，在执行此操作之前，您需要删除磁盘上的所有分区，这确实会降低该功能的用处。</p><p>选择磁盘类型：基本或动态</p><img class="content_img" src="/image/8b/8ba0180cbd54d0ce1a9d83fa85ca3d0f.png" /><p>磁盘管理中的另一个概念是非常混乱的“动态”磁盘，而不是默认的“基本”磁盘。更令人困惑的是，您还可以在同一菜单上选择MBR和GPT磁盘。</p><p>使用MBR或GPT分区格式化创建磁盘时，可以使用MBR或GPT规范创建常规分区。对于MBR，这将是主分区和扩展/逻辑分区之间的选择，而对于GPT，它将只是常规GUID分区。Windows将其称为“基本”磁盘。</p><p>Windows中的另一个选项是使用“动态磁盘”，它允许Windows控制您的分区，而不是使用分区规范。这些分区称为卷，而不是分区(实际上，Windows始终将任一类型的分区称为卷)。</p><p>幕后发生的事情是，Windows创建一个常规的MBR或GPT分区结构来填充整个驱动器，然后Windows将允许您管理该驱动器上的“卷”，这些卷起到分区的作用，甚至提供额外的功能。因为动态磁盘仍然依赖于底层的MBR或GPT结构，所以您应该明智地在它们之间进行选择-如果您需要一个巨大的驱动器，GPT可能是最佳选择。</p><p>Windows使用逻辑磁盘管理器(LDM)数据库来存储卷类型、驱动器号和所有其他信息，它甚至会将此数据库复制到计算机上的每个动态驱动器以进行备份。在MBR驱动器上，此数据存储在驱动器的最后1 MB中，而在GPT驱动器中，Windows将创建一个1 MB的隐藏分区，称为LDM元数据分区。</p><p>镜像您的系统驱动器</p><p>您可以轻松地将系统驱动器转换为动态磁盘，以便对其进行镜像。您只需右键单击系统驱动器并选择添加镜像，即可启动镜像向导。</p><img class="content_img" src="/image/99/99e3d88127a8b6ce8f421a0aefce16bc.png" /><p>系统将提示您将磁盘转换为动态磁盘，而不是基本磁盘，并给出无法引导任何其他操作系统的警告。没错，动态磁盘打破了双引导的情况。</p><img class="content_img" src="/image/a6/a6c2d767a358a6e94d0b1559f34aa6f1.png" /><p>一旦您配置了镜像，您的计算机将减慢速度，因为系统驱动器中的所有数据都会复制到另一个驱动器。从那一刻起，您的数据应该在两个驱动器上保持同步。</p><img class="content_img" src="/image/d4/d40bd17965aa59e051c38e48407f1757.png" /><p>您可以右键单击镜像的驱动器以“中断”镜像(这将停止镜像，但不会影响每个驱动器上的所有内容)，也可以删除镜像。</p><p>注意：不能将MBR驱动器镜像到GPT驱动器。</p><p>动态磁盘的卷类型</p><p>当您使用动态磁盘上的卷时，您可以选择将该卷扩展或跨越多个驱动器，可以条带化或镜像，或者在服务器版本中甚至可以使用RAID 5。您可以拥有的卷数量也没有真正的限制，尽管数量过多没有意义。</p><p>以下是您可以在动态磁盘上创建的卷类型：</p><p>
简单卷-这是一个常规的“分区”。如果磁盘类型为“Basic”，这将创建一个实际分区。
条带化卷-数据跨多个硬盘驱动器条带化，以便每隔一段数据在驱动器之间交错，以实现最高性能。没有冗余。
跨区卷-数据在一个驱动器上填满，然后在下一个驱动器变得更满时填满。两个或更多的驱动器基本上是用磁带连接在一起，形成一个更大的磁盘。这里也没有冗余。
镜像卷-对于家庭用户，这是您将通过软件选项获得的唯一形式的冗余。读取性能应该会更快，但写入性能可能会稍微慢一些，因为Windows必须将所有内容都写入两个驱动器。
RAID5卷-仅适用于服务器版本，但它可以跨3个或更多硬盘驱动器进行条带化，并包括奇偶校验条带，以防止在驱动器发生故障时丢失数据。</p><p>注意：您不能将动态磁盘用于可移动/便携式驱动器。</p><p>Windows 8改变了一切</p><p>相关：如何使用Windows 10的存储空间镜像和合并驱动器</p><p>Windows 8中最有趣的功能之一是称为存储空间(Storage Spaces)的功能，它完全取代了磁盘管理和所有这些所需的知识，成为一个极其易于使用的系统，为您的数据驱动器提供类似RAID的功能。</p><p>您不能将存储空间用于您的引导驱动器，但是使用它很容易-而且它支持冗余，所以如果您的一个硬盘坏了，您不会失去一切。</p><p>要访问它，请进入控制面板并搜索存储空间。然后单击“创建新的池和存储空间”。</p><img class="content_img" src="/image/d7/d7a05880d26d0d94b28575c09cb45a0e.png" /><p>在下一个屏幕上选择驱动器后，单击创建池选项。</p><img class="content_img" src="/image/0e/0ef17328242f426f7c7eacafead1bb20.png" /><p>您可以从多个选项中进行选择，然后创建存储池。有趣的是，一旦您这样做了，它实际上将向磁盘管理报告，就像它是单个驱动器一样-与硬件RAID一样。</p><img class="content_img" src="/image/ca/cafd0dd1d99e28c84d91586bff7ad027.png" /><p>我们早些时候说过，我们还会再说一遍：如果可以的话，您应该始终尝试并投资于硬件RAID，而不是使用软件替代品。但是学习新东西不是很棒吗？</p><p>将卷装载为驱动器号或文件夹</p><p>在我们开始之前还有最后一件事：您可以通过右键单击，然后从菜单中选择“更改驱动器号和路径”来更改除系统驱动器之外的任何驱动器的挂载点。在此对话框中，您可以更改驱动器号，甚至可以添加驱动器上某个文件夹的路径，分区将装载到该文件夹中，就像在Linux上一样。</p><img class="content_img" src="/image/5b/5b927331f3f01e4256fd9c4d01a097aa.png" /><p>这是一种非常好的方式来增加系统空间，而不必将东西移动到D：驱动器或使用符号链接-只需将第二个驱动器挂载到您的用户文件夹中即可。</p><p>还有什么？</p><p>您还可以创建一个VHD(虚拟硬盘)文件并将其挂载为驱动器号-这与挂载ISO映像非常相似。您可以扩展和缩小分区，尽管它在磁盘管理中不能很好地工作。</p><p>您还可以使用命令行diskpart.exe实用程序访问所有相同的命令以及更多命令。它非常强大，我们今天没有时间讲到这一点，但我们将在以后的课程中讨论这一点。</p><p>如果您想格式化您的硬盘，并且您不确定要选择哪种格式，您可能应该坚持使用NTFS。</p><div class="item_info"><span class="item_key"><a href="/tag/分区/">分区</a></span><span class="item_key"><a href="/tag/驱动器/">驱动器</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14139.html">如何将Linux主目录移动到另一个驱动器</a><li><a href="/story/11098.html">如何对OneNote笔记本和分区进行密码保护</a><li><a href="/story/10801.html">如何通过重新对齐固态硬盘分区来加快其速度</a><li><a href="/story/9335.html">如何将多个分区合并为单个分区</a><li><a href="/story/8290.html">如何在Windows中从驱动器中删除EFI系统分区或GPT保护分区</a><li><a href="/story/8144.html">如何使用Mac的磁盘实用程序对驱动器进行分区、擦除、修复、恢复和复制</a><li><a href="/story/7128.html">什么是系统保留分区，您能将其删除吗？</a><li><a href="/story/7126.html">Windows 8是否必须安装在NTFS分区上？</a><li><a href="/story/6719.html">初学者极客：硬盘分区讲解</a><li><a href="/story/6025.html">如何在Windows下回收Raspberg PI的SD卡的全部容量</a><li><a href="/story/5902.html">如何修复Linux上的“警告：重新读取分区表失败，错误22：无效参数”错误</a><li><a href="/story/5341.html">删除PC的恢复分区并控制硬盘</a><li><a href="/story/4727.html">如何在VirtualBox或VMware中放大虚拟机磁盘</a><li><a href="/story/4436.html">如何在安装Ubuntu后创建单独的Home分区</a><li><a href="/story/4339.html">如何调整Ubuntu分区的大小</a><li><a href="/story/4043.html">如何在Linux上使用Fdisk管理分区</a><li><a href="/story/3283.html">Hackintoshing极客指南-第3部分：升级到Lion和双引导</a><li><a href="/story/2562.html">如何协调Windows和Ubuntu的双引导设置</a><li><a href="/story/2560.html">如何为您的Linux PC选择分区方案</a><li><a href="/story/159.html">在Windows 7、8.x、10或Vista中免费调整分区大小</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>