<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>黑客如何通过SQL注入和DDoS攻击网站</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>黑客如何通过SQL注入和DDoS攻击网站</h2></div><div class="content"><img class="content_img" src="/image/e0/e0f154371923eb50d939012885f1f19c.png" /><p>即使你只是松散地关注过黑客组织匿名者和LulzSec的事件，你可能也听说过网站和服务被黑客攻击，比如臭名昭著的索尼黑客事件。你有没有想过他们是怎么做到的？</p><p>这些小组使用的工具和技术有很多，虽然我们不想给您提供手册来亲自做这件事，但了解发生了什么是很有用的。您经常听到的关于它们的两种攻击是“(分布式)拒绝服务”(DDoS)和“SQL注入”(SQLI)。以下是它们的工作原理。</p><p>xkcd提供的图像</p><p>拒绝服务攻击</p><img class="content_img" src="/image/b0/b0289ed77e38fc73f28ac9836dae07bf.png" /><p>那是什么？</p><p>“拒绝服务”(有时称为“分布式拒绝服务”或DDoS)攻击发生在系统(在本例中为Web服务器)一次收到如此多的请求，以至于服务器资源过载，导致系统简单地锁定并关闭的情况下，就会发生“拒绝服务”(有时称为“分布式拒绝服务”或DDoS)攻击。成功的DDoS攻击的目标和结果是目标服务器上的网站无法用于合法通信量请求。</p><p>它怎麽工作?</p><p>举例说明DDoS攻击的逻辑可能是最好的。</p><p>想象一下，一百万人(攻击者)聚集在一起，目的是通过关闭他们的呼叫中心来阻碍X公司的业务。攻击者进行协调，以便在周二上午9点，他们都会拨打X公司的电话号码。最有可能的是，X公司的电话系统不能一次处理一百万个电话，所以所有的来电线路都会被攻击者占用。结果是合法的客户呼叫(即那些不是攻击者的呼叫)无法接通，因为电话系统无法处理来自攻击者的呼叫。因此，在本质上，由于合法请求无法通过，X公司可能会失去业务。</p><p>Web服务器上的DDoS攻击的工作方式与此完全相同。由于在Web服务器处理请求之前，几乎无法知道合法请求与攻击者之间的流量来源，因此这种类型的攻击通常非常有效。</p><p>执行攻击</p><p>由于DDoS攻击的“蛮力”性质，您需要让多台计算机协调一致才能同时进行攻击。再来看看我们的呼叫中心示例，这将要求所有攻击者都知道在上午9点打电话，并且实际上是在那个时间打电话。虽然这一原理在攻击Web服务器时肯定有效，但当使用僵尸计算机而不是实际的有人操作的计算机时，就会变得容易得多。</p><p>正如您可能知道的，有许多恶意软件和特洛伊木马的变体，一旦进入您的系统，它们就会处于休眠状态，偶尔还会“打电话回家”获取指令。例如，这些指令之一可以是在上午9点向X公司的Web服务器发送重复请求。因此，只需对相应恶意软件的主位置进行一次更新，单个攻击者就可以立即协调数十万台受危害的计算机执行大规模DDoS攻击。</p><p>利用僵尸计算机的美妙之处不仅在于它的有效性，还在于它的匿名性，因为攻击者实际上根本不必使用他们的计算机来执行攻击。</p><p>SQL注入攻击</p><img class="content_img" src="/image/ef/efb7138a3d14ee2cca6715262e12b213.png" /><p>那是什么？</p><p>“SQL注入”(SQLI)攻击是一种利用糟糕的Web开发技术，通常与有缺陷的数据库安全相结合的攻击。成功攻击的结果可能从冒充用户帐户到完全危害相应的数据库或服务器。与DDoS攻击不同，如果Web应用程序编程得当，SQLI攻击是完全可以轻松防范的。</p><p>执行攻击</p><p>每当您登录网站并输入用户名和密码时，为了测试您的凭据，Web应用程序可能会运行如下查询：</p><p>注意：SQL查询中的字符串值必须用单引号引起来，这就是它们出现在用户输入值的前后的原因。</p><p>因此，输入的用户名(Myuser)和密码(Mypass)的组合必须与USERS表中的条目匹配，才能返回用户ID。如果没有匹配，则不返回userid，因此登录凭据无效。虽然特定的实现可能不同，但其机制是相当标准的。</p><p>现在让我们来看一个模板身份验证查询，我们可以替换用户在Web表单上输入的值：</p><p>乍一看，对于轻松验证用户而言，这似乎是一个简单而合乎逻辑的步骤，但是，如果在此模板上执行用户输入值的简单替换，则很容易受到SQLI攻击。</p><p>例如，假设在用户名字段中输入“myuser‘-”，在密码中输入“错误通过”。在我们的模板查询中使用简单的替换，我们将获得以下结果：</p><p>此语句的一个关键是包含两个破折号(--)。这是SQL语句的BEGIN COMMENT标记，因此将忽略出现在两个破折号(包括这两个破折号)之后的任何内容。实际上，上述查询由数据库执行，如下所示：</p><p>这里明显的遗漏是缺少密码检查。通过将这两个破折号作为User字段的一部分，我们完全绕过了密码检查条件，并且能够以“myuser”身份登录，而不需要知道各自的密码。这种操作查询以产生意想不到的结果的行为是SQL注入攻击。</p><p>能造成什么损害呢？</p><p>SQL注入攻击是由疏忽和不负责任的应用程序编码引起的，是完全可以预防的(我们将在稍后讨论这一点)，但是可以造成的破坏程度取决于数据库设置。为了使Web应用程序与后端数据库通信，应用程序必须提供数据库的登录(请注意，这与用户登录网站本身不同)。根据Web应用程序需要的权限，此相应的数据库帐户可能需要任何权限，从仅对现有表的读/写权限到完全数据库访问权限。如果这一点现在还不清楚，下面的几个例子应该有助于提供一些清晰的信息。</p><p>根据上面的示例，您可以看到，例如，通过输入“your user‘--”、“admin’--”或任何其他用户名，我们可以立即以该用户身份登录到站点，而无需知道密码。一旦我们进入系统，就不知道我们实际上不是该用户，因此我们拥有对相应帐户的完全访问权限。数据库权限不会为此提供安全网，因为通常情况下，网站必须至少对其各自的数据库具有读/写访问权限。</p><p>现在，让我们假设网站完全控制了它各自的数据库，这使得能够删除记录、添加/移除表、添加新的安全帐户等。重要的是要注意，一些Web应用程序可能需要这种类型的权限，因此授予完全控制并不是一件自动的坏事。</p><p>因此，为了说明在这种情况下可能造成的损害，我们将使用上面漫画中提供的示例，在User Name字段中输入以下内容：“Robert‘；Drop table Users；--”。在简单替换之后，身份验证查询变为：</p><p>注意：SQL查询中的分号用于表示特定语句的结束和新语句的开始。</p><p>它由数据库执行，如下所示：</p><p>因此，我们使用SQLI攻击删除了整个USERS表。</p><p>当然，情况可能更糟，因为根据允许的SQL权限，攻击者可以更改值、将表(或整个数据库本身)转储为文本文件、创建新的登录帐户，甚至劫持整个数据库安装。</p><p>防止SQL注入攻击</p><p>正如我们前面多次提到的，SQL注入攻击是可以轻松预防的。Web开发的一个基本规则是，您永远不要盲目信任用户输入，就像我们在上面的模板查询中执行简单替换时所做的那样。</p><p>SQLI攻击很容易通过所谓的清理(或转义)您的输入来挫败。清理过程实际上相当简单，因为它实际上所做的全部工作就是适当地处理任何内联单引号(‘)字符，以便它们不能用于在SQL语句中过早地终止字符串。</p><p>例如，如果要在数据库中查找“O‘Neil”，则不能使用简单的替换，因为O后面的单引号会导致字符串过早结束。相反，您可以使用相应数据库的转义字符对其进行清理。让我们假设内联单引号的转义字符在每个引号前面加上一个\符号。所以“O‘Neal”会被净化为“O’Neil”</p><p>这一简单的安全措施几乎可以防止SQLI攻击。为了说明这一点，让我们重新查看前面的示例，并在清理用户输入时查看结果查询。</p><p>myuser‘--/错误的密码：</p><p>因为myuser后面的单引号被转义(意味着它被认为是目标值的一部分)，所以数据库将逐字搜索用户名“myuser‘--”。此外，由于破折号包含在字符串值中，而不是SQL语句本身中，因此它们将被视为目标值的一部分，而不是解释为SQL注释。</p><p>Robert‘；DROP TABLE USERS；--/错误通过：</p><p>通过简单地转义Robert后面的单引号，分号和破折号都包含在用户名搜索字符串中，因此数据库将按字面意思搜索“Robert”；DROP TABLE USERS；--“，而不是执行表DELETE。</p><p>在摘要中</p><p>虽然网络攻击在发展，变得更加复杂，或者集中在不同的入口点，但重要的是要记住防范经过尝试和真实的攻击，这些攻击一直是几个免费提供的、旨在利用这些攻击的“黑客工具”的灵感来源。</p><p>某些类型的攻击(如DDoS)不容易避免，而其他类型的攻击(如SQLI)则可以。然而，这些类型的攻击可能造成的损害从不便到灾难性不等，具体取决于所采取的预防措施。</p><div class="item_info"><span class="item_key"><a href="/tag/攻击/">攻击</a></span><span class="item_key"><a href="/tag/数据库/">数据库</a></span><span class="item_key"><a href="/tag/用户/">用户</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/11235.html">什么是拒绝服务攻击和DDoS攻击？</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>