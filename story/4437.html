<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>在Ubuntu上调整和配置SUDO的8种方法</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>在Ubuntu上调整和配置SUDO的8种方法</h2></div><div class="content"><img class="content_img" src="/image/d0/d07d1dd566cb480a79b8ad0dde39338e.png" /><p>与Linux上的大多数内容一样，sudo命令非常可配置。您可以让sudo在不询问密码的情况下运行特定命令、将特定用户限制为仅允许使用已批准的命令、记录使用sudo运行的命令，等等。</p><p>sudo命令的行为由系统上的/etc/sudoers文件控制。必须使用visudo命令编辑此命令，该命令执行语法检查以确保您不会意外破坏文件。</p><p>指定具有SUDO权限的用户</p><p>您在安装Ubuntu时创建的用户帐户被标记为管理员帐户，这意味着它可以使用sudo。安装后创建的任何其他用户帐户都可以是管理员帐户或标准用户帐户-标准用户帐户没有sudo权限。</p><p>您可以通过Ubuntu的用户帐户工具以图形方式控制用户帐户类型。要打开它，请在面板上单击您的用户名，然后选择用户帐户或在仪表盘中搜索用户帐户。</p><img class="content_img" src="/image/5e/5ea1c299d8212d3dce1dea704905d230.png" /><p>让数户忘记你的密码</p><p>默认情况下，sudo在您键入密码后会记住密码15分钟。这就是在使用sudo快速连续执行多个命令时只需键入密码一次的原因。如果您要让其他人使用您的计算机，并且希望sudo在下次运行时询问密码，请执行以下命令，sudo将忘记您的密码：</p><img class="content_img" src="/image/ec/ec581023444267ac83d8ec09f25b5029.png" /><p>始终要求输入密码</p><p>如果您希望每次使用sudo时都得到提示-例如，如果其他人经常访问您的计算机-您可以完全禁用密码记忆行为。</p><p>与其他sudo设置一样，此设置包含在/etc/sudoers文件中。在终端运行visudo命令，打开文件进行编辑：</p><p>尽管名字不同，但这个命令默认使用新的用户友好的Nano编辑器，而不是Ubuntu上的传统vi编辑器。</p><p>在文件中的其他默认行下面添加以下行：</p><img class="content_img" src="/image/cc/cc78ce24e4ffd129bdde3dfbba3b8b53.png" /><p>按Ctrl+O保存文件，然后按Ctrl+X关闭Nano。SUDO现在将始终提示您输入密码。</p><p>更改密码超时</p><p>要设置不同的密码超时-可以是较长的密码超时(如30分钟)，也可以是较短的密码超时(如5分钟)，请执行上述步骤，但对TIMESTAMP_TIMEOUT使用不同的值。该数字对应于sudo将记住您的密码的分钟数。要让sudo记住您的密码5分钟，请添加以下行：</p><img class="content_img" src="/image/d2/d23ff131a9322a693f201fc38c340d0b.png" /><p>永远不要口令</p><p>您还可以让sudo从不询问密码-只要您登录了，您添加了sudo前缀的每个命令都将以root权限运行。为此，请将以下行添加到sudoers文件中，其中username是您的用户名：</p><img class="content_img" src="/image/62/627906aea808ac9b76cee19d2dfed2b4.png" /><p>您还可以更改%sudo行-即允许sudo组中的所有用户(也称为管理员用户)使用sudo的行-使所有管理员用户不需要密码：</p><p>在没有密码的情况下运行特定命令</p><p>您还可以指定在使用sudo运行时从不需要密码的特定命令。请指定命令的位置，而不是在上面的NOPASSWD后使用“ALL”。例如，以下行将允许您的用户帐户在没有密码的情况下运行apt-get和shutdown命令。</p><p>当在脚本中使用sudo运行特定命令时，这可能特别有用。</p><img class="content_img" src="/image/46/462d7df51e9469b29c45eac23fb57bc2.png" /><p>仅允许用户运行特定命令</p><p>虽然您可以将特定命令列入黑名单并阻止用户使用sudo运行它们，但这并不是非常有效。例如，您可以使用sudo指定用户帐户不能运行SHUTDOWN命令。但是该用户帐户可以使用sudo运行cp命令，创建shutdown命令的副本，并使用该副本关闭系统。</p><p>更有效的方法是将特定命令列入白名单。例如，您可以授予标准用户帐户使用apt-get和shutdown命令的权限，但仅此而已。要执行此操作，请添加以下行，其中StandardUser是用户的用户名：</p><img class="content_img" src="/image/a2/a225d094cf4eadf99b03f7066627380b.png" /><p>以下命令将告诉我们用户可以使用sudo运行哪些命令：</p><img class="content_img" src="/image/cb/cb486449987f86c1c6285d056cfff805.png" /><p>记录SUDO访问</p><p>您可以通过添加以下行来记录所有sudo访问。/var/log/sudo只是一个示例；您可以使用您喜欢的任何日志文件位置。</p><img class="content_img" src="/image/0f/0fd79778fabddf7c369936b951933954.png" /><p>使用如下命令查看日志文件的内容：</p><img class="content_img" src="/image/2e/2e0c16e9a93964e7da41d67140af30d9.png" /><p>请记住，如果用户具有无限制的sudo访问权限，则该用户可以删除或修改此文件的内容。用户还可以使用sudo访问root提示符，并运行不会被记录的命令。当与限制访问系统命令子集的用户帐户配合使用时，日志记录功能最有用。</p><div class="item_info"><span class="item_key"><a href="/tag/sudo/">sudo</a></span><span class="item_key"><a href="/tag/用户/">用户</a></span><span class="item_key"><a href="/tag/命令/">命令</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/9291.html">使用APT代替APT-GET简化命令行包管理</a><li><a href="/story/7181.html">如何更改sudo在再次提示您之前等待的时间</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>