<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何定制您的Ubuntu内核</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何定制您的Ubuntu内核</h2></div><div class="content"><p>内核定制并不适合每个人。请注意，在您尝试任何这些操作之前，它可能会破坏您的系统。</p><p>您想要定制内核的原因有很多。您可能希望将内核削减为只提供必要的服务，特别是当您运行的服务器或专用设备只需要必要的服务时更是如此。您可能还需要为内核打补丁，以支持当前运行的内核不支持的硬件。</p><p>本文不会解释如何修补您的内核，而只是说明如何自定义您当前的内核。我还会有另一篇后续文章，解释如何修补内核，以及您想要这样做的一些实际原因。</p><p>首先，我们需要找出当前运行的内核版本。为此，我们将使用uname命令</p><p>现在我们需要为您的内核安装Linux源代码，注意我运行的是2.6.17-10内核，所以安装程序行反映了这一点。出于本文的目的，您可以用内核号代替您正在运行的任何代码。我们还需要安装curses库和其他一些工具来帮助我们编译。</p><p>如果您想知道Linux源代码安装到哪里，可以使用dpkg命令告诉您包中的文件。以下是我系统上的输出：</p><p>我们可以看到，源代码已经以压缩文件的形式安装到/usr/src目录中。</p><p>为了方便起见，我们将使用sudo打开一个新shell，从而将自己置于根模式。有其他方法可以做到这一点，但我更喜欢这种方式。</p><p>现在将目录更改为源位置，以便我们可以安装。请注意，如果没有安装bunzip实用程序，您可能需要安装它。(它在我的上面)</p><p>复制现有内核配置以用于自定义编译过程。请注意，`字符是波浪号下面的字符~</p><p>现在，我们将启动使我们可以自定义内核的实用程序：</p><p>首先，下到加载备用配置文件，然后加载.config文件。(只需按Enter键)</p><img class="content_img" src="/image/fc/fc3ff7a81725b54e6a55a1cc553eeba2.png" /><p>既然我们已经进入了该实用程序，我们就可以为我们的自定义内核设置选项了。导航很简单，如果你迷路了，顶部会有一个图例。我决定选择联网，然后按Enter键进入那个类别。</p><img class="content_img" src="/image/75/75bc242a90c98d2634e906b22c18bf1a.png" /><p>业余无线电支持？这该死的是用来干嘛的？您将通过*注意到它是内置于内核中的。</p><img class="content_img" src="/image/87/87874a0f42c02075d5e967b9d458a036.png" /><p>按下？键，我们可以看到该特定项目的帮助。以下是解释：</p><img class="content_img" src="/image/8f/8fccbb6918fb1f683e8a2c58130a9dc1.png" /><p>好的，我马上就把它停用。到底为什么要把它安装在我的内核中呢？我按Esc退出帮助屏幕，然后按N将其从内核中排除。</p><p>完成您想要的任何选择后，按Exit并在出现提示时保存配置。</p><p>现在我们已经准备好要编译的配置了。首先，我们将进行一次清理，以确保一切都为编译做好了准备。</p><p>接下来，我们将实际编译内核。这会花很长时间，所以去找些有趣的事情去做吧。</p><p>此过程将在/usr/src目录中创建两个包含内核的.deb文件。linux-image*文件是实际的内核映像，如果另一个文件包含，您可以使用dpkg安装这两个文件。您系统上的文件名可能不同。</p><p>请注意，当您运行这些下一步命令时，这会将新内核设置为新的默认内核。这可能会砸坏东西的！如果您的机器无法引导，您可以在GRUB加载菜单中按Esc，然后选择您的旧内核。然后，您可以在/boot/GRUB/menu.lst中禁用内核，或者尝试重新编译。</p><p>现在重新启动您的机器。如果一切正常，您应该正在运行新的自定义内核。您可以使用uname进行检查。请注意，您机器上的确切数字会有所不同。</p><p></p><p>我计划写一系列关于内核定制的文章，所以请订阅RSS提要以获取更新。</p><p>此外，为了充分披露信息，我从HowtoForge的文章中了解了如何做到这一点，这是一个很棒的网站，提供了一些关于Linux的非常高级的教程。您会注意到，本文中的许多步骤都是相似的，尽管我试图使本文更加“Ubuntu”。</p><div class="item_info"><span class="item_key"><a href="/tag/内核/">内核</a></span><span class="item_key"><a href="/tag/安装/">安装</a></span><span class="item_key"><a href="/tag/注意/">注意</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/2837.html">如何阻止百胜更新内核</a><li><a href="/story/2459.html">什么是Linux内核，它是做什么的？</a><li><a href="/story/1619.html">如何在Ubuntu中隐藏内核更新</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>