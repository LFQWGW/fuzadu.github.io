<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何使用MySQL跨多个设备同步您的KODI库</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何使用MySQL跨多个设备同步您的KODI库</h2></div><div class="content"><img class="content_img" src="/image/db/dbb7a3f5e3d1206f9be0d33cbf3a1843.jpg" /><p>Kodi仍然是最强大的媒体中心应用程序之一，它可以在从功能强大的媒体PC到小型Raspberry PI的一切设备上运行。但是如果你的房子里有多台电视，如果它们都保持同步不是很好吗？</p><p>默认情况下，如果您有多台KODI机器，它们将无法识别彼此。你在一台电视上看的剧集不会在另一台电视上显示为“已观看”。不过，如果你的卧室kodi box知道你在起居室里看了什么，那不是很好吗？反之亦然。如果你能停止在起居室里看电影，从你在房子的其他地方停下来的地方继续看，那会不会很好？</p><p>嗯，这是可能的-只是需要一些设置。下面是如何做到这一点的。</p><p>您需要的是什么</p><p>我们即将进行的同步魔术的核心是MySQL数据库。如果您以前从未使用过，请不要惊慌！它确实需要一些技术诀窍，但我们会在这里指导您的每一步。如果你紧跟着走，应该不会有任何问题。</p><p>我们要做的是安装一个免费版本的MySQL服务器，然后指示您的所有KODI机器使用该服务器上的数据库作为其库(而不是在每台单独的计算机上使用单独的数据库)。从那时起，当Kodi检查您是否看过特定的电视节目集或电影、暂停媒体或设置书签时，它将不仅仅针对您所站的特定媒体中心，而是针对屋内的所有媒体中心。</p><p>对于此项目，您需要以下各项：</p><p>
不止一个安装了Kodi的媒体中心(它们都需要是相同的Kodi基础版本-在本指南中我们将使用v17“氪”)。
免费的MySQL社区服务器--Kodi wiki推荐使用5.5版，而不是较新的5.7版，所以这就是我们在本教程中使用的版本。
运行MySQL服务器的始终在线或几乎始终在线的计算机。</p><p>您可以在使用媒体中心时持续打开的任何计算机上安装MySQL服务器。在我们的例子中，我们将把MySQL安装在存储电影和电视节目的同一台始终在线的家庭服务器上-这样，只要媒体对Kodi可用，数据库就会随时可用。</p><p>第一步：安装MySQL Server</p><p>在本教程中，我们将在运行Windows10的媒体服务器上安装MySQL。我们的安装说明应与任何版本的Windows相匹配。其他操作系统请参考MySQL5.5手册。</p><p>MySQL的安装非常简单。只需下载服务器安装应用程序并运行即可。接受许可协议和“典型”安装。完成后，确保选中“启动MySQL实例配置向导”，然后单击Finish。</p><img class="content_img" src="/image/40/40c2d6c6d2d46c94bace93ec361b32ca.png" /><p>MySQL配置向导将启动，并为您提供在详细配置和标准配置之间进行选择的选项。选择标准配置，然后单击下一步。</p><img class="content_img" src="/image/42/42d51c5cd84ca12a27278f0a52337553.png" /><p>在下一个屏幕上，选中“作为Windows服务安装”，将其命名为MySQL-或者，如果您出于某种目的运行多个MySQL服务器，则给它一个唯一的名称-然后选中“自动启动MySQL服务器”，以确保MySQL服务器在您需要时始终处于打开状态。</p><img class="content_img" src="/image/d1/d1dc2127fd4271239dd172363175634a.png" /><p>在下一个屏幕上，选中Modify Security Settings，插入新的root密码，然后选中Enable root access from remote Machines。</p><img class="content_img" src="/image/ad/ad4c55e8a6bfcee10987146f2b145ee6.png" /><p>单击进入最后一个屏幕，然后按Execute，让向导使用您指定的参数设置所有内容。完成后，继续执行第二步。</p><p>第二步：设置您的MySQL用户</p><p>接下来，是在MySQL服务器上为您的媒体中心创建用户帐户的时候了。为此，我们需要一些命令行工作。要开始，请运行MySQL命令行客户端-您的开始菜单中应该有一个条目。</p><img class="content_img" src="/image/ef/ef28087c1ff2de1ed79d7272b9113132.png" /><p>控制台打开时，输入您在上一步中创建的密码。然后，您会发现自己出现在MySQL服务器提示符下。</p><img class="content_img" src="/image/86/8664c8edef0dc30e1f12b46c984ca9f7.png" /><p>在提示符下键入以下命令，并在每个命令后按Enter键，以在数据库服务器上创建用户：</p><code>CREATE USER 'kodi' IDENTIFIED BY 'kodi';</code><code>GRANT ALL ON *.* TO 'kodi';</code><code>flush privileges;</code><p>第一个命令的第一部分创建用户，第二部分创建密码。虽然完全相同的登录/密码通常是一个巨大的安全禁忌，但在这种情况下，为了简单起见，我们可以放心地使用一对匹配的密码。在私人服务器上的MySQL数据库可以跟踪你看过的“德克斯特”的哪些剧集，这几乎不是一个高风险的安装。</p><img class="content_img" src="/image/0d/0d29e08e814022a55577746f6b862b82.png" /><p>这就是目前您在命令行中需要做的全部工作-尽管我们建议让MySQL服务器的命令提示符保持打开状态，因为我们将在稍后签入，并在Kodi为我们创建数据库后对它们进行一次窥探。</p><p>在配置Kodi之前，我们还有最后一个任务。确保端口3306(MySQL服务器端口)在安装了MySQL的计算机的防火墙上是打开的。默认情况下，Windows Installer应该会自动打开端口，但我们已经看到有些情况下没有自动打开端口。打开端口的最简单方法是使用PowerShell命令。在开始菜单中搜索PowerShell，然后右键单击并选择“以管理员身份运行”。</p><img class="content_img" src="/image/20/20a1021013b3f921fb88f00d4f09a7cf.png" /><p>然后，运行以下命令并按Enter键：</p><code>New-NetFirewallRule -DisplayName "Allow inbound TCP Port 3306 for MySQL" -Direction inbound –LocalPort 3306 -Protocol TCP -Action Allow</code><p>如果命令成功，如下所示，您应该可以继续。</p><img class="content_img" src="/image/3d/3d51c9f2822858c55a26536946a4d316.png" /><p>第三步：备份您当前的KODI库(可选)</p><p>相关：如何将您的科迪图稿存储在与您的视频相同的文件夹中</p><p>默认情况下，KODI使用内部SQLite数据库。为了让KODI在您的家庭网络中有效通信，我们需要指示它使用外部MySQL数据库。然而，在我们进入这一步之前，您需要做出一个执行决定：您可以备份当前的库并稍后恢复它(这有时可能很麻烦)，或者您可以使用新的库重新开始(这很容易，但需要您重新设置节目的观看状态，如果您不将其存储在本地，还可能需要重新选择您的图稿)。</p><p>如果您想要备份当前的库，您可以从KODI内部执行此操作。只能从一台计算机执行此操作-选择具有最新库的计算机。打开Kodi，进入设置&gt;媒体设置&gt;导出库。(如果您看不到这些选项，请确保您的菜单在科迪语中设置为“高级”或“专家”。)</p><img class="content_img" src="/image/18/1861532821372f5005b513baba77b8cf.png" /><p>您可以将库导出为单个文件或单独的文件。单个文件将允许您将备份放在一个位置，而多个文件将把额外的JPG和NFO文件分散到您的介质文件夹中-这更可靠，但非常杂乱。选择您想要的任何选项。</p><img class="content_img" src="/image/a7/a739c182af4c62c8e797a87b0b779b30.png" /><p>备份存储库后，请继续执行下一步。</p><p>第四步：将KODI配置为使用新的MySQL服务器</p><p>一旦您备份了库(或者选择不担心并从头开始)，您就可以将Kodi指向您的MySQL服务器了。您将需要在每台运行Kodi的计算机上执行此步骤，但我们建议您首先在一台计算机上设置它-如果您选择这样做，可能与您从中备份存储库的计算机相同。</p><p>为了将Kodi指向MySQL，我们需要编辑Kodi的Advancedsettings.xml文件。默认情况下，该文件不存在(尽管在安装过程中，Kodi可能为您创建了一个文件来处理特定的配置问题)。如果Advancedsettings.xml文件存在，则根据您的操作系统，它将位于以下位置：</p><p>
Windows：C：\Users\[username]\AppData\Roaming\Kodi\userdata。
Linux和其他Live版本的Kodi：$HOME/.kodi/userdata。
MacOS：/Users/[用户名]/Library/Application Support/kodi/userdata</p><p>签入那个文件夹。那里是否有Advancedsettings.xml文件？是?。把它打开。没有吗？您需要打开一个文本编辑器并创建一个。无论您是在编辑现有的条目还是创建新的条目，都要将以下文本剪切并粘贴到文件中(注意：如果Advancedsettings.xml文件中已经有一些条目，请保留这些条目，并将这些值放在正确的部分中)：</p><p>编辑上面的文本以反映LAN上服务器的IP地址和MySQL数据库的用户名/密码(在我们的示例中，它只是kodi/kodi)。这一基本设置应该会同步你的视频库和音乐库，但你也可以同步Kodi的其他部分，以及同步多个带有姓名标签的配置文件(如果你使用它们的话)。</p><img class="content_img" src="/image/30/3002411906dd594521af1c6e0cfd1459.png" /><p>一旦您的Advancedsettings.xml文件准备就绪，请在该计算机上打开Kodi。您需要导入库(从“设置”&gt;“媒体设置”&gt;“导入库”)，或者重新扫描源以开始从头开始填充MySQL数据库。现在就这么做。</p><p>当完成该操作并且库重新就位时，您可以跳到MySQL命令提示符并检查以确保Kodi创建并填充了数据库。在MySQL注释提示符下，运行：</p><code>SHOW DATABASES;</code><p>它将输出MySQL服务器上当前的所有数据库。您至少应该看到以下数据库：INFORMATION_SCHEMA、MYSQL和PERFORMANCE_SCHEME，因为它们是MySQL安装本身的一部分。Kodi的默认数据库名称是myVideos107和mymusic60(在我们的示例中，我们没有使用音乐数据库，所以列表中只显示了我们的视频数据库)。</p><img class="content_img" src="/image/95/9515480b0b3ea7fca0964a0cccf4e8b6.png" /><p>如果您需要从MySQL服务器中删除数据库，可以使用以下命令：</p><code>DROP DATABASE databasename;</code><p>空数据库几乎不占用任何空间，不会对同步系统的性能造成负面影响，但保持整洁是件好事。</p><p>如果您的数据库在那里，这是一个很好的开始，但是值得执行一次简单的检查，看看Kodi是否正确地填充了数据库。在MySQL命令提示符下运行以下命令(用您的视频数据库名称替换databasename)：</p><code>SELECT COUNT(*) from databasename.movie;</code><code>SELECT COUNT(*) from databasename.tvshow;</code><p>每个查询将分别返回库中包含的电影和电视节目总数(根据MySQL数据库)。如您所见，在我们的例子中，它通过182部电影和43个电视节目来认可我们的库：</p><img class="content_img" src="/image/f8/f8b8ae33294357497d177dcbe46b1589.png" /><p>如果条目数为零，则说明线路上的某个地方有问题。以下是常见错误的快速故障排除清单：</p><p>
在启动Kodi并重新填充库之前，您是否将Advancedsettings.xml文件复制到您的计算机中？
您是否使用了GRANT ALL命令来授予KODI帐户访问MySQL服务器的权限？
您在MySQL主机的防火墙上打开端口3306了吗？
当您删除Advancedsettings.xml文件并恢复到本地数据库时，您的源是否有效且可扫描？如果没有，您将需要独立于MySQL问题对源代码进行故障排除。</p><p>如果一切看起来都很好，并且SELECT COUNT查询成功，那就意味着您已经准备好开始利用跨媒体中心同步了。</p><p>第五步：对您的其他KODI机器重复第四步</p><p>最难的部分结束了！现在，您只需转到其他每台Kodi机器，并将您在步骤4中所做的相同文本放入Advancedsettings.xml文件中。一旦您这样做了(并在那台机器上重新启动Kodi)，它应该会立即从MySQL服务器获取您的库信息(而不需要您自己重新填充库)。</p><p>在一些设备上，比如运行LibreELEC的Raspberry Pis，你需要进入网络设置，并确保“启动Kodi之前等待网络”已经打开，这样才能正常工作。</p><p>此外，如果您的视频位于需要密码的共享上，并且在新机器上设置Advancedsettings.xml后出现错误，您可能需要转到“文件”视图，单击“添加视频”，然后访问共享上的文件夹，以便KODI提示您输入凭据。然后，您可以单击“取消”或将源添加为包含“无”类型的介质。</p><img class="content_img" src="/image/09/096ef1f15966df31b9b60e95c36e5125.png" /><p>从那里，试着在一个盒子上观看视频。您应该会发现，当您完成后，它显示为“观看”在您的其他科迪设备以及！您甚至可以在一台机器上停止一段视频，然后只需选择它在另一台机器上播放，就可以从您停止的地方继续播放。享受新的全屋图书馆同步！</p><p>图片来源：FLIRC Kodi版Raspberry Pi保护套</p><div class="item_info"><span class="item_key"><a href="/tag/kodi/">kodi</a></span><span class="item_key"><a href="/tag/mysql/">mysql</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/11794.html">如何使用科迪的Web界面控制您的家庭影院PC(或流媒体音乐)</a><li><a href="/story/11751.html">如何在KODI中为单独的监视列表设置多个配置文件</a><li><a href="/story/11584.html">KODI不是盗版应用程序</a><li><a href="/story/11100.html">为什么您的Kodi盒不起作用，以及要使用什么</a><li><a href="/story/11065.html">如何将YouTube和其他网络视频投射到科迪(如Chromecast)</a><li><a href="/story/10079.html">如何使用Yatse通过您的声音(以及更多)控制Kodi</a><li><a href="/story/9940.html">如何使用Amazon Echo控制您的科迪媒体中心</a><li><a href="/story/7309.html">如何将您的Kodi库设置为自动更新</a><li><a href="/story/4570.html">如何用科迪和树莓皮建造一个价值35美元的媒体中心</a><li><a href="/story/3386.html">如何在科迪语中安装和配置加载项</a><li><a href="/story/3147.html">Kodi的最佳皮肤(以及如何定制它们)</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>