<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>为什么Linux不需要碎片整理</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>为什么Linux不需要碎片整理</h2></div><div class="content"><img class="content_img" src="/image/f5/f562b8ca2f5cd66a8aa0ff952a82b02c.png" /><p>如果您是Linux用户，您可能听说过不需要整理Linux文件系统的碎片。您还会注意到Linux发行版没有附带磁盘碎片整理实用程序。但为什么会这样呢？</p><p>要理解为什么Linux文件系统在正常使用中不需要碎片整理-而Windows文件系统需要-您需要了解为什么会发生碎片整理，以及Linux和Windows文件系统的工作方式是如何不同的。</p><p>什么是碎片化？</p><p>许多Windows用户，甚至是没有经验的用户，都认为定期对文件系统进行碎片整理可以提高计算机速度。很多人不知道的是为什么会这样。</p><p>简而言之，硬盘驱动器上有多个扇区，每个扇区可以包含一小段数据。文件，特别是大文件，必须跨多个不同的扇区存储。假设您将许多不同的文件保存到您的文件系统中。这些文件中的每一个都将存储在连续的扇区簇中。稍后，您更新了最初保存的其中一个文件，从而增加了该文件的大小。文件系统将尝试将文件的新部分存储在原始部分旁边。不幸的是，如果没有足够的不间断空间，则必须将文件拆分为多个部分-这对您来说都是透明的。当您的硬盘读取文件时，其磁头必须在硬盘上的不同物理位置之间跳转，以读取每个扇区块-这会减慢速度。</p><p>碎片整理是一个密集的过程，它会移动文件位以减少碎片，从而确保每个文件在驱动器上是连续的。</p><img class="content_img" src="/image/d7/d79a0afa9e204d908f2f382231cff530.png" /><p>当然，这对于固态硬盘是不同的，固态硬盘没有活动部件，不应该进行碎片整理-对固态硬盘进行碎片整理实际上会缩短其寿命。而且，在最新版本的Windows上，您真的不需要担心文件系统的碎片整理-Windows会自动为您整理碎片。有关碎片整理最佳实践的更多信息，请阅读本文：</p><p>HTG解释说：你真的需要整理你的电脑吗？</p><p>Windows文件系统的工作原理</p><p>微软的旧FAT文件系统-最后一次默认出现在Windows98和ME上，尽管它现在仍然在USB闪存驱动器上使用-并不试图智能地安排文件。当您将文件保存到FAT文件系统时，它会将其保存到尽可能接近磁盘起始位置的位置。当您保存第二个文件时，它会在第一个文件之后立即保存该文件，依此类推。当原始文件的大小增加时，它们将始终成为碎片。附近没有供它们生长的空间。</p><p>微软较新的NTFS文件系统在装有Windows XP和2000的消费者个人电脑上取得了成功，它试图变得更智能一些。它会在驱动器上的文件周围分配更多的“缓冲区”空闲空间，不过，正如任何Windows用户都会告诉您的那样，随着时间的推移，NTFS文件系统仍然会变得支离破碎。</p><p>由于这些文件系统的工作方式，它们需要进行碎片整理才能保持最佳性能。Microsoft通过在最新版本的Windows上后台运行碎片整理进程缓解了此问题。</p><img class="content_img" src="/image/c4/c46a3b5ef92eca789a3399a45d126c73.png" /><p>Linux文件系统的工作原理</p><p>Linux的ext2、ext3和ext4文件系统-ext4是Ubuntu和大多数其他当前Linux发行版使用的文件系统-以更智能的方式分配文件。Linux文件系统不是将多个文件放在硬盘上彼此靠近的位置，而是将不同的文件分散在磁盘上，从而在它们之间留下大量的空闲空间。当文件经过编辑并需要增长时，通常会有足够的空闲空间可供该文件增长。如果确实发生碎片，文件系统将尝试在正常使用时移动文件以减少碎片，而不需要碎片整理实用程序。</p><img class="content_img" src="/image/0e/0eb5af6c0f11708e0baa5a01d5926673.png" /><p>由于此方法的工作方式，如果您的文件系统已满，您将开始看到碎片。如果它已满95%(甚至80%)，您将开始看到一些碎片。但是，该文件系统旨在避免在正常使用时出现碎片。</p><p>如果您在Linux上确实遇到了碎片问题，那么您可能需要一个更大的硬盘。如果您确实需要对文件系统进行碎片整理，最简单的方法可能是最可靠的：从分区复制所有文件，擦除分区中的文件，然后将文件复制回分区。当您将文件复制回磁盘时，文件系统会智能地分配文件。</p><p>您可以使用fsck命令测量Linux文件系统的碎片-在输出中查找“非连续inode”。</p><div class="item_info"><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/文件系统/">文件系统</a></span><span class="item_key"><a href="/tag/碎片/">碎片</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14797.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14796.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14627.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14550.html">如何在Linux上使用Tail命令</a><li><a href="/story/14514.html">您想知道的关于Linux上的inode的所有信息</a><li><a href="/story/14471.html">如何在Google Drive中更改文件所有者</a><li><a href="/story/14454.html">如何在Linux上使用stat命令</a><li><a href="/story/14347.html">如何使用cURL从Linux命令行下载文件</a><li><a href="/story/14306.html">如何创建USB驱动器的映像</a><li><a href="/story/14240.html">如何在Linux上使用LESS命令</a><li><a href="/story/14188.html">如何最终确定和撤销对共享Google文件的访问</a><li><a href="/story/14167.html">如何共享指向您的Google文件的“复制”链接</a><li><a href="/story/14164.html">如何将Google文档、工作表或幻灯片文件共享为网页</a><li><a href="/story/14127.html">如何在iPhone和iPad上将文件复制和备份到外部存储</a><li><a href="/story/14024.html">如何快速搜索Google Drive</a><li><a href="/story/13983.html">如何在Linux上使用chown命令</a><li><a href="/story/13968.html">如何将音乐复制到Android手机</a><li><a href="/story/13912.html">你能在Windows PC或Android手机上使用AirDrop吗？</a><li><a href="/story/13883.html">如何在PowerPoint演示文稿中使用iTunes音乐</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>