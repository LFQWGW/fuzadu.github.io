<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>使用SMTP在SQL Server中发送自动作业电子邮件通知</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>使用SMTP在SQL Server中发送自动作业电子邮件通知</h2></div><div class="content"><p>当数据库服务器上运行自动备份作业时，有时甚至会忘记它们正在运行。然后，您忘记检查它们是否成功运行，直到您的数据库崩溃，并且由于没有当前备份而无法恢复时，您才会意识到这一点。</p><p>这就是电子邮件通知的用武之地，这样你就可以在每天早上喝咖啡假装工作时看到工作状态。</p><p>SQL Server提供了发送电子邮件的内置方法，但不幸的是，它要求您在服务器上安装Outlook和配置文件，这不一定是发送电子邮件的理想方式。谢天谢地，还有另一种方法，它涉及在服务器上安装一个存储过程，允许您通过SMTP发送电子邮件。</p><p>单击此处下载sp_SQLNotify存储过程。</p><p>您需要编辑存储过程中的一行以放置SMTP服务器的IP地址：</p><p>将存储过程安装到master数据库中，以便可以从任何需要的地方轻松使用它。</p><p>打开SQL Server Agent\Jobs列表，然后选择您尝试为其创建通知的作业的属性：</p><img class="content_img" src="/image/7b/7b987fadc216032c9f77724aaf93f257.png" /><p>单击Steps选项卡，您应该会看到如下所示的屏幕：</p><img class="content_img" src="/image/06/0632c0a43d0c12bb9a7bd0f86927da4a.png" /><p>单击新建按钮以创建新的作业步骤。我们将使用此步骤发送成功时的电子邮件通知。</p><p>步骤名称：电子邮件通知成功</p><p>在命令窗口中输入此SQL，如下所示。您需要自定义电子邮件地址和邮件主题以匹配您的环境：</p><img class="content_img" src="/image/24/2495af0905fc9e7a821c42dac48caac9.png" /><p>单击确定，然后再次单击新建按钮以创建另一个步骤。这将是故障通知步骤。</p><p>步骤名称：电子邮件通知失败</p><p>SQL：</p><p>现在的想法是让项目遵循特定的工作流程。首先点击第一步的[编辑]按钮，设置属性，如下图所示：</p><img class="content_img" src="/image/51/51406ceb14c8d2d52e8fc129c93c168d.png" /><p>我们要说的是，在成功的时候，走到成功的一步，在失败的时候，走到失败的一步。很简单的东西。</p><p>现在编辑第二步，即标记为“电子邮件通知成功”的步骤，并设置属性，如下所示：</p><img class="content_img" src="/image/35/35a662215be1fa63247d99e95b169d5b.png" /><p>我们的意思是，如果通知作业成功，那么就退出该作业，而不运行步骤3。如果我们不指定这一点，那么我们最终将收到两封电子邮件，一封成功，一封失败。</p><p>现在编辑第三步，即标记为“电子邮件通知失败”的步骤，并设置属性，如下所示：</p><img class="content_img" src="/image/38/382ef9bc62266c8984e131892ab61062.png" /><p>现在，您的工作步骤应该如下所示：</p><img class="content_img" src="/image/19/19ed344368e19ca558f4a1022ff15569.png" /><p>现在，您的收件箱中应该会有成功或失败的电子邮件通知。</p><p></p><p>注意：本文中使用的存储过程可以在这里找到，尽管它可能不是原始来源。</p><p>单击此处下载sp_SQLNotify存储过程。</p><div class="item_info"><span class="item_key"><a href="/tag/电子邮件/">电子邮件</a></span><span class="item_key"><a href="/tag/步骤/">步骤</a></span><span class="item_key"><a href="/tag/通知/">通知</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14432.html">如何在Outlook中的电子邮件上方显示快速操作按钮</a><li><a href="/story/14253.html">如何动态自定义您的Gmail地址</a><li><a href="/story/14158.html">如何在Outlook中读取邮件标题</a><li><a href="/story/14054.html">如何将电子邮件保存到硬盘</a><li><a href="/story/13941.html">如果您收到网络钓鱼电子邮件，应该怎么办？</a><li><a href="/story/13937.html">如何在Outlook联系人组中隐藏电子邮件地址</a><li><a href="/story/13909.html">如何将旧电子邮件帐户导入Gmail</a><li><a href="/story/13866.html">如何在Microsoft Outlook中设置POP3或IMAP帐户</a><li><a href="/story/13677.html">如何在Gmail中禁用动态电子邮件</a><li><a href="/story/13676.html">如何阻止超人(和其他应用程序)跟踪您打开的电子邮件</a><li><a href="/story/13663.html">为什么我会从自己的电子邮件地址收到垃圾邮件？</a><li><a href="/story/13651.html">使用Outlook Mail App滑动操作快速处理邮件</a><li><a href="/story/13409.html">整理电子邮件的最佳方式：将它们存档</a><li><a href="/story/13321.html">预览您的电子邮件安全吗？</a><li><a href="/story/13274.html">电子邮件轰炸如何使用垃圾邮件隐藏攻击</a><li><a href="/story/13214.html">忘掉收件箱零号：用俄亥俄州来对你的电子邮件进行分类</a><li><a href="/story/12721.html">如何配置iPhone和iPad的邮件设置</a><li><a href="/story/12391.html">如何在Outlook中为电子邮件添加过期日期(以及它们的用途)</a><li><a href="/story/12301.html">如何配置iPhone和iPad的邮件设置</a><li><a href="/story/11561.html">如何阻止合法电子邮件被标记为垃圾邮件</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>