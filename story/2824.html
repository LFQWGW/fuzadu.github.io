<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在单个IP地址上运行多个终端服务器</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在单个IP地址上运行多个终端服务器</h2></div><div class="content"><p>除非您有特殊设置，否则通常只需要来自ISP的单个IP地址即可运行您的网络。由于您的网络位于防火墙/路由器之后，您可以将传入流量定向到适当的服务器，以处理电子邮件、Web、远程连接和其他任何内容。当您有多个服务器需要从一个公共端口接收流量时，问题就出现了。我们不会添加更多的公有IP地址(和开销)，而是向您展示如何在单个IP上使用来处理这种情况。</p><p>在我们的文章中，我们将再次介绍如何在只有一个公共IP地址的网络中处理多个终端服务器(使用运行在端口3389上的RDP协议)。在我们的环境中，我们使用一个基于DD-WRT的路由器(在25美元的Linksys路由器上闪存)，它同时充当我们的防火墙和路由器。如果您使用的不是基于DD-WRT的路由器，您的防火墙/路由器可能会提供相同的方法。此外，我们还介绍了一种可以在任何环境中使用的替代方法。</p><p>配置端口转发</p><p>DD-WRT中端口转发的一个很好的功能是能够无缝地应用端口“重新映射”，即客户端在路由器上连接的外部端口被映射到发送到您网络中的目标机器的备用端口。此方法的优点是您不必在服务器机器上进行任何配置更改，因为流量是使用默认端口发送到服务器机器的。</p><p></p><p>在下面的示例中，网络内部有3台终端服务器/RDP服务器：</p><p>
本地192.168.16.21(RDP_PRIMARY)运行Small Business Server 2008。
本地192.168.16.24(RDP_2)运行Windows Server 2003 Standard。
本地192.168.16.25(RDP_3)运行Windows Server 2008 Standard</p><p>在DD-WRT控制面板的NAT/QoS&gt;端口转发选项卡下，您可以配置端口重新映射。在我们的示例中，我们使用默认RDP端口(3389)连接到“RDP_PRIMARY”，并使用外部端口624和625将RDP流量路由到默认端口3389上的“RDP_2”和“RDP_3”。简而言之，当流量进入端口624或625时，路由器会自动应用转换，将数据发送到目标机器上的端口3389。目标服务器永远不会知道不同之处。</p><img class="content_img" src="/image/c2/c289e7a7cef7989298c65a1e1ff822c4.png" /><p>联运的 / 相连的 / 连通的</p><p>下面的连接显示了客户端如何使用上面的配置设置连接到所需的服务器。</p><p>连接到默认RDP端口(3389)会路由到Small Business Server 2008计算机。</p><img class="content_img" src="/image/80/80b21b63b587c142777647e13fc3bac4.png" /><img class="content_img" src="/image/28/28bcc074dd7906fe26e4be9f530ef919.png" /><p>使用端口624路由到Windows Server 2003 Standard计算机连接到RDP。</p><img class="content_img" src="/image/e5/e552baa2b58cc51dc47e726b866532b4.png" /><img class="content_img" src="/image/1f/1f6ce77c993b191a4cbddc352a32eb3f.png" /><p>使用端口625路由到Windows Server 2008 Standard计算机连接到RDP。</p><img class="content_img" src="/image/66/660828d24690ffdc502d9d4ac3937780.png" /><img class="content_img" src="/image/f8/f82592078d867e3dc3cb982ab34f217f.png" /><p>另一种方法</p><p>作为使用端口重新映射的替代方法，您可以通过编辑以下注册表值，然后重新启动计算机，将每台服务器计算机配置为使用不同的RDP端口：</p><p>如果您选择此路由，则必须记住在主防火墙上配置端口转发，并更新在相应计算机上运行的任何本地防火墙规则(即Windows防火墙)以允许备用端口号。</p><p>进行这些配置更改后，最终用户将以上面所示的相同方式访问在备用端口上运行的终端服务器。</p><p>结束 / 结尾 / 结论 / 推论</p><p>在我们的文章中，我们使用RDP作为示例来说明如何使用端口重新映射消除服务器上的非标准配置，但是您可以同样轻松地将相同的方法应用于任何其他服务，如HTTP或SMTP。</p><p>高尔夫球场 / 链接 / 沙地 / 沙丘</p><p>DD-WRT网站</p><div class="item_info"><span class="item_key"><a href="/tag/端口/">端口</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/流量/">流量</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14397.html">迅雷3和USB-C：有什么不同？</a><li><a href="/story/11992.html">HTG解释：什么是端口扫描？</a><li><a href="/story/11699.html">我应该买哪个Roku呢？快递VS Stick VS Stick+VS Ultra</a><li><a href="/story/7583.html">我可以将USB设备直接插入我的主板吗？</a><li><a href="/story/7495.html">如何将您的计算机升级到USB 3.0</a><li><a href="/story/3993.html">如何接入您的网络，第2部分：保护您的VPN(DD-WRT)</a><li><a href="/story/3118.html">如何转发路由器上的端口</a><li><a href="/story/2520.html">初学者的BitTorrent：使用您自己的私人跟踪器共享大文件</a><li><a href="/story/2370.html">如何在Windows中检查打开的TCP/IP端口</a><li><a href="/story/113.html">允许从另一台计算机访问VMware虚拟机(NAT)</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>