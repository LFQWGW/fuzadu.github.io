<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何使用WinSCP over FTP自动备份Web服务器文件</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何使用WinSCP over FTP自动备份Web服务器文件</h2></div><div class="content"><img class="content_img" src="/image/84/8432b4debde1e03415478dd53da8d89b.png" /><p>您已经听过一遍又一遍：备份您的数据。有很多备份解决方案，但没有什么比简单而免费的解决方案更好的了。因此，只需几行代码和一个非常有用的名为WinSCP的程序，我们将在您的FTP服务器和您的家庭计算机之间设置自动同步。</p><p>FTP(文件传输协议)是允许用户在计算机之间传输文件的Internet协议。尽管FTP及其姊妹协议SFTP(安全文件传输协议)年代久远(想想前TCP/IP时代)，但它们今天仍然非常流行，并被视为在本地和Internet上传输文件的一种简单方式。它碰巧也是一个非常好的方式来保存您在FTP服务器上保存的重要文件的远程备份。</p><p>如果您不想为第三方FTP解决方案付费，请查看这篇由Lifehacker的优秀人员撰写的关于如何构建您自己的FTP服务器的文章。</p><p>要求</p><p>
FTP服务器和访问凭据。
一台Windows计算机。
WinSCP副本(仅限Windows)</p><p>设置WinSCP</p><p>下载WinSCP副本后，在计算机上安装.exe。在安装WinSCP时开始记住您的FTP地址、用户名和密码也不是一个坏主意。</p><img class="content_img" src="/image/3d/3daf923d0f3e7635fd2045e89c2c5734.png" /><p>现在我们已经安装了WinSCP，我们将创建并保存一个新的会话配置文件，以便稍后更容易访问。在登录屏幕中，输入您的主机名(即ftp.howtogeek.com)、用户名和密码。您可以使用FTP或SFTP，但请确保更改FTP主机为您提供的相应端口的端口号。然后单击保存以保存配置文件。打开配置文件以登录到您的FTP服务器。这将验证您是否在配置文件中键入了正确的凭据。</p><img class="content_img" src="/image/8d/8d1ba7b0e582746105896edcaf22615f.png" /><p>创建脚本</p><p>我们将创建一个简单的脚本来登录到您的FTP服务器，告诉WinSCP将丢失的文件下载到您计算机上的什么位置，然后创建一个记录FTP活动的日志文件。继续并打开计算机上的记事本。将以下脚本模板复制到记事本：</p><p>以下是对脚本中发生的事情的简要说明。WinSCP将否定回答所有提示，以避免阻止脚本。然后，它将在提示时自动覆盖文件。然后，它使用我们之前创建的配置文件登录到您的FTP服务器，更改目录(如果需要)，并传输二进制文件(与ASCII相反)。最后，它读取远程FTP目录并将文件传输到指定的本地目录。有关更多选项，请查看官方WinSCP脚本页面。</p><p>现在，在修改或运行此脚本之前，我们建议在远程和本地目标上创建测试目录。您最不希望发生的事情是在没有任何备份的情况下意外擦除FTP服务器。因此，在您的计算机上创建一个名为“testlocal”的目录(我们在f：\backups下创建它)，在FTP服务器上创建另一个名为“testremote”的目录(我们在根目录下创建它)。运行脚本并成功执行后，将其保存为“sync.txt”到您的计算机(我们将我们的保存在testlocal文件夹中)。现在您已经准备好自动执行脚本了。</p><p>自动执行脚本</p><p>我们将让Windows通过使用其内置的任务调度器来处理自动化。在Windows 7中，首先打开“控制面板”&gt;“系统和安全”&gt;“管理工具”&gt;“任务计划程序”。</p><img class="content_img" src="/image/4a/4aa0c1a48a19f4ac0fb90c0682c81bbc.png" /><p>在右列中，单击Create Basic Task(创建基本任务)按钮。</p><img class="content_img" src="/image/2e/2eada9b9b3640d6fbea3d1be05d89df1.png" /><p>命名并描述您的任务，然后单击“下一步”。</p><img class="content_img" src="/image/a3/a3c8c931e51af7f22349b0bad30028b3.png" /><p>下一个选项将确定任务的运行频率。我们选择在每次打开计算机时运行脚本。您可以选择频率较低的选项(如每周)来降低运行频率。</p><img class="content_img" src="/image/ef/effd99387cc498b59237cf05076ecb16.png" /><p>在下一个屏幕上，选择“启动程序”，然后单击“下一步”。系统将提示您浏览程序或脚本。单击浏览按钮并导航到“C：\Program Files\WinSCP”以选择WinSCP.exe。在下面添加“/console/script=f：\backup\sync.txt/log=f：\backup\log.txt”以添加参数。如果sync.txt位于不同位置，并且希望在不同位置生成日志文件，请务必更改参数。单击“下一步”。</p><img class="content_img" src="/image/0c/0cfdbd375d289ce6035e7eb6ceace7a9.png" /><p>您将看到任务摘要。如果显示正确，请单击“完成”。最后，为了确保任务正常运行，我们将运行它。确保您的testremote目录中至少有一个文件(即“thisisatest.txt”)。突出显示新创建的任务，然后单击右列中的Run。您应该会看到命令提示符出现，连接到FTP服务器，然后同步文件。</p><img class="content_img" src="/image/bf/bfe5cda96cd21b0adcb1f9d6c83ac8b7.png" /><p>您的测试任务应该已经完成，并且您的测试文件现在应该位于指定的本地文件夹中。如果遇到任何错误，请检查日志文件以找出原因。</p><p>就这些了！您现在有了一个免费的备份解决方案，它将使您的所有FTP文件同步到本地文件夹。如果您的FTP服务器崩溃或您不小心删除了文件，您可以从您的计算机中恢复副本！</p><div class="item_info"><span class="item_key"><a href="/tag/ftp/">ftp</a></span><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/winscp/">winscp</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/13285.html">如何在Linux上使用FTP命令</a><li><a href="/story/12351.html">谷歌希望从Chrome中删除FTP。你会在乎吗？</a><li><a href="/story/10879.html">如何在Windows中连接到FTP服务器(无需额外软件)</a><li><a href="/story/5369.html">如何使用FileZilla在Windows上托管FTP服务器</a><li><a href="/story/4771.html">愚蠢的极客技巧：如何在不使用Internet Explorer的情况下在新电脑上下载Firefox</a><li><a href="/story/3339.html">使用此简单脚本通过右键单击将文件上载到FTP站点</a><li><a href="/story/2813.html">通过批处理脚本将文件上载到FTP站点</a><li><a href="/story/2687.html">询问How-to Geek：在仿真中恢复XBMC FTP、重命名电视节目和Android市场</a><li><a href="/story/430.html">在CentOS上禁用ProFTP</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>