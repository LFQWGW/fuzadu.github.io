<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何使用Linux cat和tac命令</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何使用Linux cat和tac命令</h2></div><div class="content"><p>*cat和tac命令显示文本文件的内容，但它们的功能比看上去更多。深入研究一下，学习一些高效的Linux命令行技巧。</p><p>这是两个简单的小命令，通常会因为太简单而没有任何实际用途而不屑一顾。但是，一旦您了解了可以使用它们的不同方式，您就会发现，在处理文件时，它们完全有能力完成相当一部分的繁重任务。</p><p>CAT命令</p><p>CAT用于检查文本文件的内容，并将文件的各个部分连接在一起以形成更大的文件。</p><p>曾几何时，在拨号时代，调制解调器二进制文件经常被分成几个较小的文件，以使下载更容易。您不是下载一个大文件，而是拉回每个较小的文件。如果单个文件无法正确下载，您只需再次检索该文件即可。</p><p>当然，您随后需要一种方法将较小文件的集合重新组成单个工作二进制文件。这个过程被称为拼接。这就是猫出现的地方，也是它得名的地方。</p><p>宽带和光纤连接导致这种特殊的需求逐渐消失--就像尖叫的拨号声音一样--那么，猫今天还能做些什么呢？实际上相当多。</p><p>显示文本文件</p><p>要让cat将文本文件的内容列出到终端窗口，请使用以下命令。</p><p>确保该文件是文本文件。如果您尝试将二进制文件的内容列出到终端窗口，结果将不可预测。您可能最终会出现锁定的终端会话，甚至更糟。</p><code>cat poem1.txt</code><img class="content_img" src="/image/a1/a1c8d7619ee9e1b083710bac65d4770e.png" /><p>文件poem1.txt的内容显示在终端窗口中。</p><img class="content_img" src="/image/65/65c1f4200167e6c936c6c1f42efc4472.png" /><p>这只是那首著名诗歌的一半。剩下的在哪里？这里还有另一个文件，名为poem2.txt。我们可以让cat用一个命令列出多个文件的内容。我们所需要做的就是在命令行上按顺序列出文件。</p><code>cat poem1.txt poem2.txt</code><img class="content_img" src="/image/30/30cbb5a76b54d14219c7d1aba67df794.png" /><p>那看起来好多了，我们现在有整首诗了。</p><img class="content_img" src="/image/aa/aa53ee62c1cc6bdc552e615a50c43a05.png" /><p>将CAT与LESS配合使用</p><p>这首诗都在那里，但它飞快地飞过窗户，读不懂前几节。我们可以通过管道将cat的输出转换为LESS，并按照自己的速度向下滚动文本。</p><code>cat poem1.txt poem2.txt | less</code><img class="content_img" src="/image/9c/9c7c9ed5b95c8f6d67109acc37ab31be.png" /><p>我们现在可以在一个流中前后移动文本，即使它保存在两个单独的文本文件中。</p><img class="content_img" src="/image/74/747e6144aa82f4f84c02bfe933b2a91d.png" /><p>对文件中的行进行编号</p><p>我们可以让cat对文件中显示的行进行编号。为此，我们使用-n(数字)选项。</p><code>cat -n poem1.txt</code><img class="content_img" src="/image/09/09a1f33e29c8dc37e7bd0f3ba39912f6.png" /><p>行在终端窗口中显示时会进行编号。</p><img class="content_img" src="/image/d2/d273ad64cfcf7cf4bf772a3cf990a386.png" /><p>不给空行编号</p><p>我们设法用cat对行进行了编号，但诗句之间的空行也被计算在内。要对文本行进行编号，但要忽略空行，请使用-b(数字非空白)选项。</p><code>cat -b poem1.txt</code><img class="content_img" src="/image/00/00ca62e0bbb470e14999cfee21cfb0b8.png" /><p>现在，文本行已编号，空行被跳过。</p><img class="content_img" src="/image/af/af5b9f11685a1fabc80a0c57a065389f.png" /><p>不显示多个空行</p><p>如果文件中有连续空行的部分，我们可以要求cat忽略除一个空行之外的所有空行。看看这份文件。</p><img class="content_img" src="/image/e2/e24b134d4e6fd1fd08481c8b3248e67a.png" /><p>下一个命令将使cat从每串空行中只显示一个空行。我们需要的选项是-s(压缩-空白)选项。</p><code>cat -s poem1.txt</code><img class="content_img" src="/image/9e/9ecba9b9e6bb191f407a9c4bdd730185.png" /><p>这不会以任何方式影响文件的内容；它只会更改cat显示文件的方式。</p><img class="content_img" src="/image/e3/e301b15e25ada3e0f4d1a24cd452b8d3.png" /><p>显示选项卡</p><p>如果您想知道空格是由空格还是制表符引起的，可以使用-T(show-tab)选项找出。</p><code>cat -T poem1.txt</code><img class="content_img" src="/image/d9/d9fe6d434d8a85c986ec13e7f0d89e35.png" /><p>选项卡由字符“^i”表示。</p><img class="content_img" src="/image/c6/c6f529c591c5de859f8bca9d3aa97c55.png" /><p>显示线的端点</p><p>您可以使用-E选项(show-ends)检查尾随空格。</p><code>cat -E poem1.txt</code><img class="content_img" src="/image/6a/6a21163b7100b5999ce8f0e4ac4aa774.png" /><p>行尾由“$”字符表示。</p><img class="content_img" src="/image/ef/ef52310fad272963a1dd03b0678c8701.png" /><p>连接文件</p><p>将一首诗保存在两个文件中，每个文件各有一半，这是没有意义的。让我们把它们连在一起，做一个新的档案，里面有整首诗。</p><code>cat poem1.txt poem2.txt > jabberwocky.txt</code><img class="content_img" src="/image/8b/8b4a5840a28bc69fd5288dea85840124.png" /><p>让我们使用cat来检查我们的新文件：</p><code>cat jabberwocky.txt</code><img class="content_img" src="/image/21/21e7cb79808d1225931a52d792a79af5.png" /><p>我们的新文件包含其他两个文件的内容。</p><img class="content_img" src="/image/12/12973f030012818891bfa87f11b67bf0.png" /><p>将文本追加到现有文件</p><p>这样好多了，但实际上，这并不是整首诗。最后一节不见了。Jabberwocky中的最后一节与第一节相同。</p><p>如果我们得到了文件中的第一节，我们可以将下面的内容添加到jabberwocky.txt文件的底部，这样我们就有了完整的诗。</p><p>在下一个命令中，我们必须使用&gt;&gt;，而不仅仅是&gt;。如果我们使用单个&gt;，我们将覆盖jabberwocky.txt。我们不想那样做。我们想将文本追加到它的底部。</p><code>cat first_verse.txt >> jabberwocky.txt</code><img class="content_img" src="/image/5f/5fd085ed2a4f0dcca4d716933574511f.png" /><p>让我们检查jabberwocky.txt文件的内容：</p><code>cat jabberwocky.txt</code><img class="content_img" src="/image/b9/b96e3f672b4970b11b84450b9e527472.png" /><p>最后，这首诗的所有部分都在一起。</p><img class="content_img" src="/image/45/457e2b01ff345e39a17a0ea5e63347e3.png" /><p>重定向标准输入</p><p>您可以使用CAT将输入从键盘重定向到文件。您键入的所有内容都将重定向到文件中，直到您按下Ctrl+D。请注意，我们使用单个&gt;是因为我们希望创建文件(或覆盖它，如果它存在)。</p><code>cat > my_poem.txt</code><img class="content_img" src="/image/d3/d3ef53592616a1548f25de6e3604dbc3.png" /><p>我们一发出命令就可以开始打字了。完成后，我们按Ctrl+D组合键。然后，我们可以使用以下命令检查新文件的内容：</p><code>cat my-poem.txt</code><img class="content_img" src="/image/a0/a0cf6f2f102cbbecfa78e1c8185be808.png" /><p>听起来像是远处的涡轮机，很可能是刘易斯·卡罗尔在坟墓里高速旋转。</p><p>tac命令</p><p>TAC类似于CAT，但它以相反的顺序列出文件内容。</p><p>让我们看看这个：</p><code>tac my_poem.txt</code><img class="content_img" src="/image/d6/d6b476ebac36c3c3c5020816491c4bec.png" /><p>并且该文件以相反的顺序被列出到终端窗口。在这种情况下，它对它的文学价值没有任何影响。</p><img class="content_img" src="/image/07/07a00887a55d101c1307ab4b740a73ce.png" /><p>将tac与stdin一起使用</p><p>使用不带文件名的tac将导致它对来自键盘的输入进行操作。按Ctrl+D将停止输入阶段，而tac将以相反的顺序列出您键入的任何内容。</p><code>tac</code><img class="content_img" src="/image/b6/b6890189d68158703b2c8528dc7cb055.png" /><p>当按下Ctrl+D时，输入被反转并列出到终端窗口。</p><img class="content_img" src="/image/a9/a9821823ed113d0b2cb3178ed2fd2021.png" /><p>对日志文件使用tac</p><p>除了低级的客厅把戏，TAC还能做些什么有用的事吗？是的，可以。许多日志文件在文件底部附加其最新条目。使用tac(与直觉相反，使用head)，我们可以将最后一个条目弹出到终端窗口。</p><p>我们使用tac反向列出syslog文件，并通过管道将其输入head。通过告诉head只打印它收到的第一行(多亏了tac是文件中的最后一行)，我们可以看到syslog文件中的最新条目。</p><code>tac /var/log/syslog | head -1</code><img class="content_img" src="/image/1e/1eb963ec1c6cf4ad10aeffd76938da18.png" /><p>head打印syslog文件中的最新条目，然后退出。</p><p>请注意，Head按照我们的要求只打印了一行，但是该行太长了，以至于换行两次。这就是为什么它在终端窗口中看起来像三行输出的原因。</p><img class="content_img" src="/image/9f/9f3de83e883a1d3e580a9829f15b7f8c.png" /><p>对文本记录使用tac</p><p>TAC已经有了最后一个诀窍，那就是美丽。</p><p>通常，tac自下而上逐行操作文本文件。行是以换行符结尾的字符序列。但是我们可以告诉tac使用其他分隔符。这允许我们将文本文件中的“块”数据视为数据记录。</p><p>假设我们有一个来自某个程序的日志文件需要查看或分析。让我们来看看它带有LESS的格式。</p><code>less logfile.dat</code><img class="content_img" src="/image/12/1299fc49657f84f36ef10398d5b69ee6.png" /><p>正如我们所看到的，该文件有一种重复的格式。有三行十六进制值的序列。每组三行十六进制数都有一个以“=SEQ”开头的标签行，后跟一系列数字。</p><img class="content_img" src="/image/66/661f2a9d291ea6ad9874829dccfb28d6.png" /><p>如果我们滚动到文件的底部，我们可以看到有很多这样的记录。最后一张的编号是865。</p><img class="content_img" src="/image/37/37c1d04c39dd611e4534f136d80a99ad.png" /><p>让我们假设，无论出于什么原因，我们都需要以相反的顺序处理此文件，一个数据记录一个数据记录。必须保留每个数据记录中三个十六进制行的行序。</p><p>我们要注意的是，文件中的最后三行以十六进制值93、E7和B8开始，顺序依次为93、E7和B8。</p><p>让我们使用TAC命令来反转文件。这是一个很长的文件，所以我们用管道把它压缩。</p><code>tac logfile.dat | less</code><img class="content_img" src="/image/38/38f81b6379b08b9740c4cded8f5f7abb.png" /><p>这会颠倒文件，但这不是我们想要的结果。我们希望颠倒文件，但每个数据记录中的行必须按其原始顺序排列。</p><img class="content_img" src="/image/e5/e5638f10834c095848095136c640f4ad.png" /><p>我们在前面记录过，文件中的最后三行以十六进制值93、E7和B8开始，顺序依次为：93、E7和B8。这些行的顺序已经颠倒了。此外，“=SEQ”行现在位于每组三个十六进制行的下方。</p><p>TAC出手相救。</p><code>tac -b -r -s ^=SEQ.+[0-9]+*$ logfile.dat | less</code><img class="content_img" src="/image/13/13629cb746dbe9023cbfcf33b864007a.png" /><p>我们来分析一下。</p><p>s(分隔符)选项通知TAC我们要用作记录之间的分隔符。它告诉tac不要使用通常的换行符，而要使用分隔符。</p><p>r(Regex)选项告诉tac将分隔符字符串视为正则表达式。</p><p>b(之前)选项使tac在每条记录之前列出分隔符，而不是在它之后列出分隔符(这是其默认分隔符(换行符)的通常位置)。</p><p>-s(分隔符)字符串^=SEQ.+[0-9]+*$的解密方式如下：</p><p>^字符表示行的开始。后跟=序号+[0-9]+*$。这指示TAC查找每个“=SEQ”的出现。在行首，后跟任何数字序列(由[0-9]表示)，然后是任何其他字符集(由*$表示)。</p><p>像往常一样，我们把所有的东西都改少了。</p><img class="content_img" src="/image/e4/e41b7ddcc5721c12c1f693b0669fb7f4.png" /><p>我们的文件现在以相反的顺序显示，每个“=SEQ”标签行列在其三行十六进制数据之前。在每个数据记录中，三行十六进制值按其原始顺序排列。</p><p>我们可以简单地检查一下。十六进制的前三行(即文件反转之前的最后三行)的第一个值与我们之前记录的值相匹配：93、E7和B8，依次为：93、E7和B8。</p><p>对于终端窗口一行程序来说，这是一个相当不错的技巧。</p><p>每件事都有目的</p><p>在Linux世界中，即使是看似最简单的命令和实用程序也可能具有令人惊讶和强大的属性。</p><p>简单实用程序只做好一件事，并且很容易与其他实用程序交互的设计哲学，已经产生了一些奇怪的小命令，比如tac。乍一看，这似乎有点奇怪。但是，当你窥视表面之下时，你可以利用一种意想不到的力量来利用你的优势。</p><p>或者，正如另一种哲学所说，“不要因为蛇没有角而轻视它，因为谁能说它不会变成龙呢？”</p><div class="item_info"><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/tac/">tac</a></span><span class="item_key"><a href="/tag/cat/">cat</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14797.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14796.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14627.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14550.html">如何在Linux上使用Tail命令</a><li><a href="/story/14514.html">您想知道的关于Linux上的inode的所有信息</a><li><a href="/story/14471.html">如何在Google Drive中更改文件所有者</a><li><a href="/story/14454.html">如何在Linux上使用stat命令</a><li><a href="/story/14347.html">如何使用cURL从Linux命令行下载文件</a><li><a href="/story/14306.html">如何创建USB驱动器的映像</a><li><a href="/story/14240.html">如何在Linux上使用LESS命令</a><li><a href="/story/14188.html">如何最终确定和撤销对共享Google文件的访问</a><li><a href="/story/14167.html">如何共享指向您的Google文件的“复制”链接</a><li><a href="/story/14164.html">如何将Google文档、工作表或幻灯片文件共享为网页</a><li><a href="/story/14127.html">如何在iPhone和iPad上将文件复制和备份到外部存储</a><li><a href="/story/14024.html">如何快速搜索Google Drive</a><li><a href="/story/13983.html">如何在Linux上使用chown命令</a><li><a href="/story/13968.html">如何将音乐复制到Android手机</a><li><a href="/story/13912.html">你能在Windows PC或Android手机上使用AirDrop吗？</a><li><a href="/story/13883.html">如何在PowerPoint演示文稿中使用iTunes音乐</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>