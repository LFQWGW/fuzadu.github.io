<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>什么被打碎了？SHA-1碰撞攻击，解释</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>什么被打碎了？SHA-1碰撞攻击，解释</h2></div><div class="content"><img class="content_img" src="/image/b3/b340bb97b63c57df8aede603f4354006.png" /><p>2016年的第一天，Mozilla已经终止了对Firefox网络浏览器中一种名为SHA-1的不断减弱的安全技术的支持。几乎立刻，他们改变了决定，因为这将切断对一些较旧网站的访问。但在2017年2月，他们的担忧终于成真：研究人员创造了第一次真实世界的碰撞攻击，打破了SHA-1。这就是所有这一切的意义所在。</p><p>什么是SHA-1？</p><img class="content_img" src="/image/df/df6c067c77da023775ceed425f0301f7.jpg" /><p>SHA-1中的SHA代表Secure Hash Algorithm(安全散列算法)，简单地说，您可以将其视为一种对输入的数据进行加扰的数学问题或方法。它由美国国家安全局开发，是许多用于加密互联网上重要传输的技术的核心组成部分。您可能听说过常见的加密方法SSL和TLS，它们可以使用像SHA-1这样的散列函数来创建您在浏览器工具栏中看到的签名证书。</p><img class="content_img" src="/image/21/21c7bb71258a657245cbb39068e4f38e.jpg" /><p>我们不会深入任何SHA函数的数学和计算机科学，但这里是基本思想。“散列”是指基于任何数据输入的唯一代码。即使是输入到像SHA-1这样的散列函数的小的、随机的字母串也会返回很长的、设定的字符数，使得(可能)不可能将字符串恢复到原始的数字数据。这就是密码存储通常的工作方式。当您创建密码时，服务器会对您的密码输入进行哈希处理和存储。当您返回时，当您键入您的密码时，它会再次进行哈希处理。如果它与原始散列匹配，则可以假定输入是相同的，并且您将被授予访问您的数据的权限。</p><img class="content_img" src="/image/b8/b8d379c0db85fba0f0691f3176730672.png" /><p>哈希函数很有用，主要是因为它们可以很容易地判断输入(例如，文件或密码)是否已更改。当输入数据是秘密的(如密码)时，散列几乎不可能反转和恢复原始数据(也称为“密钥”)。这与“加密”有点不同，“加密”的目的是将数据打乱，以便稍后解扰，使用的是密码和密钥，而散列只是为了确保数据的完整性--确保一切都是一样的。开放源码的版本控制和分发软件Git正是出于这个原因使用SHA-1散列。</p><p>这是大量的技术信息，但简单地说：*哈希与加密不是一回事，因为它是用来识别文件是否改变的。</p><p>这项技术对我有什么影响？</p><img class="content_img" src="/image/63/63a93e347ade1b8ed14b525a4b444c74.jpg" /><p>假设您需要私下访问某个网站。你的银行，你的电子邮件，甚至你的Facebook账户-都使用加密来保护你发送给他们的数据的私密性。专业网站将通过从受信任的机构-第三方获得证书来提供加密，该证书受信任以确保加密在级别上，网站和用户之间是私有的，并且不会被任何其他方监视。与称为证书颁发机构(CA)的第三方的这种关系是至关重要的，因为任何用户都可以创建“自签名”证书-你甚至可以在运行Linux和Open SSL的机器上自己创建。例如，赛门铁克(Symantec)和Digicert是两家广为人知的CA公司。</p><img class="content_img" src="/image/d9/d935cc65e92c310b63400a8039e247cf.jpg" /><p>让我们来看看一个理论场景：How-to Geek希望通过加密保持登录用户会话的私密性，因此它使用证书签名请求(CSR)向像赛门铁克这样的CA请愿。它们创建用于加密和解密通过互联网发送的数据的公钥和私钥。CSR请求将公钥与网站相关信息一起发送给赛门铁克。赛门铁克对照其记录检查密钥，以验证数据是否被各方完全改变，因为数据中的任何微小变化都会使散列完全不同。</p><img class="content_img" src="/image/38/38e84137cf5b9d4f0a1b1b90eb725272.jpg" /><p>那些公钥和数字证书是由哈希函数签名的，因为这些函数的输出很容易看到。带有来自Symantec(在我们的示例中)的经过验证的散列的公钥和证书(在我们的示例中)是一个权威机构，它向How-to Geek的用户保证密钥是未更改的，并且不是由恶意的人发送的。</p><img class="content_img" src="/image/9e/9eaee685b03b63ba7623e4cd44249e63.jpg" /><p>因为哈希很容易监控，而且不可能(有些人会说是“很难”)反转，所以正确的、经过验证的哈希签名意味着证书和连接是可信的，并且可以同意将数据加密地从一端发送到另一端。但是如果散列实际上不是唯一的呢？</p><p>什么是碰撞攻击，在现实世界中可能发生吗？</p><p>你可能听说过数学中的“生日问题”，尽管你可能不知道它叫什么。基本的想法是，如果你聚集了足够多的人，两个或更多人过同一个生日的可能性相当高。实际上，这比你预期的要高-这看起来像是一个奇怪的巧合。在一个只有23个人的小团体中，有50%的可能性是两个人共享一个生日。</p><img class="content_img" src="/image/22/224ff7b25e7e0819ad4957d44e5a5016.png" /><p>这是包括SHA-1在内的所有哈希的固有弱点。从理论上讲，SHA函数应该为放入其中的任何数据创建唯一的散列，但随着散列数量的增加，不同的数据对创建几乎相同的散列的可能性变得更大。因此，可以使用与受信任证书相同的散列来创建不受信任的证书。如果他们让您安装不受信任的证书，它可能会伪装成受信任的证书，并分发恶意数据。</p><img class="content_img" src="/image/1c/1c091d4d4206000f7f748a5f1b5dd7d9.png" /><p>在两个文件中找到匹配的散列称为冲突攻击。目前已知至少已经发生了一次针对MD5散列的大规模冲突攻击。但在2017年2月27日，谷歌宣布了Shattered，这是有史以来第一次为SHA-1量身定做的碰撞。尽管内容不同，但Google能够创建一个与另一个PDF文件具有相同SHA-1散列的PDF文件。</p><p>已对PDF文件执行粉碎。PDF是一种相对宽松的文件格式；可以进行许多微小的位级更改，而不会阻止读者打开它或造成任何明显的差异。PDF还经常被用来传递恶意软件。虽然粉碎可以在其他类型的文件上运行，如ISO，但证书是严格指定的，因此不太可能发生这样的攻击。</p><p>那么这次袭击有多容易实施呢？粉碎的方法是基于马克·史蒂文斯在2012年发现的一种方法，该方法需要超过260.3次(9.223百万分之一)的SHA-1操作-这是一个惊人的数字。然而，这种方法仍然比使用暴力达到相同结果所需的操作少10万倍。谷歌发现，在110块高端显卡并行工作的情况下，大约需要一年时间才能产生冲突。从Amazon AWS租用此计算时间的费用约为11万美元。请记住，随着电脑部件价格的下降，你可以用更少的钱获得更多的电力，像粉碎这样的攻击变得更容易实施。</p><p>11万美元看起来可能很多，但对一些组织来说，这是在负担得起的范围内-这意味着现实生活中的网络恶棍可能会伪造数字文档签名，干扰Git和SVN等备份和版本控制系统，或者让恶意的Linux ISO看起来是合法的。</p><p>幸运的是，有一些缓解因素可以阻止这种攻击。SHA-1很少再用于数字签名。认证机构不再提供用SHA-1签名的证书，Chrome和Firefox也都放弃了对它们的支持。Linux发行版通常每年发布一次以上，这使得攻击者创建恶意版本，然后生成一个具有相同SHA-1散列的填充是不切实际的。</p><p>另一方面，一些基于粉碎的攻击已经在现实世界中发生了。SVN版本控制系统使用SHA-1来区分文件。将具有相同SHA-1散列的两个PDF上传到SVN存储库会导致其损坏。</p><p>我如何保护自己免受SHA-1攻击？</p><p>一般用户没有太多事情要做。如果您使用校验和来比较文件，则应该使用SHA-2(SHA-256)或SHA-3，而不是SHA-1或MD5。同样，如果您是开发人员，请确保使用更现代的散列算法，如SHA-2、SHA-3或bcrypt。如果你担心Shattered被用来给两个不同的文件赋予相同的散列，Google在Shattered网站上发布了一个工具，可以帮你检查。</p><p>图片来源：乐高火狐，大量Hash，请不要伤害网络作者，谷歌。</p><div class="item_info"><span class="item_key"><a href="/tag/散列/">散列</a></span><span class="item_key"><a href="/tag/数据/">数据</a></span><span class="item_key"><a href="/tag/sha/">sha</a></span></div></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>