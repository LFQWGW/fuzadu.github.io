<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>SafetyNet解释：为什么Android Pay和其他应用程序不能在Root设备上运行</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>SafetyNet解释：为什么Android Pay和其他应用程序不能在Root设备上运行</h2></div><div class="content"><img class="content_img" src="/image/18/1840acf5665553c7fc948bb179ab991d.jpg" /><p>让你的Android设备扎根，让你可以访问更多种类的应用程序，并更深入地访问Android系统。但有些应用程序--比如谷歌的Android Pay--在扎根的设备上根本不起作用。</p><p>谷歌使用一种名为安全网(SafetyNet)的东西来检测你的设备是否扎根，并阻止对这些功能的访问。谷歌也不是唯一的一个-大量的第三方应用程序也不能在扎根的Android设备上工作，尽管它们可能会通过其他方式检查root的存在。</p><p>SafetyNet：谷歌如何知道你已经扎根了你的Android手机</p><p>相关：厌倦了信用卡被盗？使用Apple Pay或Android Pay</p><p>Android设备提供“SafetyNet API”，这是安装在谷歌认可的Android设备上的Google Play服务层的一部分。谷歌称，这个API“提供了访问谷歌服务的途径，这些服务可以帮助你评估Android设备的健康和安全状况”。如果您是Android开发者，可以在您的应用中调用此接口来检查您正在运行的设备是否被篡改。</p><p>这个SafetyNet API的设计目的是检查设备是否被篡改-例如，它是否被用户扎根，正在运行自定义ROM，或者是否感染了低级恶意软件。</p><p>安装了谷歌Play Store和其他应用程序的设备必须通过谷歌的Android“兼容性测试套件”。设置设备根或安装自定义ROM可防止设备“与CTS兼容”。这就是SafetyNet API判断您是否是根用户的方式-它只检查CTS兼容性。同样，如果你得到的Android设备从未附带谷歌的应用程序-就像那些直接从中国工厂发货的20美元左右的平板电脑之一-它根本不会被认为是“CTS兼容”，即使你没有扎根它。</p><p>为了获取这些信息，谷歌游戏服务将下载一个名为“SNET”的程序，并在你的设备后台运行它。该程序从您的设备收集数据，并定期将其发送到Google。谷歌将这些信息用于各种目的，从了解更广泛的Android生态系统到确定你的设备软件是否被篡改。Google没有解释SNET到底在寻找什么，但SNET很可能会检查您的系统分区是否已从出厂状态修改。</p><p>您可以通过下载SafetyNet Helper Sample或SafetyNet Playground等应用程序来检查设备的SafetyNet状态。这款应用程序会向谷歌的SafetyNet服务询问你的设备状态，并告诉你从谷歌服务器得到的回应。</p><p>有关更多技术细节，请阅读这篇由软件安全公司Cigital的技术策略师John Kozyrakis撰写的博客文章。他深入研究了SafetyNet，并解释了更多关于它是如何工作的。</p><img class="content_img" src="/image/c3/c37b36e9f59d42ca5215f2d36b4359e4.png" /><p>这取决于应用程序</p><p>SafetyNet对于应用程序开发人员是可选的，应用程序开发人员可以选择是否使用它。SafetyNet只有在应用程序的开发者不希望它在有根的设备上运行时才会阻止该应用程序运行。</p><p>大多数应用程序根本不会检查SafetyNet API。即使是检查了SafetyNet API的应用程序-比如上面的测试应用程序-也不会在收到不良响应时停止工作。应用程序的开发人员必须检查SafetyNet API，如果得知设备的软件被修改，就会使应用程序拒绝运行。谷歌自己的Android Pay应用就是一个很好的例子。</p><p>Android Pay在已安装的设备上不起作用</p><p>谷歌推出的Android Pay移动支付解决方案在根深蒂固的Android设备上完全不起作用。试着启动它，你只会看到一条消息，上面写着“Android Pay不能使用。谷歌无法验证您的设备或在其上运行的软件是否与Android兼容。</p><p>当然，这不仅仅是根的问题--运行定制的ROM也会使您违反这一要求。如果你使用的是设备没有附带的自定义ROM，那么安全网络API会声称它不是“Android兼容的”。</p><img class="content_img" src="/image/ca/caae445e8008b3eed53fd3acd0266c45.png" /><p>相关：针对Root的案例：为什么Android设备没有扎根</p><p>记住，这不仅仅是检测扎根。如果你的设备感染了一些系统级恶意软件，这些恶意软件能够监视Android Pay和其他应用程序，SafetyNet API也会阻止Android Pay运行，这是一件好事。</p><p>让你的设备扎根打破了Android的正常安全模式。安卓支付通常使用安卓的沙盒功能来保护你的支付数据，但应用程序可以在扎根的设备上打破沙盒。如果Android Pay扎根或运行未知的自定义ROM，谷歌无法知道Android Pay在特定设备上会有多安全，所以他们会屏蔽它。一位Android Pay工程师在XDA开发者论坛上解释了这个问题，如果你想了解更多的话。</p><p>应用程序检测根的其他方式</p><p>SafetyNet只是一种应用程序可以检查它是否在扎根的移动设备上运行的方法。例如，三星设备包括一个名为KNOX的安全系统。如果您将设备连上根，诺克斯安全就会被触发。三星自己的移动支付应用三星支付(Samsung Pay)将拒绝在扎根的设备上运行。三星正在使用诺克斯，但它也可以使用SafetyNet。</p><p>同样，很多第三方应用程序也会阻止你使用它们，而且不是所有的应用程序都使用SafetyNet，它们可能只是检查设备上是否存在已知的根应用程序和进程。</p><p>当设备扎根时，很难找到不起作用的最新应用程序列表。但是，RootCloak提供了几个列表。这些名单可能已经过时，但它们是我们能找到的最好的名单。其中许多是银行和其他移动钱包应用程序，它们会阻止扎根手机上的访问，试图更好地保护你的银行信息不被其他应用程序捕获。视频流服务的应用程序也可能拒绝在有根的设备上运行，作为一种DRM措施，试图阻止您录制受保护的视频流。</p><p>有些应用程序可能会被欺骗</p><p>谷歌正在与SafetyNet玩猫捉老鼠的游戏，不断更新它，试图领先于人们绕过它。例如，安卓开发者Chainfire创造了一种无需修改系统分区就能让安卓设备扎根的新方法，即所谓的“无系统根”。SafetyNet最初没有检测到这类设备被篡改，Android Pay起作用了-但SafetyNet最终进行了更新，以检测这种新的扎根方法。这意味着Android Pay不再与无系统的root一起工作。</p><p>相关：忘记闪烁的ROM：使用Xposed Framework调整您的Android</p><p>根据应用程序检查root访问权限的方式，您可能能够欺骗它。例如，据报道，有一些方法可以在不触发Knox安全的情况下根除一些三星设备，这将允许您继续使用Samsung Pay。</p><p>在只检查系统中根应用的应用程序中，有一个名为RootCloak的Xposed Framework应用程序模块，据报道，它可以让你欺骗它们工作。这与DIRECTV GenieGo、Best Buy CinemaNow和Flixster的Movies等应用程序配合使用，这些应用程序通常不能在扎根的设备上运行。然而，如果这些应用程序被更新为使用谷歌的SafetyNet，它们就不会那么容易被这种方式欺骗了。</p><img class="content_img" src="/image/29/29fcf73aae1e4f95bfec548d3d074842.png" /><p>一旦你的设备扎根了，大多数应用程序都会继续正常工作。移动支付应用是一个很大的例外，其他一些银行和金融应用也是如此。付费视频流服务有时也会试图阻止你观看他们的视频。</p><p>如果你需要的应用程序在你的扎根设备上不起作用，你可以随时拔掉你的设备来使用它。在您将设备恢复到安全的出厂状态后，该应用程序应该可以工作。</p><p>图片来源：Flickr上的Deny Choo</p><div class="item_info"><span class="item_key"><a href="/tag/应用程序/">应用程序</a></span><span class="item_key"><a href="/tag/设备/">设备</a></span><span class="item_key"><a href="/tag/android/">android</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14813.html">为什么你的iPhone一直询问后台位置使用情况</a><li><a href="/story/14655.html">如何在Windows 10中自动连接到特定应用的VPN</a><li><a href="/story/14629.html">如何将您的Apple Card交易导出到电子表格</a><li><a href="/story/14578.html">如何在iPhone或iPad上“隐藏”应用程序</a><li><a href="/story/14547.html">如何在iPhone上测量海拔高度</a><li><a href="/story/14526.html">如何将电子邮件从Mac Mail导出到Notes应用程序</a><li><a href="/story/14520.html">如何在三星手机上启用安全文件夹</a><li><a href="/story/14425.html">如何定制Windows10的新闻应用</a><li><a href="/story/14402.html">假期的12条家庭技术支持小贴士</a><li><a href="/story/14381.html">如何在iPhone或iPad上安装自定义字体</a><li><a href="/story/14352.html">我的iPhone或iPad会感染病毒吗？</a><li><a href="/story/14345.html">如何在任天堂交换机游戏中进行语音聊天</a><li><a href="/story/14319.html">忘了屏幕时间吧！使用以下备选方案跟踪您在MacOS Catalina中的应用程序使用情况</a><li><a href="/story/14277.html">如何在Ubuntu上创建桌面快捷方式</a><li><a href="/story/14225.html">如何在Mac上收听播客</a><li><a href="/story/14212.html">MacOS Catalina的新安全功能如何工作</a><li><a href="/story/14205.html">MacOS Catalina中的iTunes功能在哪里？</a><li><a href="/story/14198.html">如何在Android上设置应用时限和拦截应用</a><li><a href="/story/14180.html">什么是Windows 10X，它有什么不同？</a><li><a href="/story/14171.html">如何在装有iOS 13的iPhone或iPad上删除应用程序</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>