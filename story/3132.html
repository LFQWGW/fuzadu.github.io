<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在不输入密码的情况下通过SSH远程复制文件</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在不输入密码的情况下通过SSH远程复制文件</h2></div><div class="content"><img class="content_img" src="/image/20/20a09cb13ecd4352209b7d91a6dcb046.png" /><p>当您需要远程管理计算机时，SSH是一个救命稻草，但是您知道您也可以上传和下载文件吗？使用SSH密钥，您可以省去输入密码，并将其用于脚本！</p><p>只要正确配置了SSH访问，此过程就可以在Linux和Mac OS上运行。如果您使用的是Windows，您可以使用Cygwin获得类似Linux的功能，稍作调整，SSH也可以运行。</p><p>通过SSH复制文件</p><p>Secure Copy是一个非常有用的命令，而且非常容易使用。命令的基本格式如下：</p><p>最大的问题是如何格式化远程部分。当您寻址远程文件时，需要使用以下方式：</p><p>服务器可以是URL或IP地址。后面跟一个冒号，然后是有问题的文件或文件夹的路径。让我们看一个例子。</p><p>此命令的特点是[-P]标志(请注意，它是大写的P)。这允许我指定端口号，而不是默认的22。这对我来说是必要的，因为我已经配置了我的系统。</p><p>接下来，我的原始文件是“url.txt”，它位于名为“Desktop”的目录中。目标文件位于“~/Desktop/url.txt”中，与“/user/yatri/Desktop/url.txt”相同。此命令由用户“yatri”在远程计算机“192.168.1.50”上运行。</p><img class="content_img" src="/image/fb/fb52959faf6a2ab767f79ca61451e943.png" /><p>如果您需要做相反的事情怎么办？您可以类似地从远程服务器复制文件。</p><img class="content_img" src="/image/d0/d0330cc757508a59309f66bbe1c95514.png" /><p>在这里，我将一个文件从远程计算机的“~/Desktop/”文件夹复制到我的计算机的“Desktop”文件夹。</p><p>要复制整个目录，您需要使用[-r]标志(请注意，它是小写的r)。</p><img class="content_img" src="/image/ac/ac05fc51ea61f9369a994b98fc1ad349.png" /><p>您还可以组合旗帜。而不是</p><p>你可以做的就是</p><p>这里最困难的部分是制表符补全并不总是起作用，所以让另一个终端运行SSH会话会很有帮助，这样您就知道要把东西放在哪里了。</p><p>不带口令的SSH和SCP</p><p>安全拷贝很棒。您可以将其放入脚本中，并将其备份到远程计算机。问题是您可能并不总是在附近输入密码。而且，老实说，把你的密码输入到一台你显然可以随时访问的远程计算机上，这真的是一件非常痛苦的事情。</p><p>嗯，我们可以通过使用密钥文件来使用密码。我们可以让计算机生成两个密钥文件-一个是属于远程服务器的公共文件，另一个是您的计算机上需要保护的私有文件-这些文件将用来代替密码。很方便，对吧？</p><p>在您的计算机上，输入以下命令：</p><p>这将生成两个密钥并将它们放入：</p><p>私钥名称为“id_rsa”，公钥名称为“id_rsa.pub”。</p><img class="content_img" src="/image/7b/7b6f6082f9f3b8a9aa0888c37da08588.png" /><p>输入命令后，系统将询问您将密钥保存在哪里。您可以按Enter键使用上述默认值。</p><p>接下来，系统将要求您输入密码。按Enter键将此项保留为空，然后在系统要求确认时再次执行此操作。下一步是将公钥文件复制到您的远程计算机。您可以使用SCP执行以下操作：</p><img class="content_img" src="/image/47/477c90843555d8197c57d42fa9f6e9f0.png" /><p>公钥的目标位于远程服务器上的以下文件中：</p><p>后续公钥可以附加到此文件，与~/.ssh/nowledhosts文件非常相似。这意味着，如果您希望在此服务器上为您的帐户添加另一个公钥，则需要将第二个id_rsa.pub文件的内容复制到现有Authorized_keys2文件的新行中。</p><p>安全考虑</p><p>这不是比密码更不安全吗？</p><p>在实际意义上，不是真的。生成的私钥存储在您正在使用的计算机上，它永远不会传输，甚至不会被验证。此私钥仅与那个公钥匹配，需要从拥有私钥的计算机启动连接。RSA非常安全，默认使用2048位长度。</p><p>这实际上在理论上非常类似于使用您的密码。如果有人知道您的密码，您的安全就会消失。如果有人拥有您的私钥文件，则具有匹配公钥的任何计算机都将失去安全性，但他们需要访问您的计算机才能获得该文件。</p><p>这个还能更安全吗？</p><p>您可以将密码与密钥文件结合使用。按照上述步骤操作，但请输入强密码。现在，当您通过SSH或使用SCP进行连接时，您将需要正确的私钥文件和正确的密码。</p><p>一旦您输入一次密码，系统将不会再次要求您输入密码，直到您关闭会话。这意味着在您第一次使用SSH/SCP时，您将需要输入密码，但是所有后续操作都不需要密码。一旦您注销您的计算机(不是远程计算机)或关闭您的终端窗口，那么您将不得不再次输入它。通过这种方式，您并没有真正牺牲安全性，但是您也不会一直为密码而受到骚扰。</p><img class="content_img" src="/image/c0/c0ce9856a0723a63d7c161ff0a0af780.png" /><p>我可以重复使用公钥/私钥对吗？</p><p>这真是个坏主意。如果有人找到您的密码，而您对所有帐户使用相同的密码，则他们现在可以访问所有这些帐户。同样，您的私钥文件也是超级机密和重要的。(有关更多信息，请查看在您的电子邮件密码泄露后如何恢复)</p><p>最好为您要链接的每台计算机和帐户创建新的密钥对。这样，如果您的一个私钥以某种方式被捕获，那么您只会泄露一台远程计算机上的一个帐户。</p><p>同样重要的是要注意，您的所有私钥都存储在同一位置：在计算机的~/.ssh/中，您可以使用TrueCrypt创建一个安全的加密容器，然后在~/.ssh/目录中创建符号链接。根据我正在做的事情，我会使用这种超级偏执的超级安全的方法来让我放心。</p><p>您是否在任何脚本中使用过SCP？您使用密钥文件而不是密码吗？在评论中与其他读者分享您自己的专业知识！</p><p></p><div class="item_info"><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/密码/">密码</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14796.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14712.html">如何使用Google Drive Progative Web App</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14550.html">如何在Linux上使用Tail命令</a><li><a href="/story/14514.html">您想知道的关于Linux上的inode的所有信息</a><li><a href="/story/14471.html">如何在Google Drive中更改文件所有者</a><li><a href="/story/14454.html">如何在Linux上使用stat命令</a><li><a href="/story/14419.html">如何在Linux中获取文件或目录的大小</a><li><a href="/story/14347.html">如何使用cURL从Linux命令行下载文件</a><li><a href="/story/14315.html">免费下载：Microsoft批量重命名PowerToy</a><li><a href="/story/14306.html">如何创建USB驱动器的映像</a><li><a href="/story/14240.html">如何在Linux上使用LESS命令</a><li><a href="/story/14209.html">如何在Google Drive中分配任务</a><li><a href="/story/14188.html">如何最终确定和撤销对共享Google文件的访问</a><li><a href="/story/14167.html">如何共享指向您的Google文件的“复制”链接</a><li><a href="/story/14164.html">如何将Google文档、工作表或幻灯片文件共享为网页</a><li><a href="/story/14127.html">如何在iPhone和iPad上将文件复制和备份到外部存储</a><li><a href="/story/14088.html">如何在iPhone或iPad上使用Safari下载文件</a><li><a href="/story/14037.html">如何在Linux上创建别名和Shell函数</a><li><a href="/story/14026.html">如何在Linux上使用chgrp命令</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>