<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何从Linux终端压缩或解压缩文件</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何从Linux终端压缩或解压缩文件</h2></div><div class="content"><p>ZIP文件是通常在Windows、MacOS甚至Linux系统上使用的通用归档文件。您可以使用一些常见的Linux终端命令创建zip存档或从其中解压文件。</p><p>ZIP压缩存档文件格式</p><p>由于ZIP格式在Windows领域的主导地位，ZIP文件可能是世界上最常见的压缩存档形式。</p><p>虽然.tar.gz和tar.bz2文件在Linux上很常见，但Windows用户可能会向您发送ZIP格式的归档文件。而且，如果您想存档一些文件并将它们发送给Windows用户，ZIP格式将是对每个人来说最简单、最兼容的解决方案。</p><p>相关：如何在Linux上从.tar.gz或.tar.bz2文件中提取文件</p><p>压缩、解压缩和其他实用程序</p><p>您可能已经知道，Linux和类似Unix的操作系统(如MacOS)都有允许您创建ZIP文件并从中提取文件的工具，称为zip和unzip。但是有一系列相关的实用程序，比如zipcloak、zipDetails、zipplit和zipinfo。</p><p>我们检查了一些Linux发行版，看看它们在标准安装中是否包含这些实用程序。所有实用程序都出现在Ubuntu 19.04、18.10和18.04中。他们也出现在Manjaro 18.04。Feddora29包括zip和unzip，但没有其他实用程序，CentOS也是如此。</p><p>要在Fedora 29上安装缺少的元素，请使用以下命令：</p><code>sudo dnf install perl-IO-Compress</code><img class="content_img" src="/image/cb/cb008fa933775aaa3f7097e20a4855b6.png" /><p>要在CentOS 7上安装缺少的元素，请使用以下命令：</p><code>sudo yum install perl-IO-Compress</code><img class="content_img" src="/image/4e/4e4efb87c1a31d488e746c1252ba4756.png" /><p>如果上面没有提到的Linux发行版中缺少任何zip实用程序，请使用该Linux发行版的软件包管理工具安装所需的软件包。</p><p>如何使用zip命令创建ZIP文件</p><p>要创建ZIP文件，您需要告诉Zip存档文件的名称以及要包括在其中的文件。您不需要在归档名称中添加“.zip”扩展名，但是这样做没有什么坏处。</p><p>要创建一个名为source_code.zip的文件，其中包含当前目录中的所有C源代码文件和头文件，您可以使用以下命令：</p><code>zip source_code *.c *.h</code><img class="content_img" src="/image/77/7755f91cd06ff07fafab6380d3bcfdf8.png" /><p>每个文件在添加时都会列出。将显示文件名和对该文件实现的压缩量。</p><img class="content_img" src="/image/53/53a984876e022fd0a3b3dbca675939f5.png" /><p>如果您查看新的ZIP存档，您可以看到“.zip”文件扩展名是由zip自动添加的。</p><code>ls -l source_code.zip</code><img class="content_img" src="/image/3a/3ab2303238f81b854824b5f03982aae7.png" /><p>如果您不想在创建ZIP文件时看到zip的输出，请使用-q(安静)选项。</p><code>zip -q source_code *.c *.h</code><img class="content_img" src="/image/86/86d604c20bf82fc3fafc9070fb19c4b9.png" /><p>在ZIP文件中包括目录</p><p>要在ZIP文件中包含子目录，请使用-r(递归)选项，并在命令行中包含子目录的名称。要像以前一样创建ZIP文件并包括存档子目录，请使用以下命令。</p><code>zip -r -q source_code archive/ *.c *.h</code><img class="content_img" src="/image/62/620052b5ce37e672f2c65a137c2eb38a.png" /><p>为了体谅将要从您创建的ZIP文件中提取文件的人，创建ZIP文件并将其中的文件包含在一个目录中通常是礼貌的。当接收ZIP文件的人将其解压时，所有文件都整齐地放置在他们计算机上的一个目录中。</p><p>在下面的命令中，我们将存档工作目录和所有子目录。请注意，此命令是从工作文件夹的父目录发出的。</p><code>zip -r -q source_code work/</code><img class="content_img" src="/image/0c/0c219ce4e2a475f8b16f499cd3abddea.png" /><p>设置压缩级别</p><p>您可以设置将文件添加到ZIP存档时对其应用的压缩量。范围是从0到9，0表示根本没有压缩。压缩率越高，创建ZIP文件所需的时间就越长。对于中等大小的ZIP文件，时差并不是很大的损失。但是，对于中等大小的ZIP文件，默认压缩(级别6)可能已经足够好了。</p><p>要使zip使用特定的压缩级别，请在命令行上将数字作为选项传递，并使用“-”，如下所示：</p><code>zip -0 -r -q source_code work/</code><img class="content_img" src="/image/6d/6def36b5a89f9a725698f708ee746ebf.png" /><p>默认压缩级别为6。不需要提供-6选项，但如果提供-6选项也没有什么坏处。</p><code>zip -r -q source_code work/</code><img class="content_img" src="/image/54/5405573bf21705535a9b66b645ee5851.png" /><p>最大压缩级别为9级。</p><code>zip -9 -r -q source_code work/</code><img class="content_img" src="/image/13/13b08ac9a57d81e646eaa2b3771dac31.png" /><p>在这里选择存档的文件和目录，无压缩(0级)和默认压缩(6级)之间的差异是400K，而默认压缩和最高压缩级别(9级)之间的差异只有4K。</p><p>这可能看起来不是很多，但对于包含数百甚至数千个文件的归档来说，每个文件的少量额外压缩将增加到值得节省的空间。</p><p>向ZIP文件添加密码</p><p>向ZIP文件添加密码很容易。使用-e(加密)选项，系统将提示您输入密码并重新输入以进行验证。</p><code>zip -e -r -q source_code work/</code><img class="content_img" src="/image/5f/5fdc3d53f332f9339e24780247471b5c.png" /><p>如何使用unzip命令解压缩ZIP文件</p><p>要从ZIP文件中提取文件，请使用unzip命令，并提供ZIP文件的名称。请注意，您确实需要提供“.zip”扩展名。</p><code>unzip source_code.zip</code><img class="content_img" src="/image/60/6009510219830fd2ed966968806533d2.png" /><p>解压文件时，它们将列在终端窗口中。</p><img class="content_img" src="/image/da/dab0dc80d1e717fff6806eae5cab2c0d.png" /><p>Zip文件不包含文件所有权的详细信息。所有解压的文件都将所有者设置为解压它们的用户。</p><p>与zip一样，unzip有一个-q(安静)选项，因此在解压文件时不需要看到文件清单。</p><code>unzip -q source_code.zip</code><img class="content_img" src="/image/09/0986af3e8e648b7e32de7370695ca520.png" /><p>将文件提取到目标目录</p><p>要将文件解压缩到特定目录中，请使用-d(目录)选项，并提供您希望将存档解压缩到的目录的路径。</p><code>unzip -q source_code.zip -d ./development</code><img class="content_img" src="/image/95/950983c57103456a9952c1f17ccbd379.png" /><p>提取受密码保护的ZIP文件</p><p>如果已使用密码创建了ZIP文件，解压缩将要求您提供密码。如果您没有提供正确的密码，解压缩将不会解压缩文件。</p><code>unzip -q source_code.zip</code><img class="content_img" src="/image/53/53a4aa00e9b16a1e6d458c5a00bcf6bd.png" /><p>如果您不关心您的密码是否被其他人看到-也不关心它是否存储在您的命令历史记录中-您可以在命令行上使用-P(密码)选项提供密码。(您必须使用大写“P”)</p><code>unzip -P fifty.treacle.cutlass -q source_code.zip</code><img class="content_img" src="/image/a8/a85c87dc987642fbb99427c01b48f3d1.png" /><p>排除文件</p><p>如果不想提取特定的文件或文件组，请使用-x(排除)选项。在本例中，我们希望提取除以“.h”扩展名结尾的文件之外的所有文件。</p><code>unzip -q source_code.zip -x *.h</code><img class="content_img" src="/image/fd/fdcb7b77727745b794ef2fde7de573a9.png" /><p>覆盖文件</p><p>假设您解压了一个归档文件，但是您错误地删除了一些解压的文件。</p><p>解决这个问题的一个快速方法是再次解压这些文件。但是，如果您尝试将ZIP文件解压到与之前相同的目录中，unzip将提示您决定是否覆盖这些文件。它预计会有以下回应之一。</p><p>除了r(重命名)响应之外，这些响应区分大小写。</p><p>
Y：是，覆盖此文件。
N：不，不要覆盖此文件。
A：全部，覆盖所有文件。
N：无，不覆盖任何文件。
R：重命名，解压缩此文件，但给它一个新名称。系统将提示您输入新名称。</p><img class="content_img" src="/image/d3/d312f0078e406562d8abd92d77b8fa1f.png" /><p>要强制解压缩覆盖任何现有文件，请使用-o(覆盖)选项。</p><code>unzip -o -q source_code.zip</code><img class="content_img" src="/image/d3/d396219c23bae8a8a8d1a47d5fb51ef9.png" /><p>替换丢失文件的最有效方法是仅解压缩存档中不在目标目录中的所有文件。为此，请使用-n(从不覆盖)选项。</p><code>unzip -n source_code.zip</code><img class="content_img" src="/image/d4/d42668f58de8eb7297d3ca5070051605.png" /><p>查看ZIP文件内部</p><p>在解压ZIP文件之前查看其中的文件列表通常很有用，也很有指导意义。您可以使用-l(列出存档)选项来实现这一点。它是通过LESS管道传输的，以使输出易于管理。</p><code>unzip -l source_code.zip | less</code><img class="content_img" src="/image/c0/c02447a943c735355f89fbad7ae0bb96.png" /><p>输出显示ZIP文件中的目录和文件、它们的长度以及它们被添加到存档的时间和日期。按“Q”退出LESS。</p><img class="content_img" src="/image/6f/6f6ece619fd665aedc6296eae29e4578.png" /><p>正如我们将看到的，还有其他方法可以窥探ZIP文件的内部，这些方法提供不同类型的信息。</p><p>使用zipcloak命令添加密码</p><p>如果您已经创建了ZIP文件，但忘记添加密码，您该怎么办？您可以使用zipcloak命令快速向ZIP文件添加密码。在命令行上传递ZIP文件的名称。系统将提示您输入密码。您需要再次输入密码来验证密码。</p><code>zipcloak source_code.zip</code><img class="content_img" src="/image/d0/d0eecf85143d6c7b149817b269d626d9.png" /><p>使用zipDetails命令查看文件详细信息</p><p>zipDetails命令将向您显示有关ZIP文件的大量信息。处理此命令可以提供的输出量的唯一明智方法是通过较少的管道传输它。</p><code>zipdetails source_code.zip | less</code><img class="content_img" src="/image/4c/4c49a09750d8893b875ba384a3074267.png" /><p>请注意，即使ZIP文件受密码保护，信息也将包括文件名。这种类型的信息作为元数据存储在ZIP文件中，不是加密数据的一部分。</p><img class="content_img" src="/image/66/66f5574e04707380bcbcd94ae0f6df05.png" /><p>使用zipgrep命令搜索文件内部</p><p>zipgrep命令允许您在ZIP文件中的文件内进行搜索。在下面的示例中，我们想知道ZIP文件中的哪些文件包含文本“keyval.h”。</p><code>zipgrep keyval.h source_code.zip</code><img class="content_img" src="/image/45/45db50f824a034dd3a0a281757561888.png" /><p>我们可以看到，文件slang.c和getval.c包含字符串“keyval.h”。我们还可以看到，在ZIP文件的不同目录中，每个文件都有两个副本。</p><p>使用zipinfo命令查看信息</p><p>zipinfo命令为您提供了另一种查看ZIP文件内部的方法。和以前一样，我们通过LESS管道输出。</p><code>zipinfo source_code.zip | less</code><img class="content_img" src="/image/c3/c3a0516230279940d6e8ae76b778c5fe.png" /><p>从左到右，输出显示：</p><p>
文件权限。
用于创建ZIP文件的工具版本。
原始文件大小。
文件描述符(如下所述)。
压缩的方法(在本例中为放气)。
日期和时间戳。
文件和任何目录的名称</p><p>文件描述符由两个字符组成。第一个字符将是“t”或“b”，表示纯文本或二进制文件。如果是大写字母，则文件是加密的。第二个字符可以是四个字符中的一个。此字符表示此文件包含的元数据类型：无、扩展本地标头、“额外字段”或两者兼而有之。</p><p>
-：如果两者都不存在，则字符将为连字符。
L：如果有扩展的本地标头，但没有额外字段。
X：如果没有扩展的本地标头，但有一个额外的字段。
X：如果有一个扩展的本地报头，并且有一个额外的字段</p><img class="content_img" src="/image/6f/6f4dcb5b847907001be44394f07121c1.png" /><p>使用zipplit命令拆分文件</p><p>如果您需要将ZIP文件发送给其他人，但该文件存在大小限制或传输问题，则可以使用zipplit命令将原始ZIP文件拆分为一组较小的ZIP文件。</p><p>-n(大小)选项允许您设置每个新ZIP文件的最大大小。在本例中，我们拆分source_code.zip文件。我们不希望任何新的ZIP文件大于100KB(102400字节)。</p><code>zipsplit -n 102400 source_code.zip</code><img class="content_img" src="/image/68/6846e0990ebf09b10e1bd51258d0d4b5.png" /><p>您选择的大小不能小于ZIP文件中任何文件的大小。</p><p>使用这些命令，您可以创建自己的ZIP文件，解压缩您收到的ZIP文件，并对它们执行各种其他操作，而无需离开Linux终端。</p><div class="item_info"><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/zip/">zip</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14796.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14712.html">如何使用Google Drive Progative Web App</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14550.html">如何在Linux上使用Tail命令</a><li><a href="/story/14514.html">您想知道的关于Linux上的inode的所有信息</a><li><a href="/story/14471.html">如何在Google Drive中更改文件所有者</a><li><a href="/story/14454.html">如何在Linux上使用stat命令</a><li><a href="/story/14419.html">如何在Linux中获取文件或目录的大小</a><li><a href="/story/14347.html">如何使用cURL从Linux命令行下载文件</a><li><a href="/story/14315.html">免费下载：Microsoft批量重命名PowerToy</a><li><a href="/story/14306.html">如何创建USB驱动器的映像</a><li><a href="/story/14240.html">如何在Linux上使用LESS命令</a><li><a href="/story/14209.html">如何在Google Drive中分配任务</a><li><a href="/story/14188.html">如何最终确定和撤销对共享Google文件的访问</a><li><a href="/story/14167.html">如何共享指向您的Google文件的“复制”链接</a><li><a href="/story/14164.html">如何将Google文档、工作表或幻灯片文件共享为网页</a><li><a href="/story/14127.html">如何在iPhone和iPad上将文件复制和备份到外部存储</a><li><a href="/story/14088.html">如何在iPhone或iPad上使用Safari下载文件</a><li><a href="/story/14037.html">如何在Linux上创建别名和Shell函数</a><li><a href="/story/14026.html">如何在Linux上使用chgrp命令</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>