<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>IT极客：如何使用DHCP中继(Junos)</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>IT极客：如何使用DHCP中继(Junos)</h2></div><div class="content"><img class="content_img" src="/image/5a/5af3998cad8530f11a274760d01184cd.jpg" /><p>您是否曾经遇到过这样的问题：您只希望网络上有一台DHCP服务器来集中管理您的作用域，但您有多个虚拟VLAN？HTG解释了如何使用DHCP中继代理。</p><p>概述 / 综述</p><p>DHCP协议的创建是为了使客户端可以自动获取其IP地址，而无需人工干预(是的，这在过去是IT-ing的实际组成部分)。其工作方式是，当客户端连接到网络时，它会发出一个“广播”数据包，请求查找DHCP服务器。在VLAN出现之前，这在过去是“可以的”。VLAN创建新的边界，并将您的虚拟物理网络分割为几个几乎完全隔离的网络(V-LAN因此而得名)。VLAN的一个缺点是，现在DHCP服务器和客户端不能直接通信，因为“Brodcast”数据包不能“跳过”网络。那么，如何避免每个VLAN都有DHCP服务器，并将来自VLAN中的客户端的DHCP请求传递回中心服务器？</p><p>DHCP中继的发明就是为了克服这个问题，本质上是通过“路由”或“代理”客户端的请求。这些请求由客户端在其本地网络上广播，中继代理捕获它们并使用单播将它们转发到DHCP服务器。返回的DHCP应答也使用单播到达中继代理，中继代理在客户端网络上发送该应答。</p><p>DHCP中继可以有多种形式：微软的“中继代理”、思科的“IP助手”和Juniper的“助手引导”等等。它们都做同样的事情，在本指南中，我们将介绍如何在Junos设备上配置它。</p><p>托马斯·托马斯摄</p><p>GUI方式</p><p>我坚信，像这样的简单配置不应该在引擎盖下进行，所以我与Juniper的支持一起找到了这种配置的GUI方法。</p><p>您需要具备以下条件：</p><p>
来自Layer3交换机的“L3-interface”符号，表示您要为其启用转发的VLAN。
将为请求提供服务的DHCP服务器的IP。</p><p>获取VLAN-ID</p><p>要获取VLAN的“接口”符号，请打开设备的WebGUI，然后转到“配置”。</p><p>在“Switching”(交换)下，单击“VLAN”(虚拟局域网)，然后从列表中选择您需要的VLAN。</p><img class="content_img" src="/image/1f/1f834674b30eb158422deeb5d537dd12.png" /><p>在详细信息窗格中，“多层交换(RVI)”的值是必需的“接口”名称。记下这个值。</p><p>配置转发</p><p>在设备的WebGUI中，进入“配置”-&gt;“CLI工具”-&gt;“指向并单击CLI”。</p><p>单击“转发选项”-&gt;“配置”。</p><p>注意：如果您已经有了以下任何类别的配置，您将会看到一个“Edit”(编辑)按钮。</p><img class="content_img" src="/image/65/651ae91be0ca455cc574c1e552525e04.png" /><p>单击“助手”-&gt;“配置”。</p><img class="content_img" src="/image/3c/3cd4ed248b83cfd121a610ca98aecf1c.png" /><p>单击“Bootp”-&gt;“Configure”。</p><img class="content_img" src="/image/57/57d6b33ed2f8dc27670985496d143b75.png" /><p>点击“服务器”-&gt;“添加新条目”。</p><img class="content_img" src="/image/2f/2f775362762514f103307c049a84d6e7.png" /><p>输入DHCP服务器的IP，然后单击OK。</p><img class="content_img" src="/image/6a/6a167d9a71869e95b638ed935651dbd4.png" /><p>点击“界面”-&gt;“添加新条目”。</p><img class="content_img" src="/image/e7/e7990a1f037c50c5e9ee020449a12f3f.png" /><p>输入您要转发的VLAN的“接口”或“多层交换(RVI)”值的名称，如上述网段中所述。</p><img class="content_img" src="/image/32/32dbc22d020099085ad881a2aff3d895.png" /><p>完成后，您的配置应该如下图所示。</p><img class="content_img" src="/image/0f/0fe80834b37941f4e933b70cb7032fbc.png" /><p>提交您的更改。</p><p>CLI方式</p><p>如上所述，我不是CLI方式的粉丝。话虽如此，在这件事上你可能没有更多的选择，或者你可能需要这个新的程序是可脚本化的。无论是哪种情况，文档都解释说，这两行可以做到这一点(假设您已经设置了所有其他内容)：</p><p>其中，应更改上述IP和VLAN名称以反映您的设置。</p><p>在DHCP服务器端</p><p>这种配置我已经做过无数次了，而且总是连接回微软的DHCP服务器。至少在微软的新实现中，除了创建更合适的服务器范围外，不需要在服务器端进行任何额外的配置。也就是说，您需要有一个与请求来自的VLAN接口相对应的作用域。在我们的示例中，L3交换机的IP为192.168.191.254，网络掩码为255.255.255.0(C类)。处理我们示例的中继范围的DHCP配置如下所示：</p><img class="content_img" src="/image/a5/a53203bcff15f36a54e10327bfad7c7c.png" /><p>就是这样。你应该都准备好了。</p><p>-我刚想出这个部分在哪里可以做最多的…。-损坏？？</p><div class="item_info"><span class="item_key"><a href="/tag/dhcp/">dhcp</a></span><span class="item_key"><a href="/tag/vlan/">vlan</a></span><span class="item_key"><a href="/tag/网络/">网络</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/6371.html">如何强制您的PC保留其私有IP地址</a><li><a href="/story/3796.html">IT：如何在Windows Server 2008 R2中设置DHCP</a><li><a href="/story/3213.html">如何设置静态DHCP以使您的计算机的IP地址不会更改</a><li><a href="/story/125.html">将Ubuntu服务器从DHCP更改为静态IP地址</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>