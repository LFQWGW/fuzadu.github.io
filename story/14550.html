<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在Linux上使用Tail命令</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在Linux上使用Tail命令</h2></div><div class="content"><p>Linux ail命令显示文件末尾的数据。它甚至可以实时显示添加到文件中的更新。我们向您展示如何使用它。</p><p>系统杀了尾巴吗？</p><p>Tail命令显示文件末尾的数据。通常，新数据会添加到文件的末尾，因此Tail命令是查看文件中最新添加内容的一种快捷而简单的方法。它还可以监视文件，并在文件中出现每个新文本条目时将其显示出来。这使得它成为监控日志文件的一个很棒的工具。</p><p>许多现代Linux发行版都采用了操作系统和服务管理器。这是第一个执行的进程，它的进程ID为1，并且它是所有其他进程的父进程。此角色过去由较旧的init系统处理。</p><p>随之而来的是一种新的系统日志文件格式。不再以纯文本创建，在systemd下，它们以二进制格式记录。要读取这些日志文件，必须使用Jouractl实用程序。尾部命令使用纯文本格式。它不读取二进制文件。那么，这是否意味着Tail命令是寻找问题的解决方案呢？它还有什么可以提供的吗？</p><p>除了实时显示更新之外，Tail命令还有更多的功能。在这个问题上，仍然有大量的日志文件不是系统生成的，仍然是以纯文本文件的形式创建的。例如，应用程序生成的日志文件没有更改其格式。</p><p>使用尾部</p><p>将文件名传递给Tail，它将显示该文件的最后10行。我们使用的示例文件包含已排序单词的列表。每一行都有编号，因此按照示例操作并查看各种选项的效果应该很容易。</p><code>tail word-list.txt</code><img class="content_img" src="/image/2e/2e8526fe62d099fce2111b1dc70432f5.png" /><p>要查看不同的行数，请使用-n(行数)选项：</p><code>tail -n 15 word-list.txt</code><img class="content_img" src="/image/a6/a67d9ea80a2e7f8e0935128f6ade562f.png" /><p>实际上，您可以省略“-n”，只使用连字符“-”和数字。确保它们之间没有空格。从技术上讲，这是一个过时的命令表单，但它仍然在手册页中，并且仍然有效。</p><code>tail -12 word-list.txt</code><img class="content_img" src="/image/e6/e680084187af7455ce589e996bcd81f7.png" /><p>对多个文件使用Tail</p><p>您可以让Tail一次处理多个文件。只需在命令行上传递文件名：</p><code>tail -n 4 list-1.txt list-2.txt list-3.txt</code><img class="content_img" src="/image/d8/d8ff743d6d20704f0a11348b806fa37f.png" /><p>每个文件都会显示一个小标题，这样您就可以知道这些行属于哪个文件。</p><p>显示从文件开头开始的行</p><p>+(从开始计数)修饰符使尾部显示从文件开头开始的行，从特定行号开始。如果您的文件非常长，并且您选择了靠近文件开头的一行，那么您将得到很多发送到终端窗口的输出。如果是这样的话，通过管道从Tail输出到LESS是有意义的。</p><code>tail +440 list-1.txt</code><img class="content_img" src="/image/f8/f8b088d1fe5ee5f95b27c4ba66073f31.png" /><p>您可以以受控方式翻阅文本。</p><img class="content_img" src="/image/88/88fef8631c451078ca3ca210e51cf9d0.png" /><p>由于此文件中恰好有20，445行，因此此命令相当于使用“-6”选项：</p><code>tail +20440 list-1.txt</code><img class="content_img" src="/image/9b/9be0e8acf4b8b2801c7b6cdb161938a1.png" /><p>使用带尾部的字节</p><p>您可以使用-c(字节)选项告诉Tail使用以字节为单位的偏移量，而不是以行为单位的偏移量。如果您有一个格式化为常规大小记录的文本文件，这可能会很有用。请注意，换行符被视为一个字节。此命令将显示文件中的最后93个字节：</p><code>tail -c 93 list-2.txt</code><img class="content_img" src="/image/3a/3a87d073b2ca5e076b50d64c93a53354.png" /><p>您可以将-c(字节)选项与+(从文件开始计数)修饰符组合使用，并指定从文件开始计数的偏移量(以字节为单位)：</p><code>tail -c +351053 list-e.txt</code><img class="content_img" src="/image/88/885436db1ca69b6e05ddbf24089d1a68.png" /><p>连接到尾部的管道</p><p>早些时候，我们通过管道将Tail的输出转换为LESS。我们还可以将其他命令的输出通过管道传输到Tail。</p><p>要识别修改时间最早的五个文件或文件夹，可以使用带有ls的-t(按修改时间排序)选项，并将输出通过管道传输到Tail。</p><code>ls -tl | tail -5</code><img class="content_img" src="/image/e5/e5f4b9e0570a508f6b4364753ced19a3.png" /><p>HEAD命令列出从文件开头开始的文本行。我们可以结合使用Tail和Tail来提取文件的一部分。现在，我们使用head命令从文件中提取前200行。它被输送到尾部，尾部提取最后10行。这给我们提供了从191行到200行的结果。即前200行中的最后10行：</p><code>head -n 200 list-1.txt | tail -10</code><img class="content_img" src="/image/a9/a9ecd6873354fe9a63756b03df7c6c4c.png" /><p>此命令列出了最耗费内存的五个进程。</p><code>ps aux | sort -nk +4 | tail -5</code><img class="content_img" src="/image/40/40b557384c767ff6121533a72ac650c2.png" /><p>我们来分析一下。</p><p>ps命令显示有关正在运行的进程的信息。使用的选项包括：</p><p>
答：列出所有进程，而不仅仅是当前用户的进程。
u：显示面向用户的输出。
x：列出所有进程，包括那些不在TTY内运行的进程。</p><p>SORT命令对ps的输出进行排序。我们在排序中使用的选项包括：</p><p>
N：我按数字排序。
K+4：按第四列排序。</p><p>Tail-5命令显示排序输出中的最后五个进程。这是最耗费内存的五个进程。</p><p>使用Tail实时跟踪文件</p><p>使用Tail可以轻松跟踪到达文件(通常是日志文件)的新文本条目。在命令行上传递文件名，并使用-f(跟随)选项。</p><code>tail -f geek-1.log</code><img class="content_img" src="/image/3a/3a552c116f168ca4c72f7002ff25753b.png" /><p>当每个新的日志条目添加到日志文件中时，Tail会更新其在终端窗口中的显示。</p><img class="content_img" src="/image/73/7390979db158eab5bae67cb179540afd.png" /><p>您可以优化输出，使其仅包含特定相关或感兴趣的行。在这里，我们使用grep仅显示包含单词“Average”的行：</p><code>tail -f geek-1.log | grep average</code><img class="content_img" src="/image/1d/1decabaa1b3a43f52f68c73c7ab6ca10.png" /><p>要跟踪对两个或更多文件的更改，请在命令行上传递文件名：</p><code>tail -f -n 5 geek-1.log geek-2.log</code><img class="content_img" src="/image/29/290ecb0bc853fa568d342125706fbe44.png" /><p>每个条目都标记有一个标头，该标头显示文本来自哪个文件。</p><img class="content_img" src="/image/77/775b16c4470488afc2dd8e75d46f6288.png" /><p>每次新条目到达后续文件时，显示都会更新。要指定更新周期，请使用-s(休眠周期)选项。这告诉Tail在两次文件检查之间等待若干秒(在本例中为5秒)。</p><code>tail -f -s 5 geek-1.log</code><img class="content_img" src="/image/2f/2fe9f00f84bf0861fc6bfe3864c49edb.png" /><p>诚然，您不能通过查看屏幕截图来判断，但是文件的更新是每两秒进行一次。新文件条目每五秒在终端窗口中显示一次。</p><img class="content_img" src="/image/65/651e0cd521378834beedc7f433dbe075.png" /><p>当您将文本添加到多个文件时，可以隐藏指示文本来自哪个日志文件的标头。使用-q(安静)选项执行此操作：</p><code>tail -f -q geek-1.log geek-2.log</code><img class="content_img" src="/image/27/27e46cb531711e11bca49e24f3a331a4.png" /><p>文件的输出以文本的无缝混合形式显示。没有任何迹象表明每个条目来自哪个日志文件。</p><img class="content_img" src="/image/da/daf8f0cf4175c51b5456ac91267e618e.png" /><p>尾巴还是有价值的</p><p>虽然现在由Jouralctl提供对系统日志文件的访问，但Tail仍然可以提供很多功能。当它与其他命令结合使用时，通过管道进入或退出尾部时尤其如此。</p><p>systemd可能已经改变了格局，但传统实用程序仍然有一席之地，这些实用程序符合Unix的理念，即做一件事并做好它。</p><div class="item_info"><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/命令/">命令</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14796.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14712.html">如何使用Google Drive Progative Web App</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14514.html">您想知道的关于Linux上的inode的所有信息</a><li><a href="/story/14471.html">如何在Google Drive中更改文件所有者</a><li><a href="/story/14454.html">如何在Linux上使用stat命令</a><li><a href="/story/14419.html">如何在Linux中获取文件或目录的大小</a><li><a href="/story/14347.html">如何使用cURL从Linux命令行下载文件</a><li><a href="/story/14315.html">免费下载：Microsoft批量重命名PowerToy</a><li><a href="/story/14306.html">如何创建USB驱动器的映像</a><li><a href="/story/14240.html">如何在Linux上使用LESS命令</a><li><a href="/story/14209.html">如何在Google Drive中分配任务</a><li><a href="/story/14188.html">如何最终确定和撤销对共享Google文件的访问</a><li><a href="/story/14167.html">如何共享指向您的Google文件的“复制”链接</a><li><a href="/story/14164.html">如何将Google文档、工作表或幻灯片文件共享为网页</a><li><a href="/story/14127.html">如何在iPhone和iPad上将文件复制和备份到外部存储</a><li><a href="/story/14088.html">如何在iPhone或iPad上使用Safari下载文件</a><li><a href="/story/14037.html">如何在Linux上创建别名和Shell函数</a><li><a href="/story/14026.html">如何在Linux上使用chgrp命令</a><li><a href="/story/14024.html">如何快速搜索Google Drive</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>