<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何从Windows Server 2008 PXE引导Ubuntu映像</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何从Windows Server 2008 PXE引导Ubuntu映像</h2></div><div class="content"><img class="content_img" src="/image/9c/9cbfb188fba5de00289780ca69e9fb96.png" /><p>本指南介绍如何配置Windows Server2008机器以推出可由无盘终端拾取的静态Ubuntu映像，以便您可以让任意数量的机器运行全功能的Ubuntu实例，而无需硬盘驱动器，只要它们能够PXE引导即可。</p><p>这是亚历山大·卡尼蒂斯(Alexander Karnitis)和科迪·杜尔(Cody Dull)的客座文章，这两位读者在Hyndman Inc工作，必须弄清楚如何为自己的工作完成这项任务。他们好心地为其他人写下了这个过程。</p><p>我为什么想要这个？</p><p>PXE引导使管理网络变得更容易且成本更低，并且从Windows服务器提供自定义Ubuntu映像的功能有助于使您的环境更加健壮。您可以使用这些映像为用户提供相同的基本工作环境，拥有易于恢复的系统(只需重新启动机器)，对发生故障的机器执行诊断，等等。此外，通过从Windows服务器提供这些镜像，可以从单个位置同时提供Windows和Ubuntu镜像，尽管这超出了本指南的范围。</p><p>我需要什么？</p><p>
运行Windows部署服务(WDS)的Windows Server 2008计算机。
支持PXE引导的客户端。
运行DHCP的Windows服务器计算机。
NFS服务器(本指南假设NFS服务器与WDS服务器相同，但情况并非如此)</p><p>创建WDS服务器</p><p>在Windows服务器上安装Windows部署服务并不是非常困难，而且Microsoft有很好的指南来指导您完成安装过程(这里是2008和2008 R2)，因此本指南不会介绍如何执行此操作，但要知道您同时需要部署服务器和传输服务器。另请注意，在配置角色时，您需要在安装过程中选中“响应所有(已知和未知)客户端计算机”复选框，除非您正在引导的计算机已为Active Directory所知。这是因为服务器将Active Directory称为已知和未知设备上的授权。</p><img class="content_img" src="/image/7f/7f13789c891d2656d93259ec3c8fe76f.jpg" /><p>应该按照指南进行操作，直到“添加图像的步骤”部分，因为我们将通过pxelinux添加图像，而不是通过WDS。</p><p>安装pxelinux</p><p>下载并解压缩syslinux的副本(一个可能的来源在此处)。从这里开始，我们将把pxelinux需要运行的文件复制到wds目录中。具体地说，对于pxelinux 5.01，这意味着我们将复制以下文件：</p><p>·Core\pxelinux.0</p><p>·COM32\MENU\vesamenu.c32</p><p>·com32\lib\libcom32.c32</p><p>·com32\elflink\ldlinux.c32</p><p>·com32\libutil\libutil.c32</p><p>·com32\chain\chain.c32</p><p>这些文件将被复制到所需的体系结构目录(\boot\x64和/或\boot\x86)。复制文件之后，体系结构目录应该类似于下面的内容(x86和x64之间略有不同，但pxelinux没有细微差别)。</p><img class="content_img" src="/image/80/807d24878557035f0ba709bd9ec66ef8.jpg" /><p>这里，体系结构目录位于自定义WDS角色时指定用于保存WDS文件的目录下。</p><p>此时，我们将不再使用任何其他syslinux文件，因此可以安全地删除syslinux目录。</p><p>配置PXElinux</p><p>pxelinux配置文件可以进行大量定制，以便根据硬件类型和硬件地址，或者基于IP地址或IP地址范围(这里有更多信息)，为不同的计算机提供唯一的引导菜单，并且可以提供相当多的引导方法和相当强大的菜单系统(这里有更多信息)。然而，出于本基本指南的目的，我们将坚持使用默认配置文件，并解释可用于pxeboot a LiveCD的基本菜单。首先，配置文件需要位于名为“pxelinux.cfg”的子文件夹中，因此在您将pxelinux文件复制到的同一目录中创建该文件夹。我们还在pxelinux.cfg文件夹旁边创建了一个“Images”文件夹来存储我们所有的Linux映像。此时，架构文件夹应该如下所示：</p><img class="content_img" src="/image/09/09a70bef364a9e6b5bcc98b4fab8bc33.jpg" /><p>现在，在pxelinux.cfg文件夹中，创建一个不带文件扩展名的名为“default”的文件。</p><p>在记事本等文本编辑器中打开该文件，然后键入以下内容：</p><p>请注意，此设置假定映像存储在架构目录的Images/UbuntuLIVE下。</p><p>有关此操作的更多信息，您可以查看：</p><p>
https://www.howtogeek.com/61263/how-to-network-boot-pxe-the-ubuntu-livecd/</p><p>创建NFS共享</p><p>在Windows服务器上创建NFS共享也非常简单，可以按照下面的步骤完成。但是，关于权限，有几点需要注意。</p><p>首先，必须更改共享文件夹上的NTFS权限，因为Everyone组需要具有读取和执行权限。</p><img class="content_img" src="/image/3a/3af0e76be45e058596394505f3fe198b.jpg" /><img class="content_img" src="/image/7b/7b057dcf359251b3ee785d15ad4844d5.jpg" /><p>确保创建的共享是NFS共享，而不是SMB共享。</p><img class="content_img" src="/image/89/891b2921ec3845c170cd908146757fbc.jpg" /><p>此外，所有计算机都需要具有匿名访问权限，并且Everyone NTFS权限需要应用于匿名用户。</p><img class="content_img" src="/image/86/86543a0cdc3430f88b1cedcba218df5c.jpg" /><img class="content_img" src="/image/88/884e8598fe08f814d864dc0cbc92d74c.jpg" /><p>一旦一切都设置好了，所有的设置可能还需要一段时间才能通过网络传播，但是一旦他们这样做了，就应该可以从您的Windows Server盒开始提供LiveCD服务了！要测试服务器，您可以分享一张取自Ubuntu网站的简单LiveCD。不过，也可以提供定制的LiveCD。如果您计划对LiveCD进行一些基本配置，可以按照本文进行操作：</p><p>
https://www.howtogeek.com/109736/how-to-create-a-custom-ubuntu-live-cd-or-usb/</p><p>但是，如果您想要进行一些更密集的定制(如调整Unity)(使用上面的方法不能很好地完成)，或者如果您想使用一台简单的机器并提供完全相同的副本，另一个相当简单的方法可以让您制作一个可以提供服务的图像，如下所示：</p><p>创建和自定义您的Ubuntu Live CD</p><p>创建新的自定义映像很容易。如果您还没有虚拟机播放器，请下载并安装。本指南中的步骤适用于Oracle VM VirtualBox。https://www.virtualbox.org/wiki/Downloads</p><p>创建一个新的虚拟机，选择Linux作为Type，选择Ubuntu或Ubuntu(64位)作为版本，根据您的喜好，单击Next。</p><img class="content_img" src="/image/6c/6c252ea5bf2770d041757422efcf44da.gif" /><p>选择要分配的内存量，建议至少1024 MB，单击“下一步”。</p><img class="content_img" src="/image/4c/4cddd62095b3b090d3820ace55597a23.gif" /><p>选择立即创建类型为VDI的新虚拟硬盘，并使其动态分配。</p><img class="content_img" src="/image/27/2788310f9666e08bab767ec8031c0e4d.gif" /><img class="content_img" src="/image/0c/0c2d58a8d53873c6f6a4ce26d868c2e7.gif" /><p>从Ubuntu网站下载Ubuntu 12.04 LTS Live CD。确保您选择的版本与您在步骤2中选择的版本相同。http://www.ubuntu.com/download/desktop</p><p>转到您刚刚创建的VM的设置。在Storage(存储)下，单击Controller：IDE(控制器：IDE)下的单个磁盘。在屏幕右侧的Attributes(属性)下，单击CD/DVD Drive(CD/DVD驱动器)字段旁边带有箭头的磁盘。单击选择虚拟文件。导航到下载Live CD的位置并选择它。</p><img class="content_img" src="/image/6b/6b5a7e89b98f39f4465a6062032234c7.gif" /><p>现在可以启动VM并安装Ubuntu12.04。</p><p>安装后，进行所有需要的更改。我们确实做了一些更改，包括：</p><p>
如果除系统管理员之外的任何人都要使用它，请以标准用户的身份创建一个用户帐户，并将其设置为自动登录，而不需要密码。
根据最终映像的用途删除任何不必要的程序。如果不需要，可以删除的一些较大的程序有：Firefox、LibreOffice、Gwibber、Thunderbird、EMPERENCE和任何游戏。您可以通过使用终端中的APTITLE PURGE&lt;PROGRAM NAME&gt;命令或从Ubuntu软件中心安装Synaptic Package Manager来完成此操作。
在“启动应用程序”下，为要在启动时运行的任何程序创建一个条目。例如，如果这些计算机将主要用于远程桌面连接，请将Remmina Remote Desktop设置为自动启动。
要更改默认分辨率，请创建将运行xrandr命令的文件。

我们用来关闭瘦客户机上的集成显示并更改连接的监视器分辨率的示例脚本为以下两行：
xrandr--输出LVDS1-offx</p><div class="item_info"><span class="item_key"><a href="/tag/ubuntu/">ubuntu</a></span><span class="item_key"><a href="/tag/需要/">需要</a></span><span class="item_key"><a href="/tag/文件/">文件</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14303.html">如何在Ubuntu上使用Canonical的Livepatch服务</a><li><a href="/story/14235.html">Ubuntu 19.10“Eoan Ermine”的新特性现已推出</a><li><a href="/story/13773.html">为什么我从Ubuntu切换到Manjaro Linux</a><li><a href="/story/13639.html">Value Now表示，Steam“可能”支持Ubuntu 19.10</a><li><a href="/story/13212.html">Ubuntu 19.04“Disco Dingo”中的新特性现已推出</a><li><a href="/story/12148.html">Ubuntu 19.04被命名为“Disco Dingo”，将于2019年4月发布</a><li><a href="/story/11366.html">如何在Ubuntu中从第三方PPA安装软件</a><li><a href="/story/11108.html">如何将Windows Bash Shell更新到Ubuntu 16.04</a><li><a href="/story/10441.html">如何卸载(或重新安装)Windows10的Ubuntu Bash Shell</a><li><a href="/story/10001.html">Ubuntu 16.04让Ubuntu再次激动人心</a><li><a href="/story/9999.html">如何在Ubuntu 16.04上将Unity Desktop的启动程序移到屏幕底部</a><li><a href="/story/9632.html">如何在Ubuntu上获取最新的NVIDIA、AMD或英特尔显卡驱动程序</a><li><a href="/story/8978.html">如何在Ubuntu中启用系统自动更新</a><li><a href="/story/7904.html">是Linux的新手吗？不要使用Ubuntu，你可能会更喜欢Linux Mint</a><li><a href="/story/7360.html">无法引导时如何修复Ubuntu系统</a><li><a href="/story/7241.html">使用这些工具更改从Ubuntu和GNOME中删除的设置</a><li><a href="/story/7200.html">在Ubuntu上，Main、Restricted、Universal和Multiverse有什么不同？</a><li><a href="/story/6959.html">屏幕截图之旅：Nexus 7上的Ubuntu Touch 14.04</a><li><a href="/story/6920.html">关于Ubuntu 14.04 LTS你需要知道的5件事</a><li><a href="/story/6128.html">复兴你的旧电脑：旧电脑的3个最好的Linux系统</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>