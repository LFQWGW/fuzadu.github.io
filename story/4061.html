<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>IT：如何创建自签名安全(SSL)证书并将其部署到客户端计算机</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>IT：如何创建自签名安全(SSL)证书并将其部署到客户端计算机</h2></div><div class="content"><img class="content_img" src="/image/84/847846fa5c2f771d59d513f8c4eac1d7.jpg" /><p>毫无疑问，开发人员和IT管理员需要使用SSL证书通过HTTPS部署一些网站。虽然这个过程对于生产站点来说非常简单，但是出于开发和测试的目的，您可能会发现这里也需要使用SSL证书。</p><p>作为购买和续订年度证书的替代方案，您可以利用Windows Server的功能来生成方便、容易且应能完美满足这些类型需求的自签名证书。</p><p>在IIS上创建自签名证书</p><p>虽然有几种方法可以完成创建自签名证书的任务，但我们将使用Microsoft的SelfSSL实用程序。不幸的是，这不是IIS附带的，但它可以作为IIS6.0资源工具包(本文底部提供的链接)的一部分免费获得。尽管名称为“IIS6.0”，但该实用程序在IIS7中运行良好。</p><p>只需解压缩IIS6RT即可获得selfssl.exe实用程序。您可以从这里将其复制到Windows目录或网络路径/USB驱动器中，以备将来在另一台计算机上使用(这样您就不必下载并解压缩完整的IIS6RT)。</p><p>一旦您准备好selfSSL实用程序，请根据需要运行以下命令(以管理员身份)替换&lt;&gt;中的值：</p><p>下面的示例针对“mydomain.com”生成一个自签名通配符证书，并将其设置为9999天有效。此外，通过对提示回答YES，此证书将自动配置为绑定到IIS默认网站内的端口443。</p><img class="content_img" src="/image/53/535be1a61a33a09e9b1ca54a4ed330b4.png" /><p>虽然此时证书已准备好可以使用，但它仅存储在服务器上的个人证书存储中。最好也将此证书设置在受信任的根目录中。</p><p>进入开始&gt;运行(或Windows键+R)并输入“mmc”。您可能会收到UAC提示，接受它，将打开一个空的管理控制台。</p><img class="content_img" src="/image/cb/cb84cd28eda6f90870d5933208227120.png" /><p>在控制台中，转到“文件”&gt;“添加/删除管理单元”。</p><img class="content_img" src="/image/63/63c04da40f4d3eeaa3e393e3599a9d99.png" /><p>从左侧添加证书。</p><img class="content_img" src="/image/b1/b18b84401a664281fc9621fea2b9a6f4.png" /><p>选择计算机帐户。</p><img class="content_img" src="/image/7d/7d4ec52f072840b5ba27de8537216acf.png" /><p>选择本地计算机。</p><img class="content_img" src="/image/99/99fbbeb739c31b2305a4f681d1948d42.png" /><p>单击“确定”查看本地证书存储。</p><img class="content_img" src="/image/50/50d98a19725bf00d9bc59684b2b98bd3.png" /><p>导航到“个人”&gt;“证书”，然后找到您使用SelfSSL实用程序设置的证书。右键单击证书并选择复制。</p><img class="content_img" src="/image/ce/ce72b727c666674ae46820483a4bfbe4.png" /><p>导航到受信任的根证书颁发机构&gt;证书。右键单击证书文件夹，然后选择粘贴。</p><img class="content_img" src="/image/45/453d046e4e6b7654002e12f069f2370a.png" /><p>列表中应显示SSL证书的条目。</p><img class="content_img" src="/image/c8/c871848fc775f6f6ecd95d1e80014a66.png" /><p>此时，您的服务器使用自签名证书应该没有问题。</p><p></p><p>正在导出证书</p><p>如果您要访问在任何客户端计算机(即，非服务器的任何计算机)上使用自签名SSL证书的站点，为了避免潜在的证书错误和警告攻击，应该在每台客户端计算机上安装自签名证书(我们将在下面详细讨论)。为此，我们首先需要导出相应的证书，以便可以将其安装在客户端上。</p><p>在加载了“证书管理”的控制台中，导航到“受信任的根证书颁发机构”&gt;“证书”。找到证书，右键单击并选择所有任务&gt;导出。</p><img class="content_img" src="/image/cb/cbb1b2c45c9eda3688fbd3b6eb4987af.png" /><p>当提示导出私钥时，选择是。单击“下一步”。</p><img class="content_img" src="/image/50/500dbdc286533e276e35e2c895647f85.png" /><p>保留文件格式的默认选择，然后单击“下一步”。</p><img class="content_img" src="/image/3f/3fed1e4c618e3c15c62cca1bb2747983.png" /><p>输入密码。这将用于保护证书，如果不输入此密码，用户将无法在本地导入证书。</p><img class="content_img" src="/image/37/37bbeb1800a7a208d8aed4787c1cb014.png" /><p>输入导出证书文件的位置。它将采用PFX格式。</p><img class="content_img" src="/image/dd/dd7c11f34b08b1bb4395a7d30d30b7fe.png" /><p>确认您的设置，然后单击“完成”。</p><img class="content_img" src="/image/74/74cf99c4a7a8d1bdb8a2ba440329aec6.png" /><p>生成的PFX文件将安装到您的客户端计算机上，以告诉它们您的自签名证书来自受信任的来源。</p><p></p><p>部署到客户端计算机</p><p>在服务器端创建证书并使一切正常运行后，您可能会注意到，当客户端计算机连接到相应的URL时，会显示证书警告。发生这种情况是因为证书颁发机构(您的服务器)不是客户端上SSL证书的可信源。</p><img class="content_img" src="/image/85/85b8c4388d730e17d4fdeae69356b648.png" /><p>您可以单击警告并访问该站点，但是您可能会收到突出显示的URL栏形式的重复通知或重复的证书警告。要避免这种麻烦，您只需在客户机上安装自定义SSL安全证书即可。</p><p>根据您使用的浏览器，此过程可能会有所不同。IE和Chrome都从Windows证书存储中读取，但是Firefox有一个自定义的处理安全证书的方法。</p><p></p><p>重要说明：切勿安装来自未知来源的安全证书。实际上，您应该只在本地安装证书(如果它是您生成的)。任何合法网站都不会要求您执行这些步骤。</p><p></p><p>Internet Explorer和Google Chrome-本地安装证书</p><p>注意：即使Firefox不使用本地Windows证书存储，这仍然是推荐的步骤。</p><p>将从服务器导出的证书(PFX文件)复制到客户端计算机，或确保其在网络路径中可用。</p><p>使用与上面完全相同的步骤打开客户端计算机上的本地证书存储管理。您最终会出现在如下所示的屏幕上。</p><img class="content_img" src="/image/48/4880864c390c3a85f17c00d2feb99d58.png" /><p>在左侧，展开“证书”&gt;“受信任的根证书颁发机构”。右键单击证书文件夹，然后选择所有任务&gt;导入。</p><img class="content_img" src="/image/e2/e21f4428c25e29b3fce310408ff141ad.png" /><p>选择本地复制到您的计算机的证书。</p><img class="content_img" src="/image/3a/3a76b194a2479f1ef892d14ec66ba5d1.png" /><p>输入从服务器导出证书时分配的安全密码。</p><img class="content_img" src="/image/d4/d44af4979a81ebecb6b73f8323c854a8.png" /><p>存储“受信任的根证书颁发机构”应预先填写为目标。单击“下一步”。</p><img class="content_img" src="/image/3e/3ee7c64c05e2d0c11f7533eb7f903d96.png" /><p>检查设置并单击Finish。</p><img class="content_img" src="/image/5f/5f56b29b0e1586e19674a9d26d1baebe.png" /><p>您应该会看到一条成功消息。</p><img class="content_img" src="/image/82/82489f8e6340701c033e4f20b4af4604.png" /><p>刷新受信任的根证书颁发机构&gt;证书文件夹的视图，您应该会看到存储中列出了服务器的自签名证书。</p><img class="content_img" src="/image/ef/ef61b258948cfa4a8b68133bf46e1acb.jpg" /><p>完成此操作后，您应该能够浏览到使用这些证书的HTTPS站点，并且不会收到任何警告或提示。</p><p></p><p>Firefox-允许例外</p><p>Firefox对此过程的处理略有不同，因为它不从Windows存储读取证书信息。它允许您为特定站点上的SSL证书定义例外，而不是安装证书(本身)。</p><p>当您访问有证书错误的站点时，您将收到类似下面的警告。蓝色区域将命名您尝试访问的各个URL。要创建例外以绕过相应URL上的此警告，请单击添加例外按钮。</p><img class="content_img" src="/image/03/03b5c74e038fb7ed7043e55fb1b8446e.png" /><p>在“添加安全例外”对话框中，单击“确认安全例外”以在本地配置此例外。</p><img class="content_img" src="/image/13/13f5f6132a7be9337f03bfae7ae2f778.png" /><p>请注意，如果特定站点从其内部重定向到子域，您可能会收到多个安全警告提示(每次的URL略有不同)。使用与上面相同的步骤为这些URL添加例外。</p><p></p><p>结束 / 结尾 / 结论 / 推论</p><p>值得重复上面的通知，您永远不应该安装来自未知来源的安全证书。实际上，您应该只在本地安装证书(如果它是您生成的)。任何合法网站都不会要求您执行这些步骤。</p><p></p><p>高尔夫球场 / 链接 / 沙地 / 沙丘</p><p>从Microsoft下载IIS 6.0资源工具包(包括SelfSSL实用程序</p><div class="item_info"><span class="item_key"><a href="/tag/证书/">证书</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/计算机/">计算机</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/9502.html">如何在Windows PC上检查危险的超完美证书</a><li><a href="/story/8017.html">Download.com和其他捆绑SuPerfish风格的HTTPS Breaking广告软件</a><li><a href="/story/7468.html">Android一直发出的“网络可能会被监控”的警告到底是怎么回事？</a><li><a href="/story/6618.html">Web上HTTPS和SSL安全的5个严重问题</a><li><a href="/story/4565.html">浏览器如何验证网站身份并防范冒名顶替者</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>