<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>管理过时备份文件的自动化策略</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>管理过时备份文件的自动化策略</h2></div><div class="content"><p>备份通常是按非常频繁的计划运行的。如果不对其进行管理，其直接结果是大量文件可能会占用大量硬盘空间。记住手动进入并删除备份文件当然是一种管理方法，但不应该是一种长期策略，特别是在有易于实施的自动化过程的情况下。</p><p>没有“一刀切”的解决方案可以自动删除过期的备份文件。取决于备份过程(您是执行每周完整备份和每日增量备份，还是每日完整备份？)。和文件命名约定(您的备份文件是将日期作为文件名的一部分，还是每次都使用相同的文件名？)。在生成的备份文件中，适用的方法有所不同。</p><p>我们将指出几个简单的解决方案，它们适合最常见的备份方案，因此很可能有一个适合您。</p><p>按文件期限或日期删除</p><p>使用时间：每日完整备份。</p><p>清除过期备份的最简单、最合乎逻辑的方法可能是根据备份文件的日期执行删除过程。我们以前讨论过这个主题，使用日志文件作为目标文件，但是它与备份文件一样有效。</p><p>例如，要删除指定文件夹中在过去一周内未修改的任何文件，请运行以下命令：</p><p>请注意上面的关键字：已修改。ForFiles命令只能评估修改后的文件日期，而不能评估更适用的创建日期。但是，通常情况下，您可能不会在创建备份文件后对其进行修改，因此这很可能不是问题。</p><p>或者，如果您的备份文件在文件名中指定了某种数字日期模式(即BackupSet_100113-01-13.zip、BackupSet_2010Full.zip等)，则可以使用我们在链接文章中提供的DeleteByDatePattern脚本删除过期的备份。</p><p>例如，要删除与以下文件名模式匹配的超过2周的文件：“BACKUP_YYYY-MM-DD_(FULL|INCRENTIAL).zip”，请使用以下命令：</p><p>或者，如果您的文件命名模式是：“BackupSet_YYMMDD.zip”，您可以使用：</p><p>当然，可以根据需要进行调整，但上面的任何一种方法都可以很容易地添加到备份过程的开始或结束位置，以保持存储的备份数量易于管理。</p><p>文件夹滚动</p><p>使用时间：定期完整备份(每周、每两周等)。中间有每日增量备份。</p><p>“文件夹滚动”背后的想法是将所有当前备份集(完全备份+相应的增量备份)存储在单个文件夹中，然后有几个存档文件夹来保存旧备份集。在创建新备份集之前，请删除包含最旧备份集的文件夹内容，并将每个文件夹的内容向下“滚动”一个。</p><p>例如，假设我们有一个包含两个存档文件夹的当前备份文件夹。执行文件夹滚动的批处理脚本命令如下：</p><p>您可以根据需要添加任意数量的存档文件夹。只需删除最低存档文件夹的内容，为其他每个存档文件夹添加一个移动命令即可。</p><p>同样，这在您创建定期完整备份并在下次完整备份之前进行多次增量备份的情况下效果最好。只需将所有相关备份文件放到单个文件夹中，然后在创建新备份集之前运行文件夹滚动脚本即可。</p><p>备份9</p><p>使用时间：每日完整备份或单个文件备份。</p><p>backup9是Gammadyne开发的免费命令行实用程序。与上面的文件夹滚动过程类似，此实用程序背后的想法很简单，因为当它运行时，将创建目标文件的副本，并在末尾附加一个数字。此外，您还可以指定要保留的副本数的截止值，默认值为9(因此而得名)。</p><p>举一个例子可以最好地解释这一过程。使用以下命令将产生以下输出：</p><img class="content_img" src="/image/8e/8e7bc8d5135c4d9b9b1bfc20b221f133.png" /><img class="content_img" src="/image/92/92214c7181c888e7bc9de879acaa4c5c.png" /><p>如果再次运行此命令，将发生以下情况：</p><p>
评估要保留的文件数量(在我们的示例中为7个)，如果当前有那么多副本，则删除最后一个。
将删除BackupFile.zip.bk7。
BackupFile.zip.bk6重命名为BackupFile.zip.bk7。
BackupFile.zip.bk[#]已重命名为BackupFile.zip.bk[#+1]。
BackupFile.zip.bk1重命名为BackupFile.zip.bk2。
将复制BackupFile.zip并将其命名为BackupFile.zip.bk1</p><p>如果您有一个具有静态名称的文件，此实用程序最多可以保留999份副本，因此工作得非常好。您只需将Backup9命令添加到备份过程的开始或结束位置，它将负责跟踪适当数量的存档副本。</p><p>Belvedere自动文件管理器</p><p>使用时间：每日完整备份。</p><p>Belvedere自动文件管理器是一个实用程序，它在后台运行，监视活动的文件系统，并在满足指定条件时执行配置的操作。它的众多用途包括清理过期的备份文件。</p><p>规则的配置相当简单。例如，要创建使用文件名模式(如“BackupSet_Jan13.zip”)删除2周前的备份文件的规则，可以使用以下命令：</p><img class="content_img" src="/image/86/8630647c0a0bd97c0210c3a68d95f3a1.png" /><p>虽然我们正在执行的基本功能可以通过上述命令行工具轻松完成，但明显的区别在于，Belvedere为那些更习惯于点击和点击的用户提供了一个易于使用的图形界面。</p><p>Belvedere被设计为从系统托盘运行的桌面用户应用程序，但是您可以将Belvedere作为服务运行，并在服务器上使用它来执行此操作和其他文件监视操作。</p><p>结束 / 结尾 / 结论 / 推论</p><p>虽然您可以使用多种方法来管理备份到期过程，但我们上面介绍的方法既灵活又易于实施。通过一些实验，找出对你有效的方法，然后顺其自然，这样你就可以设置它，然后忘掉它。</p><p>高尔夫球场 / 链接 / 沙地 / 沙丘</p><p>从Gammadyne.com下载Backup9</p><p>从Lifehacker.com下载Belvedere</p><div class="item_info"><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/备份文件/">备份文件</a></span><span class="item_key"><a href="/tag/删除/">删除</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14796.html">如何在Linux上使用JOIN命令</a><li><a href="/story/14712.html">如何使用Google Drive Progative Web App</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14550.html">如何在Linux上使用Tail命令</a><li><a href="/story/14514.html">您想知道的关于Linux上的inode的所有信息</a><li><a href="/story/14471.html">如何在Google Drive中更改文件所有者</a><li><a href="/story/14454.html">如何在Linux上使用stat命令</a><li><a href="/story/14419.html">如何在Linux中获取文件或目录的大小</a><li><a href="/story/14347.html">如何使用cURL从Linux命令行下载文件</a><li><a href="/story/14315.html">免费下载：Microsoft批量重命名PowerToy</a><li><a href="/story/14306.html">如何创建USB驱动器的映像</a><li><a href="/story/14240.html">如何在Linux上使用LESS命令</a><li><a href="/story/14209.html">如何在Google Drive中分配任务</a><li><a href="/story/14188.html">如何最终确定和撤销对共享Google文件的访问</a><li><a href="/story/14167.html">如何共享指向您的Google文件的“复制”链接</a><li><a href="/story/14164.html">如何将Google文档、工作表或幻灯片文件共享为网页</a><li><a href="/story/14127.html">如何在iPhone和iPad上将文件复制和备份到外部存储</a><li><a href="/story/14088.html">如何在iPhone或iPad上使用Safari下载文件</a><li><a href="/story/14037.html">如何在Linux上创建别名和Shell函数</a><li><a href="/story/14026.html">如何在Linux上使用chgrp命令</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>