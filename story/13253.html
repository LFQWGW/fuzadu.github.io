<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何使用命令行重新启动或关闭Linux</title><link rel="stylesheet" href="/css.css"><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "https://hm.baidu.com/hm.js?f75329719d379998b2421a4cc2396366";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何使用命令行重新启动或关闭Linux</h2></div><div class="content"><p>想重新开始吗？本教程将向您展示如何从命令行干净而安全地重新启动或关闭您的Linux或MacOS计算机。</p><p>我们要坠落了</p><p>有时，您只需重新启动或完全关闭即可。如果您在没有GUI的服务器上工作，或者您正在与远程计算机进行SSH会话，那么命令行是您唯一的选择。Linux和类似Unix的系统(如MacOS)提供了几个命令，可以直接从命令行关闭或重新启动系统。</p><p>您可以使用的命令包括：</p><p>
关机。
重新启动。
站住。
断电</p><p>查看手册页中的这些命令可能会让人感到困惑。根据您选择的命令行选项，所有这些命令都可以执行关机、重新启动和系统暂停。事实上，重新启动、停止和关闭电源的手册页包含完全相同的信息。</p><img class="content_img" src="/image/61/612c9e4d856af802fa5f4bdbf98d3f43.png" /><p>这背后是什么？</p><p>答案在于Systemd Bootstrap系统，它取代了古老的System V init系统。在Linux世界，Fedora从2011年开始使用systemd。从那时起，它已经被许多发行版采用。Debian和Ubuntu在2015年换成了systemd。</p><p>在基于systemd的发行版上，Shutdown、reboot、jhalt和poweroff命令是指向systemctl命令的有效快捷方式。保留这些命令可以提供与基于system V init的发行版一定程度的兼容性。这意味着如果shell脚本(和核心system V系统管理员)被移到运行systemd发行版的计算机上，它们不会崩溃。</p><p>使用关机</p><p>关闭或重启多用户系统意味着你必须提前计划。你需要决定何时关机或重启，并警告其他系统用户关机即将到来，以及何时关机。*如果这是你自己的电脑，而且你是唯一使用它的人，那么生活就简单多了。</p><p>要运行这些命令中的任何一个，您必须是sudo组中的成员。也就是说，您必须具有超级用户权限，并且能够使用sudo命令。如果您发出的命令将立即生效，并且不会影响其他登录用户，则不需要使用sudo。如果您尝试使用这些命令之一，但该命令被拒绝，请使用sudo重试。</p><p>默认情况下，关闭命令可确保所有进程完全停止，所有文件系统同步，并且所有CPU活动均已停止。这是“停止”状态。然后它会向硬件发送一条消息，要求切断电源。当然，这就是关机或“断电”状态。</p><p>传递Shutdown一些参数是很常见的，例如时间字符串和一条消息，这些参数将发送给登录的用户以警告他们不要关机。我们从现在开始安排15分钟的停机时间。键入Shutdown、空格、+15、空格，然后键入要发送给用户的消息。</p><code>shutdown +15 Shutting down in 15 minutes!</code><img class="content_img" src="/image/82/828ce519d0f6654bac38358b909471a0.png" /><p>我们使用的时间字符串是+15，表示距离现在还有15分钟。+是可选的。我们本可以打出15个。</p><p>我们会收到一个响应，确认是否安排了关闭以及关闭的时间。所有登录的用户都会收到我们提供的消息。</p><img class="content_img" src="/image/03/03eb9f67a741d60ae3fa44561c001d88.png" /><p>要取消关闭，请使用-c选项(取消)。</p><code>shutdown -c</code><img class="content_img" src="/image/91/91e9a4b4ea9a208fb67208dc08f82cd5.png" /><p>虽然您没有收到任何关机已取消的通知，但您的登录用户会收到通知。</p><img class="content_img" src="/image/92/9205e53dbff4528adccb03fa1d910391.png" /><p>如果您不提供时间字符串，将从现在起计划关闭一分钟。请注意，如果不指定时间字符串，则无法向登录用户提供消息。</p><code>shutdown</code><img class="content_img" src="/image/cf/cfccf3ec4f50e5034782925547c98cb6.png" /><p>如果您甚至不能等待一分钟，您可以使用NOW作为时间字符串，关闭会立即生效。现在使用就像使用+0一样。</p><img class="content_img" src="/image/87/8763246fdf6977087429c44c4f7230d5.png" /><p>时间字符串可以是设置的时间，例如23：00。它必须遵循hh：mm的格式，并且必须是24小时制。在系统宕机前至少5分钟，会阻止新的登录。</p><img class="content_img" src="/image/9c/9cd88e786d3cfbf187cd8e23af77b6a9.png" /><p>我们知道默认的关机操作会使计算机进入停机状态，然后进入关机状态。我们可以通过将其他命令行选项传递给它来覆盖此行为。</p><p>
-H(HALT)选项将使您的计算机进入HALT状态，但不会要求硬件关闭电源。
-P键(关机)是默认操作。计算机关闭到停机状态，然后关闭电源。
-r选项(重新启动)不会使您的计算机进入暂停状态，然后重新启动。
-h选项(停止并关闭电源)与-P相同。如果同时使用-h和-H，则优先使用-H选项。
c(取消)选项将取消任何计划的关闭、暂停或重新启动。</p><p>以下是我们计划重新启动的示例。</p><code>shutdown -r 08:20 System rebooting at 08:20</code><img class="content_img" src="/image/2f/2fd020165d222bcbb5b49fa02535f953.png" /><p>REBOOT、HALT和POWER OFF命令</p><p>这些命令执行其名称所暗示的操作。但是，它们中的每一个都将接受命令行选项，以使它们中的任何一个执行重新启动、暂停或关机。但为什么要混淆问题呢？这些命令最好是在表面上使用。</p><p>如果要立即重新启动，请使用重新启动。如果您想现在关机，请使用POWER OFF，如果您想现在停止系统，请使用HALT。</p><code>reboot</code><img class="content_img" src="/image/be/be20cc725c3fb542d00f695d12c0d5c2.png" /><code>halt</code><img class="content_img" src="/image/ea/eae9976e4fcd9b67c358e4860d0a53f5.png" /><code>poweroff</code><img class="content_img" src="/image/1a/1ac8334c1f3b30990b8ae749c08cd611.png" /><p>这些命令立即生效。如果这些命令中的任何一个被拒绝，请在它们之前加上sudo。但请注意，拒绝通常是因为有其他用户登录到系统，您将使其脱机。</p><p>哪个司令部最适合我？</p><p>在多用户环境中，使用SHUTDOWN执行这些操作可以让您更好地控制。在这些情况下，安排关机和重启以及用广播消息提醒用户的功能将是无价的。对于单用户计算机，重新启动并关闭电源可能会满足您的需要。</p><div class="item_info"><span class="item_key"><a href="/tag/使用/">使用</a></span><span class="item_key"><a href="/tag/命令/">命令</a></span><span class="item_key"><a href="/tag/重新启动/">重新启动</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/14706.html">如何在Linux上使用uniq命令</a><li><a href="/story/14624.html">解释的Linux文件时间戳：atime、mtime和ctime</a><li><a href="/story/14585.html">如何在Microsoft Excel中兑换货币</a><li><a href="/story/14577.html">如何检查Linux上安装了哪个GPU</a><li><a href="/story/14572.html">如何使用Jouralctl读取Linux系统日志</a><li><a href="/story/14570.html">如何在Linux上使用grep命令</a><li><a href="/story/14555.html">2020年CES最佳：我们今年看到的所有最好的东西</a><li><a href="/story/14550.html">如何在Linux上使用Tail命令</a><li><a href="/story/14542.html">如何从MacOS Catalina向iPhone添加自定义铃声</a><li><a href="/story/14508.html">如何使用键盘快捷键简化流媒体Netflix</a><li><a href="/story/14507.html">如何在Linux上使用HISTORY命令</a><li><a href="/story/14499.html">如何在Linux上使用免费命令</a><li><a href="/story/14467.html">如何在Windows 10上切换到本地用户帐户</a><li><a href="/story/14466.html">如何在Linux上使用at和Batch来调度命令</a><li><a href="/story/14461.html">如何设置您的新Mac</a><li><a href="/story/14450.html">如何在Excel中将一长列变为多列</a><li><a href="/story/14438.html">如何在iPhone上创建和使用Memoji和Animoji</a><li><a href="/story/14434.html">Chrome 79的新特性，现已推出</a><li><a href="/story/14426.html">如何使用Google Sheets中的查询功能</a><li><a href="/story/14424.html">如何向Outlook会议请求添加默认签名</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>