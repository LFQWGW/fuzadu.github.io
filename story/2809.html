<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>用于备份所有SQL Server数据库的批处理脚本</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>用于备份所有SQL Server数据库的批处理脚本</h2></div><div class="content"><p>我们已经介绍了如何从命令行备份SQL Server数据库，那么如果您想要一次备份所有数据库怎么办？您可以创建为每个数据库运行备份命令的批处理脚本，但每次添加或删除数据库时都必须更新此脚本。此外，数据库备份将全部附加到一个文件中，该文件在每次运行时都会随着新备份的大小而增加。相反，我们将以真正的“设置并忘记它”的方式，创建一个批处理脚本，该脚本将随着新数据库的添加和删除而适应您的SQL Server。</p><p>为了切中要害，下面是备份脚本：</p><p>假设日期为2009年1月13日，并且您有名为“MyDB”、“AnotherDB”和“DB name with space”的3个数据库，则脚本将在指定的备份位置生成3个文件：</p><p>
2009-01-13_AnotherDB.bak。
2009-01-13_带Spaces.bak的数据库名称。
2009-01-13_MyDB.bak</p><p>自定义和运行批处理脚本</p><p>当然，您需要根据您的环境自定义该脚本，因此您需要执行以下操作：</p><p>
如果您的机器的区域设置未设置为美国，则命令‘date/T’可能不会以“Tue 01/13/2009”格式返回日期。如果是这种情况，NowDate变量将不会生成所需的格式，应该进行调整。(1位)。
将‘MyServer’更改为您的SQL Server的名称(如果适用，请添加实例名称)。(2个位置)。
名为‘master’、‘model’、‘msdb’和‘tempdb’的数据库是SQL Server附带的数据库。如果不希望备份其他数据库名称，可以将其添加到此列表中。(1位)。
将备份位置从‘D：BACKUP’更改为要存储数据库备份文件的位置。</p><p>自定义批处理脚本后，将其安排为以具有管理员权限的用户身份通过Windows Task Scheduler运行，即可完成所有设置。</p><div class="item_info"><span class="item_key"><a href="/tag/数据库/">数据库</a></span><span class="item_key"><a href="/tag/备份/">备份</a></span><span class="item_key"><a href="/tag/脚本/">脚本</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/5365.html">如何显示MySQL Server的系统变量</a><li><a href="/story/2862.html">轻松查看数据库中各个SQL表的磁盘空间使用情况</a><li><a href="/story/2859.html">用于简化SQL Server数据库维护的批处理脚本</a><li><a href="/story/2851.html">用BGInfo建立网络计算机系统信息数据库</a><li><a href="/story/2811.html">使用SQL Server Management Studio恢复SQL数据库备份</a><li><a href="/story/2079.html">在Access 2010中使用通配符条目</a><li><a href="/story/302.html">快速提示：自动压缩Access数据库</a><li><a href="/story/5.html">将MySQL数据库备份到文件</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>