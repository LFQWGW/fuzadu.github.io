<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>如何在Linux上使用字符串命令</title><link rel="stylesheet" href="/css.css"></head><body><div id="header"><a class="site_title" href="http://www.fuzadu.com">复杂度</a></div><div><div><h2>如何在Linux上使用字符串命令</h2></div><div class="content"><p>想要查看二进制文件或数据文件中的文本吗？Linux string命令会为您拉出那些称为“字符串”的文本。</p><p>Linux充满了搜索问题的命令，这些命令看起来像是解决方案。弦乐命令绝对属于这一阵营。它的目的究竟是什么呢？是否指向从二进制文件中列出可打印字符串的命令？</p><p>让我们后退一步。二进制文件--比如程序文件--可能包含人类可读的文本字符串。但是你怎么才能看到它们呢？如果您使用CAT或更少的内容，您很可能最终得到一个悬挂的终端窗口。如果无法打印的字符通过文本文件输入，则设计用于处理文本文件的程序不能很好地处理这些文件。</p><p>二进制文件中的大多数字节是人类不可读的，并且不能以任何有意义的方式打印到终端窗口。没有字符或标准符号表示与字母数字字符、标点符号或空格不对应的二进制值。这些字符统称为“可打印”字符。其余的是“不可打印”的字符。</p><p>因此，试图在二进制或数据文件中查看或搜索文本字符串是一个问题。这就是弦的用武之地。它从文件中提取可打印字符的字符串，以便其他命令可以使用这些字符串，而不必处理不可打印的字符。</p><p>使用字符串命令</p><p>字符串命令并不复杂，其基本用法也非常简单。我们在命令行上提供要搜索的字符串的文件名。</p><p>这里，我们将对名为“jibber”的二进制文件(可执行文件)使用字符串。我们键入字符串、空格、“jibber”，然后按Enter键。</p><code>strings jibber</code><img class="content_img" src="/image/d4/d4ae7f97a06dd56b52f132f4a00a9778.png" /><p>从文件中提取字符串并在终端窗口中列出。</p><img class="content_img" src="/image/16/16d3e23718e258f37c48ab6ae58a54ed.png" /><p>设置最小字符串长度</p><p>默认情况下，字符串将搜索四个字符或更长的字符串。要设置更长或更短的最小长度，请使用-n(最小长度)选项。</p><p>请注意，最小长度越短，您看到更多垃圾的机会就越高。</p><p>某些二进制值与表示可打印字符的值具有相同的数值。如果这些数值中的两个恰好在文件中并排出现，并且您指定的最小长度为两个，则将报告这些字节，就像它们是字符串一样。</p><p>要要求字符串使用2作为最小长度，请使用以下命令。</p><code>strings -n 2 jibber</code><img class="content_img" src="/image/ad/ade02f439362fa76095ec30c89b36382.png" /><p>现在，我们在结果中包含了两个字母的字符串。请注意，空格被视为可打印字符。</p><img class="content_img" src="/image/fa/fa33fc5e4f8715ddf64151b3f4ef7d98.png" /><p>通过更少的管道输送字符串</p><p>由于字符串的输出长度较长，我们将通过较少的管道来传递它。然后，我们可以在文件中滚动查找感兴趣的文本。</p><code>strings jibber | less</code><img class="content_img" src="/image/d8/d8f4c2d8606d1561c8681a3a458cc639.png" /><p>列表现在以LESS显示，列表的顶部首先显示。</p><img class="content_img" src="/image/08/0833e2a4e845a6d72822ae6f8e0d14d5.png" /><p>将字符串用于对象文件</p><p>通常，程序源代码文件被编译成目标文件。这些文件与库文件链接，以创建二进制可执行文件。我们手头有Jibber对象文件，所以让我们来看看该文件的内部。请注意“.o”文件扩展名。</p><code>jibber.o | less</code><img class="content_img" src="/image/9f/9f7610bca93341fb7b642738daf97c8a.png" /><p>如果第一组字符串的长度超过8个字符，则它们全部在第8列换行。如果它们已换行，则第九列中有一个“H”字符。您可能会将这些字符串识别为SQL语句。</p><img class="content_img" src="/image/52/52f310cd9f909fc211e33cc4468675d0.png" /><p>滚动浏览输出会发现并未在整个文件中使用此格式。</p><img class="content_img" src="/image/5e/5e2acb0e91a7ad6b0db11f85bdada602.png" /><p>看到目标文件和完成的可执行文件之间的文本字符串的差异是很有趣的。</p><p>在文件中的特定区域中搜索</p><p>编译后的程序在自身内部有不同的区域，用于存储文本。默认情况下，字符串搜索整个文件以查找文本。这就好像您使用了-a(All)选项一样。要仅在文件中已初始化、已加载的数据节中搜索字符串，请使用-d(数据)选项。</p><code>strings -d jibber | less</code><img class="content_img" src="/image/91/915934ad76dca1a61e8675f9e9242682.png" /><p>除非您有很好的理由，否则您最好使用默认设置并搜索整个文件。</p><p>打印字符串偏移量</p><p>我们可以让字符串打印从每个字符串所在的文件开始的偏移量。为此，请使用-o(偏移)选项。</p><code>strings -o parse_phrases | less</code><img class="content_img" src="/image/6c/6c7e744fd47bae9cdcac069893cd0a56.png" /><p>偏移量以八进制给出。</p><img class="content_img" src="/image/ae/ae95568c3f2b1b64899e70e0c6b63a15.png" /><p>要以不同的数值基数(例如十进制或十六进制)显示偏移，请使用-t(基数)选项。基数选项后面必须跟d(十进制)、x(十六进制)或o(八进制)。使用-to与使用-o相同。</p><code>strings -t d parse_phrases | less</code><img class="content_img" src="/image/e3/e3e4c0c6c2c9323c4bf426d97e244bdd.png" /><p>现在，偏移量以十进制打印。</p><img class="content_img" src="/image/b4/b4b9f9b8b5e232bde75038223e54e836.png" /><code>strings -t x parse_phrases | less</code><img class="content_img" src="/image/3e/3e226c04a2c6b6ce1f53e4092ff8d302.png" /><p>现在，偏移量以十六进制打印。</p><img class="content_img" src="/image/7a/7abad86d216195bee5c32f13053b2d9f.png" /><p>包括空格</p><p>字符串将制表符和空格字符视为其找到的字符串的一部分。其他空格字符(如换行符和回车符)不会被视为字符串的一部分。-w选项(空格)使字符串将所有空格字符视为字符串的一部分。</p><code>strings -w add_data | less</code><img class="content_img" src="/image/bd/bd2aca494357fc61c1a9b283d9333675.png" /><p>我们可以在输出中看到空行，它是第二行末尾的(不可见)回车符和换行符的结果。</p><img class="content_img" src="/image/3d/3dc808b1664b57eb66c671be2653558a.png" /><p>我们并不局限于文件</p><p>我们可以将字符串与任何字节流一起使用，或可以生成字节流。</p><p>使用此命令，我们可以查看计算机的随机存取存储器(RAM)。</p><p>我们需要使用sudo，因为我们正在访问/dev/mem。此文件是一个字符设备文件，其中包含计算机主内存的映像。</p><code>sudo strings /dev/mem | less</code><img class="content_img" src="/image/3f/3f13975a2e3af001bb6a8a755c6b0b57.png" /><p>该列表并不是RAM的全部内容。它只是可以从中提取的字符串。</p><img class="content_img" src="/image/47/478870ce48dd3708997bcb972b62bdf8.png" /><p>相关：在Linux中“一切都是文件”是什么意思？</p><p>一次搜索多个文件</p><p>通配符可用于选择要搜索的文件组。“*”字符表示多个字符，“？”字符表示任何单个字符。您还可以选择在命令行上提供许多文件名。</p><p>我们将使用通配符搜索/bin目录中的所有可执行文件。因为清单将包含来自许多文件的结果，所以我们将使用-f(文件名)选项。这将在每行开始处打印文件名。然后，我们可以看到每个字符串是在哪个文件中找到的。</p><p>我们通过grep传递结果，并查找包含“版权”一词的字符串。</p><code>strings -f /bin/* | grep Copyright</code><img class="content_img" src="/image/7b/7b7f5e49a67862108e7b707be53e5db8.png" /><p>我们得到了/bin目录中每个文件的版权声明的整齐列表，文件名在每行的开头。</p><img class="content_img" src="/image/9f/9fe65ff88b2ced294b5d3a7704a1a2e2.png" /><p>解开的字符串</p><p>字符串没有什么神秘之处；它是典型的Linux命令。它做了一些非常具体的事情，而且做得非常好。</p><p>这是Linux的另一个缺点，当它与其他命令一起工作时，它就会变得活灵活现。当您看到它如何位于二进制文件和其他工具(如grep)之间时，您会开始欣赏这个稍显晦涩的命令的功能。</p><div class="item_info"><span class="item_key"><a href="/tag/字符串/">字符串</a></span><span class="item_key"><a href="/tag/文件/">文件</a></span><span class="item_key"><a href="/tag/使用/">使用</a></span></div></div><div class="relate_story"><div><h3>相关文章</h3></div><ul><li><a href="/story/3765.html">如何调整Windows资源管理器中的自动建议功能</a><li><a href="/story/2005.html">在Internet Explorer 8中更改用户代理字符串</a><li><a href="/story/91.html">在C#中将字符串格式化为货币</a></ul></div></div><div id="footer">&copy 2020 fuzadu.com</div></body></html>